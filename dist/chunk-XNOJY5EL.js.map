{"version":3,"sources":["../src/components/main.ts"],"sourcesContent":["import { getGlobalContext } from \"@utils/globalContext\";\r\nimport { SceneInspector } from \"./threejs/scene_inspector\";\r\nimport { ProjectCard } from \"./website/card\";\r\nimport { ProjectGallery } from \"./website/gallery\";\r\nimport { Navbar } from \"./website/header\";\r\nimport { LoadingModal } from \"./website/loading\";\r\n\r\nexport interface WebComponentManager {\r\n  /**\r\n   * @description mounts the web components\r\n   */\r\n  mountComponents: () => void;\r\n  /**\r\n   * @description attach global context references\r\n   */\r\n  attachReferences: () => void;\r\n  /**\r\n   * @description unmounts web components\r\n   */\r\n  unmountComponents: () => void;\r\n}\r\n\r\nexport const createWebComponentManager = (): WebComponentManager => {\r\n  /**\r\n   * @description mount components\r\n   */\r\n  const mountComponents = () => {\r\n    customElements.define(\"loading-modal\", LoadingModal);\r\n    customElements.define(\"nav-bar\", Navbar);\r\n    customElements.define(\"project-gallery\", ProjectGallery);\r\n    customElements.define(\"project-card\", ProjectCard);\r\n    customElements.define(\"scene-inspector\", SceneInspector);\r\n    console.log(\"custom components mounted\");\r\n  };\r\n\r\n  /**\r\n   * attach references like global context for the web components\r\n   */\r\n  const attachReferences = () => {\r\n    /***\r\n     * get context attached to web components\r\n     */\r\n    const context = getGlobalContext();\r\n\r\n    try {\r\n      const loadingModal: LoadingModal =\r\n        document.querySelector(\"loading-modal\")!;\r\n      loadingModal.eventBusManager = context.eventBusManager;\r\n    } catch (err) {\r\n      console.error(`Missing loading modal element :${err}`);\r\n    }\r\n\r\n    try {\r\n      const navbar: Navbar = document.querySelector(\"nav-bar\")!;\r\n      navbar.eventBusManager = context.eventBusManager;\r\n    } catch (err) {\r\n      console.error(`Missing navbar element : ${err}`);\r\n    }\r\n\r\n    try {\r\n      const gallery: ProjectGallery =\r\n        document.querySelector(\"project-gallery\")!;\r\n      gallery.eventBusManager = context.eventBusManager;\r\n    } catch (err) {\r\n      console.error(`Missing project gallery component : ${err}`);\r\n    }\r\n\r\n    try {\r\n      const sceneInspector: SceneInspector =\r\n        document.querySelector(\"scene-inspector\")!;\r\n      sceneInspector.eventBusManager = context.eventBusManager;\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * unmount web components\r\n   */\r\n  const unmountComponents = () => {\r\n    const selectors = [\r\n      \"loading-modal\",\r\n      \"nav-bar\",\r\n      \"project-gallery\",\r\n      \"project-card\",\r\n      \"scene-inspector\",\r\n    ];\r\n\r\n    selectors.forEach((selector) => {\r\n      const element = document.querySelector(selector);\r\n      if (element?.parentElement) {\r\n        //call disconnected  callback for the removal of event listeners\r\n        element.parentElement.removeChild(element);\r\n      }\r\n      else{\r\n        console.warn(`Could not unmount ${selector} either already removed or not found`)\r\n      }\r\n    });\r\n\r\n    console.log(\"custom components unmounted\");\r\n  };\r\n\r\n  return {\r\n    mountComponents: mountComponents,\r\n    attachReferences: attachReferences,\r\n    unmountComponents: unmountComponents,\r\n  };\r\n};\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAsBO,IAAM,4BAA4B,MAA2B;AAIlE,QAAM,kBAAkB,MAAM;AAC5B,mBAAe,OAAO,iBAAiB,YAAY;AACnD,mBAAe,OAAO,WAAW,MAAM;AACvC,mBAAe,OAAO,mBAAmB,cAAc;AACvD,mBAAe,OAAO,gBAAgB,WAAW;AACjD,mBAAe,OAAO,mBAAmB,cAAc;AACvD,YAAQ,IAAI,2BAA2B;AAAA,EACzC;AAKA,QAAM,mBAAmB,MAAM;AAI7B,UAAM,UAAU,iBAAiB;AAEjC,QAAI;AACF,YAAM,eACJ,SAAS,cAAc,eAAe;AACxC,mBAAa,kBAAkB,QAAQ;AAAA,IACzC,SAAS,KAAK;AACZ,cAAQ,MAAM,kCAAkC,GAAG,EAAE;AAAA,IACvD;AAEA,QAAI;AACF,YAAM,SAAiB,SAAS,cAAc,SAAS;AACvD,aAAO,kBAAkB,QAAQ;AAAA,IACnC,SAAS,KAAK;AACZ,cAAQ,MAAM,4BAA4B,GAAG,EAAE;AAAA,IACjD;AAEA,QAAI;AACF,YAAM,UACJ,SAAS,cAAc,iBAAiB;AAC1C,cAAQ,kBAAkB,QAAQ;AAAA,IACpC,SAAS,KAAK;AACZ,cAAQ,MAAM,uCAAuC,GAAG,EAAE;AAAA,IAC5D;AAEA,QAAI;AACF,YAAM,iBACJ,SAAS,cAAc,iBAAiB;AAC1C,qBAAe,kBAAkB,QAAQ;AAAA,IAC3C,SAAS,KAAK;AACZ,cAAQ,MAAM,GAAG;AAAA,IACnB;AAAA,EACF;AAKA,QAAM,oBAAoB,MAAM;AAC9B,UAAM,YAAY;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAEA,cAAU,QAAQ,CAAC,aAAa;AAC9B,YAAM,UAAU,SAAS,cAAc,QAAQ;AAC/C,UAAI,SAAS,eAAe;AAE1B,gBAAQ,cAAc,YAAY,OAAO;AAAA,MAC3C,OACI;AACF,gBAAQ,KAAK,qBAAqB,QAAQ,sCAAsC;AAAA,MAClF;AAAA,IACF,CAAC;AAED,YAAQ,IAAI,6BAA6B;AAAA,EAC3C;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;","names":[]}