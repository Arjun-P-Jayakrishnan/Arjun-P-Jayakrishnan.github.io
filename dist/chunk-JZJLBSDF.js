import {a as a$2}from'./chunk-MI6KVUH7.js';import {a as a$1}from'./chunk-VGX47XE2.js';import {a}from'./chunk-56WY7GLK.js';import {LoadingManager}from'three';var k=({scene:n,renderer:f,loaderEventBus:t,stateManager:d,storageManager:i})=>{let a$3=new LoadingManager,l=false,[u,b,m]=[a({scene:n,loadingManager:a$3,storageManager:i}),a$1({scene:n,loadingManager:a$3,storageManager:i}),a$2({scene:n,loadingManager:a$3,renderer:f,storageManager:i})],o={glb:[],fbx:[],hdr:[]},L=()=>{a$3.onStart=(e,r,s)=>{t.emit({type:"load:start",url:e,loaded:r,total:s}),d.loading.setState({loading:{active:true,progress:0}});},a$3.onProgress=(e,r,s)=>{t.emit({type:"load:progress",url:e,loaded:r,total:s}),d.loading.setState({loading:{active:true,progress:r/s}});},a$3.onLoad=()=>{t.emit({type:"load:complete"});},a$3.onError=e=>{t.emit({type:"load:error",url:e});},l=true;},h=e=>{switch(e.type){case "glb":o.glb.push(e);break;case "fbx":o.fbx.push(e);break;case "hdr":o.hdr.push(e);break;}},M=e=>{e.forEach(r=>{h(r);});};return {configure:()=>{L();},load:async e=>{if(!l)throw new Error("Error: Trying to load from loader before configuring it");let r=[];return M(e),r.push(u.load(o.glb)),r.push(b.load(o.fbx)),r.push(m.load(o.hdr)),await Promise.allSettled(r),o.fbx=[],o.glb=[],o.hdr=[],{success:[],error:[]}},dispose:()=>{}}};export{k as a};//# sourceMappingURL=chunk-JZJLBSDF.js.map
//# sourceMappingURL=chunk-JZJLBSDF.js.map