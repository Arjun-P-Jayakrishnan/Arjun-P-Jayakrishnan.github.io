import {a as a$1}from'./chunk-LF3Q6SV4.js';import {a}from'./chunk-J6AV5YYH.js';import {a as a$2}from'./chunk-L3I32D56.js';import {b}from'./chunk-37KH4TOK.js';import {LoadingManager}from'three';var C=f=>{let{scene:n,renderer:L,loaderEventBus:t,globalState:l}=f,s=new LoadingManager,a$3=[],b$1=()=>{s.onStart=(e,o,r)=>{t.emit({type:"load:start",url:e,loaded:o,total:r}),l.setState({loading:{active:true,progress:0}});},s.onProgress=(e,o,r)=>{t.emit({type:"load:progress",url:e,loaded:o,total:r}),l.setState({loading:{active:true,progress:o/r}});},s.onLoad=()=>{t.emit({type:"load:complete"});},s.onError=e=>{t.emit({type:"load:error",url:e});};},v=({modelDescriptors:e,environmentMap:o})=>{let r=[],c=[],g=o??null;e.forEach(i=>{switch(i.loaderType){case "glb":r.push(i);break;case "fbx":c.push(i);break;}}),a$3.push(a({assets:r,scene:n,loadingManager:s,loadingEventBus:t})),a$3.push(a$1({assets:c,scene:n,loadingManager:s,loadingEventBus:t})),g!==null&&a$3.push(a$2({asset:g,scene:n,renderer:L,loadingManager:s,loadingEventBus:t}));};return {configure:()=>{b$1();},load:async e=>{b.onInit(`loading the models ${JSON.stringify(e)}`);let o=[];return v(e.source),a$3.forEach(r=>{o.push(r.load());}),await Promise.allSettled(o),a$3=[],b.onInit("loaded models i guess"),{success:[],error:[]}},dispose:()=>{a$3.forEach(e=>{e.dispose?.();});}}};export{C as a};//# sourceMappingURL=chunk-YSY5DFCU.js.map
//# sourceMappingURL=chunk-YSY5DFCU.js.map