{"version":3,"sources":["../src/graphics/gameplay/controllers/plugins/mouse.ts"],"sourcesContent":["import { ControllerPlugin } from \"../plugins\";\n\n\nexport interface MouseControllerProps {\n  sensitivity: number;\n}\n\nexport interface MouseController extends ControllerPlugin {\n  getRotation: () => {\n    pitch: number;\n    yaw: number;\n  };\n}\n\ninterface State {\n  mouse: {\n    lastX: number;\n    lastY: number;\n  };\n\n  rotation: {\n    pitch: number;\n    yaw: number;\n  };\n}\n\nexport const createMouseController = (\n  props: MouseControllerProps\n): MouseController => {\n  let state: State = {\n    mouse: {\n      lastX: 0,\n      lastY: 0,\n    },\n    rotation: {\n      pitch: 0,\n      yaw: 0,\n    },\n  };\n\n  const handleMouse = (e: MouseEvent) => {\n    state.rotation.pitch = e.clientY - state.mouse.lastY;\n    state.rotation.yaw = e.clientX - state.mouse.lastX;\n\n    state.mouse.lastX = e.clientX;\n    state.mouse.lastY = e.clientY;\n  };\n\n  const mountEvents = () => {\n    document.addEventListener(\"mousemove\", handleMouse);\n  };\n\n  const unmountEvents = () => {\n    document.removeEventListener(\"mousemove\", handleMouse);\n  };\n\n  const getRotation = () => {\n    const sideways = state.rotation.yaw;\n    const up_down = state.rotation.pitch;\n\n    state.rotation.pitch = 0;\n    state.rotation.yaw = 0;\n\n    return {\n      yaw: props.sensitivity * sideways,\n      pitch: props.sensitivity * up_down,\n    };\n  };\n\n  return {\n    mount: mountEvents,\n    unmount: unmountEvents,\n    getRotation: getRotation,\n  };\n};\n"],"mappings":"AA0BO,IAAMA,EACXC,GACoB,CACpB,IAAIC,EAAe,CACjB,MAAO,CACL,MAAO,EACP,MAAO,CACT,EACA,SAAU,CACR,MAAO,EACP,IAAK,CACP,CACF,EAEMC,EAAeC,GAAkB,CACrCF,EAAM,SAAS,MAAQE,EAAE,QAAUF,EAAM,MAAM,MAC/CA,EAAM,SAAS,IAAME,EAAE,QAAUF,EAAM,MAAM,MAE7CA,EAAM,MAAM,MAAQE,EAAE,QACtBF,EAAM,MAAM,MAAQE,EAAE,OACxB,EAuBA,MAAO,CACL,MAtBkB,IAAM,CACxB,SAAS,iBAAiB,YAAaD,CAAW,CACpD,EAqBE,QAnBoB,IAAM,CAC1B,SAAS,oBAAoB,YAAaA,CAAW,CACvD,EAkBE,YAhBkB,IAAM,CACxB,IAAME,EAAWH,EAAM,SAAS,IAC1BI,EAAUJ,EAAM,SAAS,MAE/B,OAAAA,EAAM,SAAS,MAAQ,EACvBA,EAAM,SAAS,IAAM,EAEd,CACL,IAAKD,EAAM,YAAcI,EACzB,MAAOJ,EAAM,YAAcK,CAC7B,CACF,CAMA,CACF","names":["createMouseController","props","state","handleMouse","e","sideways","up_down"]}