import{a as i}from"./chunk-K2752XLP.js";import{a as c}from"./chunk-2HIMYHYT.js";import{a as s}from"./chunk-AEEBPYE3.js";import{b as m}from"./chunk-P5V7ULDZ.js";import{Clock as f}from"three";var V=p=>{let{globalState:T,eventBusManager:g,globalStorage:b}=m(),u=new f,a,e,t={deltaTime:0,mouseRotation:{yaw:0,pitch:0}},o={deltaTime:0,playerData:null},d=r=>{a=r;let n=s();n.mount({mouse:{sensitivity:.01}});let l=c({ids:p.player.ids},{scene:r.scene});l.create();let C=i({camera:r.camera});e={player:l,camera:C,controllers:n}},y=()=>{o.deltaTime=u.getDelta(),isNaN(o.deltaTime)||(t.deltaTime=o.deltaTime)};return{mount:d,update:()=>{y(),t.mouseRotation=e.controllers.getController("mouse")?.getRotation(),o.playerData=e.player.update(t.deltaTime,t.mouseRotation),e.camera.update(o.playerData.position,t.mouseRotation)},unmount:()=>{e.player.destroy(),e.controllers.unmount(),e=null,a=null}}};export{V as a};
//# sourceMappingURL=chunk-RFHEPYVD.js.map