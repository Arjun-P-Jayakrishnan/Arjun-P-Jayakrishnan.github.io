import {a as a$1}from'./chunk-A7VEBAL7.js';import'./chunk-IMT4XHMW.js';import'./chunk-YWY65CUM.js';import'./chunk-LGIB4RUY.js';import {a as a$2}from'./chunk-EJYJP2SR.js';import {a}from'./chunk-C5UXMXKD.js';import'./chunk-OYCTBHFC.js';import'./chunk-GLOVEEDL.js';import'./chunk-2WMY54B6.js';import'./chunk-63O4EDAM.js';import'./chunk-N7TW4HJ3.js';import'./chunk-UW2YBRFK.js';import'./chunk-AEEBPYE3.js';import'./chunk-MGRBYLGI.js';import'./chunk-JUOQTY7T.js';import'./chunk-CJXS6KP5.js';import'./chunk-S7M4EPWK.js';import'./chunk-NAQJJEVU.js';import'./chunk-H7XGBN2W.js';import'./chunk-Q2HTSQYH.js';import'./chunk-DOA63GLT.js';import {b}from'./chunk-P5V7ULDZ.js';import'./chunk-EKSEU2WX.js';import'./chunk-QPA5K4VS.js';import'./chunk-XSWGHLEF.js';import'./chunk-XVCKZLMV.js';import'./chunk-EVMZ26YK.js';import'./chunk-TMX2SHVF.js';import'./chunk-S2PEVX35.js';import'./chunk-PCYAXXK4.js';var u,e,o={isPreMounted:false,isMounted:false},d=()=>{try{u=b(),e={webComponent:a$1(),gameEngine:a({loaderOptions:{meshesMetaData:a$2.meshes,hdrMetaData:a$2.hdr}})},e.webComponent.mountComponents(),e.gameEngine.mount(),o.isPreMounted=!0;}catch(n){console.error(`Error during pre-mount setup : ${n}`);}},m=async()=>{try{(await Promise.allSettled([e.gameEngine.load()])).forEach(r=>{r.status=="rejected"&&console.error(`Failed to load models and mount game engine ${r.reason}`);}),e.gameEngine.update();}catch(n){console.error(`Error while trying to load assets : ${n}`);}},c=()=>{try{if(!e)throw new Error("Error while pre-mounting.");e.webComponent.attachReferences(),"requestIdleCallback"in window?window.requestIdleCallback(async()=>{await m();}):setTimeout(async()=>{await m();},200),o.isMounted=!0;}catch(n){console.error(`Error while main mount due to : ${n}`);}},l=()=>{try{if(!o.isMounted)return;e.webComponent.unmountComponents(),e.gameEngine.unmount();}catch(n){console.error(`Error while main unmount due to : ${n}`);}},g=()=>{d(),document.addEventListener("DOMContentLoaded",()=>{o.isPreMounted&&c(),window.addEventListener("beforeunload",()=>{o.isMounted&&l();});});};g();//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map