import {a as a$1}from'./chunk-OL7OWJ4Y.js';import'./chunk-2IRYGOGO.js';import'./chunk-27URZVCA.js';import'./chunk-YRMUWQYQ.js';import'./chunk-XGAQJCEV.js';import'./chunk-EBLUBMTU.js';import'./chunk-RLKPQEDV.js';import'./chunk-LJZ57ZT3.js';import'./chunk-FMSS4YZT.js';import {a}from'./chunk-Y2EWYBG3.js';import'./chunk-WNPVTV3D.js';import'./chunk-CJXS6KP5.js';import'./chunk-N7TW4HJ3.js';import'./chunk-Y3P3ES6H.js';import'./chunk-CRGVJHEO.js';import'./chunk-Q2HTSQYH.js';import'./chunk-JKKQ7BUF.js';import {b as b$1}from'./chunk-TO4VY5TN.js';import {b}from'./chunk-Q74ELE7M.js';import'./chunk-EVMZ26YK.js';import'./chunk-TMX2SHVF.js';import'./chunk-EKSEU2WX.js';import'./chunk-QPA5K4VS.js';import'./chunk-XSWGHLEF.js';import'./chunk-XVCKZLMV.js';import'./chunk-S2PEVX35.js';import'./chunk-LGIB4RUY.js';import'./chunk-JHTWF4VD.js';var l,n,o={isPreMounted:false,isMounted:false},d=()=>{try{l=b(),n={webComponent:a$1(),gameEngine:a(b$1)},n.webComponent.mountComponents(),n.gameEngine.mount(),o.isPreMounted=!0;}catch(e){console.error(`Error during pre-mount setup : ${e}`);}},m=async()=>{try{console.log("getting data from json files"),await n.webComponent.loadData();}catch(e){console.error(`Error loading data from json ${e}`);}},c=async()=>{try{(await Promise.allSettled([n.gameEngine.load()])).forEach(r=>{r.status=="rejected"&&console.error(`Failed to load models and mount game engine ${r.reason}`);}),n.gameEngine.update();}catch(e){console.error(`Error while trying to load assets : ${e}`);}},u=()=>{try{if(!n)throw new Error("Error while pre-mounting.");n.webComponent.attachReferences(),"requestIdleCallback"in window?window.requestIdleCallback(async()=>{await c(),await m();}):setTimeout(async()=>{await c(),await m();},200),o.isMounted=!0;}catch(e){console.error(`Error while main mount due to : ${e}`);}},g=()=>{try{if(!o.isMounted)return;n.webComponent.unmountComponents(),n.gameEngine.unmount();}catch(e){console.error(`Error while main unmount due to : ${e}`);}},w=()=>{d(),document.addEventListener("DOMContentLoaded",()=>{o.isPreMounted&&u(),window.addEventListener("beforeunload",()=>{o.isMounted&&g();});});};w();//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map