{"version":3,"sources":["../src/components/navbar/pages.ts"],"names":["template","NavigationPage","tabId","link","e","key","hideEvent","showEvent","id","showHandler","hideHandler","clone","getServiceRegistry","eventBusManager"],"mappings":"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","file":"chunk-7L2A73GM.js","sourcesContent":["import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { Logger } from \"@utils/Logger\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { NavigationEvents } from \"types/event.types\";\nimport { Nullable } from \"types/generic.types\";\n\nconst template = document.createElement(\"template\");\n\ntemplate.innerHTML = `\n   <link rel=\"stylesheet\" href=\"/style/navbar.css\">\n    <ul class=\"nav-links\" aria-expanded=\"false\">\n        <li>\n        <a href=\"\" id=\"home\" aria-label=\"Home\" class=\"active\"> \n            <img src=\"/assets/Icons/home.svg\" alt=\"\" width=\"24\" height=\"24\"/>\n            <span class=\"desktop\">Home</span>\n        </a>\n        </li>\n        <li>\n        <a href=\"\" id=\"about\" aria-label=\"About\">\n            <img src=\"/assets/Icons/about.svg\" alt=\"\" width=\"32\" height=\"32\"/>\n            <span>About</span>\n        </a>\n        </li>\n        <li>\n        <a href=\"\" id=\"projects\" aria-label=\"Projects\">\n            <img src=\"/assets/Icons/projects.svg\" alt=\"\" width=\"24\" height=\"24\"/>\n            <span>Projects</span>\n        </a>\n        </li>\n        <li>\n        <a href=\"\" id=\"contact\" aria-label=\"Contact\">\n            <img src=\"/assets/Icons/contact.svg\" alt=\"\" width=\"24\" height=\"24\"/>\n            <span>Contact</span>\n        </a>\n        </li>\n    </ul>\n`;\n\ntype TabKeys = \"home\" | \"about\" | \"projects\" | \"contact\";\ntype BusHandler = Record<\n  `${TabKeys}:show` | `${TabKeys}:hide`,\n  (e: NavigationEvents) => void\n>;\n\ninterface State {\n  activeTab: TabKeys;\n}\n\ninterface Components {\n  toggleBtn: Nullable<HTMLElement>;\n  navLinks: Nullable<HTMLElement>;\n  projects: Nullable<HTMLAnchorElement>;\n  about: Nullable<HTMLAnchorElement>;\n  home: Nullable<HTMLAnchorElement>;\n  contact: Nullable<HTMLAnchorElement>;\n}\n\nexport class NavigationPage extends HTMLElement {\n  //State\n  private state: State;\n  private displayEventBus: EventBus<NavigationEvents> | null = null;\n  private components: Components;\n  private root: ShadowRoot;\n  private busHandlers: Nullable<BusHandler> = null;\n  private sections = [\"projects\", \"about\", \"contact\", \"home\"] as const;\n  private links;\n  private logger: Logger;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n\n    this.state = {\n      activeTab: \"home\",\n    };\n\n    this.components = {\n      about: null,\n      navLinks: null,\n      projects: null,\n      contact: null,\n      home: null,\n      toggleBtn: null,\n    };\n\n    this.queryElements();\n    this.links = [\n      this.components.home,\n      this.components.about,\n      this.components.projects,\n      this.components.contact,\n    ];\n\n    this.logger = getServiceRegistry().get(\"Logger\");\n    this.logger.onLoad({ origin: \"Navbar-Pages\" });\n  }\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  /**\n   * @description called when the component is mounted\n   */\n  connectedCallback() {\n    this.bindEvents();\n    this.setupBusListeners();\n  }\n\n  /**\n   * @description called when component is un mounted\n   */\n  disconnectedCallback() {\n    this.unBindEvents();\n    this.disposeBusListeners();\n  }\n\n  queryElements() {\n    this.components.navLinks = this.root.querySelector(\".nav-links\");\n\n    if (this.components.navLinks) {\n      this.components.projects =\n        this.components.navLinks.querySelector(\"#projects\");\n\n      this.components.about = this.components.navLinks.querySelector(\"#about\");\n\n      this.components.contact =\n        this.components.navLinks.querySelector(\"#contact\");\n\n      this.components.home = this.components.navLinks.querySelector(\"#home\");\n    }\n  }\n\n  bindEvents() {\n    this.components.projects?.addEventListener(\"click\", this.onProjectClick);\n    this.components.about?.addEventListener(\"click\", this.onAboutClick);\n    this.components.home?.addEventListener(\"click\", this.onHomeClick);\n    this.components.contact?.addEventListener(\"click\", this.onContactClick);\n  }\n\n  unBindEvents() {\n    this.components.projects?.removeEventListener(\"click\", this.onProjectClick);\n    this.components.about?.removeEventListener(\"click\", this.onAboutClick);\n    this.components.home?.removeEventListener(\"click\", this.onHomeClick);\n    this.components.contact?.removeEventListener(\"click\", this.onContactClick);\n  }\n\n  setActiveTab = (tabId: TabKeys) => {\n    this.links.forEach((link) => {\n      link?.classList.remove(\"active\");\n    });\n\n    this.components[tabId]?.classList.add(\"active\");\n    this.state.activeTab = tabId;\n  };\n\n  toggleSections = <K extends NavigationEvents[\"elementId\"]>(\n    e: Event,\n    key: K\n  ) => {\n    if (this.state.activeTab == key) return;\n    e.preventDefault();\n\n    const hideEvent = {\n      elementId: key,\n      type: `${this.state.activeTab}:hide`,\n    } as NavigationEvents;\n    this.displayEventBus?.emit(hideEvent);\n\n    this.setActiveTab(key);\n\n    const showEvent = {\n      elementId: key,\n      type: `${key}:show`,\n    } as NavigationEvents;\n\n    console.log(`nvbar emits  ${showEvent.type}`);\n    this.displayEventBus?.emit(showEvent);\n  };\n\n  private onProjectClick = (e: Event) => this.toggleSections(e, \"projects\");\n  private onAboutClick = (e: Event) => this.toggleSections(e, \"about\");\n  private onHomeClick = (e: Event) => this.toggleSections(e, \"home\");\n  private onContactClick = (e: Event) => this.toggleSections(e, \"contact\");\n\n  setupBusListeners = () => {\n    if (!this.displayEventBus) return;\n\n    this.sections.forEach((id) => {\n      const showHandler = (e: NavigationEvents) => {\n        this.logger.onMount({ origin: `[${id}]-component` });\n      };\n      const hideHandler = (e: NavigationEvents) => {\n        this.logger.onUnmount({ origin: `[${id}]-component` });\n      };\n\n      this.displayEventBus?.on(`${id}:show`, showHandler);\n      this.displayEventBus?.on(`${id}:hide`, hideHandler);\n\n      if (!this.busHandlers) return;\n\n      this.busHandlers[`${id}:show`] = showHandler;\n      this.busHandlers[`${id}:hide`] = hideHandler;\n    });\n  };\n\n  disposeBusListeners = () => {\n    if (!this.displayEventBus) return;\n\n    this.sections.forEach((id) => {\n      if (!this.busHandlers) return;\n\n      this.displayEventBus?.off(`${id}:show`, this.busHandlers[`${id}:show`]);\n      this.displayEventBus?.off(`${id}:hide`, this.busHandlers[`${id}:hide`]);\n    });\n  };\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.displayEventBus = eventBusManager.displayBus;\n  }\n}\n"]}