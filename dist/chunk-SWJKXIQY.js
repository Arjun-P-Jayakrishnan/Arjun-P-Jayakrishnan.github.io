import {a}from'./chunk-56WY7GLK.js';import {a as a$1}from'./chunk-MI6KVUH7.js';import {LoadingManager}from'three';var G=({scene:n,renderer:p,loaderEventBus:a$2,stateManager:i,storageManager:d})=>{let t=new LoadingManager,g=false,[u,f]=[a({scene:n,loadingManager:t,storageManager:d}),a$1({scene:n,loadingManager:t,renderer:p,storageManager:d})],o={glb:[],fbx:[],hdr:[]},b=()=>{t.onStart=(e,r,s)=>{a$2.emit({type:"load:start",url:e,loaded:r,total:s}),i.loading.setState({loading:{active:true,progress:0}});},t.onProgress=(e,r,s)=>{a$2.emit({type:"load:progress",url:e,loaded:r,total:s}),i.loading.setState({loading:{active:true,progress:r/s}});},t.onLoad=()=>{a$2.emit({type:"load:complete"});},t.onError=e=>{a$2.emit({type:"load:error",url:e});},g=true;},m=e=>{switch(e.type){case "glb":o.glb.push(e);break;case "fbx":o.fbx.push(e);break;case "hdr":o.hdr.push(e);break;}},L=e=>{e.forEach(r=>{m(r);});};return {configure:()=>{b();},load:async e=>{if(!g)throw new Error("Error: Trying to load from loader before configuring it");let r=[];return L(e),r.push(u.load(o.glb)),r.push(f.load(o.hdr)),await Promise.allSettled(r),o.fbx=[],o.glb=[],o.hdr=[],{success:[],error:[]}},dispose:()=>{}}};export{G as a};//# sourceMappingURL=chunk-SWJKXIQY.js.map
//# sourceMappingURL=chunk-SWJKXIQY.js.map