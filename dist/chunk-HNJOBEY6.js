import {a}from'./chunk-INDP64EC.js';import {a as a$1}from'./chunk-X37SJ2CM.js';import {a as a$2}from'./chunk-5PDCNHTA.js';import {b as b$1}from'./chunk-37KH4TOK.js';import {b}from'./chunk-ML4JF6YZ.js';var J=()=>{let{globalState:h,eventBusManager:g}=b(),t=false,o=a({domMountId:"game-engine"}),a$3=a$1(),n=null,i=()=>{if(!n)return;let{height:e,width:d}={height:window.innerHeight,width:window.innerWidth};console.log("resising"),n.camera.aspect=d/e,n.camera.updateProjectionMatrix(),n.renderer.setSize(d,e);},s=e=>{!n||!(e.key.toLowerCase()==="u"&&e.shiftKey)||(e.preventDefault(),g.debugBus.emit({type:"debug:inspector",scene:n.scene}));},p=()=>{i(),window.addEventListener("resize",i),window.addEventListener("keydown",s);},f=()=>{window.removeEventListener("resize",i),window.removeEventListener("keydown",s);},w=()=>{let e=a$2();n={scene:e.get("scene"),camera:e.get("camera"),renderer:e.get("renderer"),orbit:e.get("orbit")};};return {mount:()=>{t||(o.mount(),w(),p(),t=true,b$1.onMount("game-engine"));},unmount:()=>{t&&(b$1.onUnmount("game-engine"),f(),a$3.unmount(),o.unmount(),n=null,t=false);},update:()=>{o.render();},load:async()=>{if(!t)throw new Error("Try to load before mounting");b$1.onLoad("game-engine");try{await a$3.mount(),o.register(a$3.update);}catch(e){console.error(`[Game Manager] Loading failed :${e}`);}}}};export{J as a};//# sourceMappingURL=chunk-HNJOBEY6.js.map
//# sourceMappingURL=chunk-HNJOBEY6.js.map