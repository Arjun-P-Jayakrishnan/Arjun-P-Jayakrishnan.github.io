{"version":3,"sources":["../src/gameplay/rooms/navigation/ground.ts"],"names":["createGround","logger","references","storage","camera","ground","gridMat","createGridMaterial"],"mappings":"oCAsBO,IAAMA,CAAAA,CAAe,CAAC,CAC3B,MAAA,CAAAC,EACA,UAAA,CAAAC,CAAAA,CACA,QAAAC,CAAAA,CACA,MAAA,CAAAC,GACF,CAAA,GAA2B,CACzB,IAAIC,CAAAA,CAAyB,IAAA,CACzBC,EAAkC,IAAA,CAmCtC,OAAO,CACL,KAAA,CAlCY,IAAM,CAOlB,GANAD,CAAAA,CACGF,CAAAA,CACE,WAAW,OAAO,CAAA,CAClB,SAASD,CAAAA,CAAW,SAAS,CAAA,EAC5B,MAAA,CAAO,eAAA,CAAgBA,CAAAA,CAAW,EAAE,CAAA,EAAc,IAAA,CAEpD,CAACG,CAAAA,CAAQ,CACX,QAAQ,KAAA,CACN,CAAA,mCAAA,EAAsCH,CAAAA,CAAW,EAAE,CAAA,CAAA,EAAIA,CAAAA,CAAW,SAAS,CAAA,CAC7E,CAAA,CACA,MACF,CAEAI,CAAAA,CAAUC,EAAmB,CAC3B,MAAA,CAAQH,IACR,QAAA,CAAU,EAAA,CACV,QAAS,CACX,CAAC,EAEDC,CAAAA,CAAO,QAAA,CAAWC,EAAQ,GAAA,CAC1BL,CAAAA,CAAO,OAAA,CAAQ,CAAE,MAAA,CAAQ,mBAAoB,CAAC,EAChD,CAAA,CAaE,OAXa,IAAM,CACnBK,GAAS,MAAA,CAAOF,GAAAA,CAAO,QAAQ,EACjC,CAAA,CAUE,QAAA,CARe,IAAM,CAAC,CAAA,CAStB,WARiB,IAAM,CAAC,EASxB,OAAA,CAPc,IAAM,CAAC,CAQvB,CACF","file":"chunk-KW3N3MPN.js","sourcesContent":["import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { createGridMaterial, GridMaterial } from \"materials/grid/grid-material\";\nimport { Mesh, PerspectiveCamera } from \"three\";\nimport { Nullable } from \"types/generic.types\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface GroundProps {\n  references: ModelIdentifier;\n  storage: GlobalStorageManager;\n  logger: Logger;\n  camera: PerspectiveCamera;\n}\n\nexport interface Ground {\n  mount: () => void;\n  update: () => void;\n  activate: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createGround = ({\n  logger,\n  references,\n  storage,\n  camera,\n}: GroundProps): Ground => {\n  let ground: Nullable<Mesh> = null;\n  let gridMat: Nullable<GridMaterial> = null;\n\n  const mount = () => {\n    ground =\n      (storage\n        .getStorage(\"model\")\n        .retrieve(references.storageId)\n        ?.groups.getObjectByName(references.id) as Mesh) ?? null;\n\n    if (!ground) {\n      console.error(\n        `Cant get ground mesh from the id : ${references.id} ${references.storageId}`\n      );\n      return;\n    }\n\n    gridMat = createGridMaterial({\n      camera: camera,\n      fadeNear: 0.1,\n      fadeFar: 1,\n    });\n\n    ground.material = gridMat.mat;\n    logger.onMount({ origin: \"Navigation-Ground\" });\n  };\n\n  const update = () => {\n    gridMat?.update(camera.position);\n  };\n\n  const activate = () => {};\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    update: update,\n    activate: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n"]}