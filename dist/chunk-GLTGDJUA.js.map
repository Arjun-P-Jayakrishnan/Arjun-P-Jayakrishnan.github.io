{"version":3,"sources":["../src/graphics/gameplay/modules/ground.ts"],"names":["createGround","props","ground","contextManager","getThreeJsContext","gridMat","createGridMaterial"],"mappings":"+EAgBO,IAAMA,CAAgBC,CAAAA,CAAAA,EAA+B,CAC1D,IAAIC,EAAsB,IACtBC,CAAAA,CAAAA,CAAiBC,CAAkB,EAAA,CAEnCC,EAA+B,IA6BnC,CAAA,OAAO,CACL,KAAA,CA5BY,IAAM,CAKlB,GAJAH,CAASC,CAAAA,CAAAA,CACN,YAAY,OAAO,CAAA,CACnB,eAAgBF,CAAAA,CAAAA,CAAM,IAAI,UAAU,CAAA,CAEnC,CAACC,CAAAA,CAAQ,CACX,OAAQ,CAAA,KAAA,CACN,CAAsCD,mCAAAA,EAAAA,CAAAA,CAAM,IAAI,UAAU,CAAA,CAC5D,CACA,CAAA,MACF,CAEAI,CAAUC,CAAAA,GAAAA,CAAmB,CAC3B,MAAA,CAAQH,EAAe,WAAY,CAAA,QAAQ,CAC3C,CAAA,QAAA,CAAU,GACV,OAAS,CAAA,CACX,CAAC,CAAA,CAEDD,EAAO,QAAWG,CAAAA,CAAAA,CAAQ,IAC5B,CAAA,CAUE,OARa,IAAM,CACnBA,CAAS,EAAA,MAAA,CAAOF,EAAe,WAAY,CAAA,QAAQ,CAAE,CAAA,QAAQ,EAC/D,CAOE,CAAA,OAAA,CALc,IAAM,EAMtB,CACF","file":"chunk-GLTGDJUA.js","sourcesContent":["import { getThreeJsContext } from \"graphics/internal/context\";\nimport { createGridMaterial, GridMaterial } from \"graphics/materials/grid/grid-material\";\nimport { Mesh } from \"three\";\n\nexport interface GroundProps {\n  ids: {\n    groundRoot: string;\n  };\n}\n\nexport interface Ground {\n  mount: () => void;\n  update: () => void;\n  unmount: () => void;\n}\n\nexport const createGround = (props: GroundProps): Ground => {\n  let ground: Mesh | null = null;\n  let contextManager = getThreeJsContext();\n\n  let gridMat: GridMaterial | null = null;\n\n  const mount = () => {\n    ground = contextManager\n      .getProperty(\"scene\")\n      .getObjectByName(props.ids.groundRoot) as Mesh;\n\n    if (!ground) {\n      console.error(\n        `Cant get ground mesh from the id : ${props.ids.groundRoot}`\n      );\n      return;\n    }\n\n    gridMat = createGridMaterial({\n      camera: contextManager.getProperty(\"camera\"),\n      fadeNear: 0.1,\n      fadeFar: 1,\n    });\n\n    ground.material = gridMat.mat;\n  };\n\n  const update = () => {\n    gridMat?.update(contextManager.getProperty(\"camera\").position)\n  };\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    update:update,\n    unmount: unmount,\n  };\n};\n"]}