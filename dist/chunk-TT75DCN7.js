import{a as l}from"./chunk-RFHEPYVD.js";import{a as p}from"./chunk-LPRWXLIG.js";import{a as g}from"./chunk-H7XGBN2W.js";import{b as u}from"./chunk-P5V7ULDZ.js";var _=w=>{let{globalState:v,eventBusManager:s}=u(),n=p({camera:{},domMountTag:"game-engine"}),{scene:t,renderer:o,camera:a,controls:y}=n,i=g(w.loaderOptions,{globalState:v,loaderEventBus:s.loadingBus,renderer:o,scene:t}),d=l({player:{ids:{rootMesh:"player"}}}),r=()=>{let e=window.innerWidth,m=window.innerHeight;a.aspect=e/m,a.updateProjectionMatrix(),o.setSize(e,m)},c=e=>{e.key.toLowerCase()==="u"&&e.shiftKey&&(e.preventDefault(),s.debugBus.emit({type:"debug:inspector",scene:t}))},f=()=>{r(),window.addEventListener("resize",r),window.addEventListener("keydown",c)},h=()=>{f(),n.mount(),i.configure()},L=()=>{d.mount({renderer:o,scene:t,camera:a,controls:y}),n.register(d.update)};return{mount:h,unmount:()=>{window.removeEventListener("resize",r),window.removeEventListener("keydown",c)},update:()=>{n.render()},load:async()=>{await i.loadAll(),L()}}};export{_ as a};
//# sourceMappingURL=chunk-TT75DCN7.js.map