{"version":3,"sources":["../../../src/2d/modules/outro.ts"],"names":["initOutro","goTo3D","outro","log","bar","steps","progress","stepDelay","timers","text","i","timer","line","finalTimer","done"],"mappings":"AAUO,SAASA,EAAUC,CAAAA,CAAiC,CACzD,IAAMC,CAAAA,CAAQ,SAAS,cAAA,CAAe,YAAY,CAAA,CAC5CC,CAAAA,CAAM,SAAS,cAAA,CAAe,UAAU,CAAA,CACxCC,CAAAA,CAAM,SAAS,cAAA,CAAe,eAAe,CAAA,CACnD,GAAI,CAACF,CAAAA,EAAS,CAACC,CAAAA,EAAO,CAACC,EAAK,OAAO,IAAM,CAAC,CAAA,CAE1C,IAAMC,CAAAA,CAAQ,CACZ,gCAAA,CACA,2BAAA,CACA,kCACA,uCAAA,CACA,oCACF,CAAA,CAEIC,CAAAA,CAAW,EACTC,CAAAA,CAAY,GAAA,CACZC,CAAAA,CAAmB,GAEzBN,CAAAA,CAAM,SAAA,CAAU,GAAA,CAAI,QAAQ,EAC5B,QAAA,CAAS,IAAA,CAAK,SAAA,CAAU,GAAA,CAAI,SAAS,CAAA,CACrCC,CAAAA,CAAI,SAAA,CAAY,EAAA,CAChBC,EAAI,KAAA,CAAM,KAAA,CAAQ,IAAA,CAElBC,CAAAA,CAAM,QAAQ,CAACI,CAAAA,CAAMC,CAAAA,GAAM,CACzB,IAAMC,CAAAA,CAAQ,MAAA,CAAO,UAAA,CAAW,IAAM,CACpC,IAAMC,CAAAA,CAAO,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CACzCA,CAAAA,CAAK,WAAA,CAAcH,CAAAA,CACnBN,EAAI,WAAA,CAAYS,CAAI,CAAA,CACpBN,CAAAA,EAAY,IAAMD,CAAAA,CAAM,MAAA,CACxBD,CAAAA,CAAI,KAAA,CAAM,MAAQ,CAAA,EAAGE,CAAQ,CAAA,CAAA,EAC/B,CAAA,CAAGI,EAAIH,CAAS,CAAA,CAChBC,CAAAA,CAAO,IAAA,CAAKG,CAAK,EACnB,CAAC,CAAA,CAED,IAAME,EAAa,MAAA,CAAO,UAAA,CAAW,IAAM,CACzC,GAAIZ,CAAAA,CACFC,CAAAA,CAAM,SAAA,CAAU,MAAA,CAAO,QAAQ,CAAA,CAC/BD,CAAAA,EAAO,CAAA,KACF,CACL,IAAMa,CAAAA,CAAO,QAAA,CAAS,aAAA,CAAc,KAAK,EACzCA,CAAAA,CAAK,WAAA,CAAc,cAAA,CACnBX,CAAAA,CAAI,YAAYW,CAAI,EACtB,CACF,CAAA,CAAGT,EAAM,MAAA,CAASE,CAAAA,CAAY,GAAG,CAAA,CACjC,OAAAC,CAAAA,CAAO,IAAA,CAAKK,CAAU,CAAA,CAEf,IAAML,CAAAA,CAAO,OAAA,CAAS,GAAM,YAAA,CAAa,CAAC,CAAC,CACpD","file":"outro.js","sourcesContent":["/**\n * @file outro.ts\n * @description Handles 2D → 3D outro and progress display.\n */\n\n/**\n * Initialize visor outro sequence\n * @param goTo3D Optional callback to transition to 3D\n * @returns A cleanup function to remove timers/listeners\n */\nexport function initOutro(goTo3D?: () => void): () => void {\n  const outro = document.getElementById(\"visorOutro\");\n  const log = document.getElementById(\"outroLog\");\n  const bar = document.getElementById(\"outroProgress\");\n  if (!outro || !log || !bar) return () => {};\n\n  const steps = [\n    \"Initializing system core…\",\n    \"Detaching UI layers…\",\n    \"Calibrating depth buffers…\",\n    \"Synchronizing input controllers…\",\n    \"Preparing spatial transition…\",\n  ];\n\n  let progress = 0;\n  const stepDelay = 900;\n  const timers: number[] = [];\n\n  outro.classList.add(\"active\");\n  document.body.classList.add(\"ui-fade\");\n  log.innerHTML = \"\";\n  bar.style.width = \"0%\";\n\n  steps.forEach((text, i) => {\n    const timer = window.setTimeout(() => {\n      const line = document.createElement(\"div\");\n      line.textContent = text;\n      log.appendChild(line);\n      progress += 100 / steps.length;\n      bar.style.width = `${progress}%`;\n    }, i * stepDelay);\n    timers.push(timer);\n  });\n\n  const finalTimer = window.setTimeout(() => {\n    if (goTo3D) {\n      outro.classList.remove(\"active\");\n      goTo3D();\n    } else {\n      const done = document.createElement(\"div\");\n      done.textContent = \"SYSTEM READY\";\n      log.appendChild(done);\n    }\n  }, steps.length * stepDelay + 600);\n  timers.push(finalTimer);\n\n  return () => timers.forEach((t) => clearTimeout(t));\n}\n"]}