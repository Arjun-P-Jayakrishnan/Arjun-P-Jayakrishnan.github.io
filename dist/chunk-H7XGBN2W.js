import{a as c}from"./chunk-Q2HTSQYH.js";import{a as g}from"./chunk-DOA63GLT.js";import{LoadingManager as v}from"three";var b=(p,u)=>{let{scene:i,renderer:m,loaderEventBus:o,globalState:d}=u,{meshesMetaData:l,hdrMetaData:s}=p,r=new v,a=[],f=()=>{r.onStart=(e,t,n)=>{o.emit({type:"load:start",url:e,loaded:t,total:n}),d.setState({loading:{active:!0,progress:0}})},r.onProgress=(e,t,n)=>{o.emit({type:"load:progress",url:e,loaded:t,total:n}),d.setState({loading:{active:!0,progress:t/n}})},r.onLoad=()=>{o.emit({type:"load:complete"})},r.onError=e=>{o.emit({type:"load:error",url:e})}},L=()=>{l.length>0&&a.push(g({assets:l,scene:i,loadingManager:r,loadingEventBus:o})),s!=null&&a.push(c({asset:s,scene:i,renderer:m,loadingManager:r,loadingEventBus:o}))};return{configure:()=>{f(),L()},loadAll:async()=>{let e=[];return a.forEach(t=>{e.push(t.load())}),await Promise.allSettled(e),{success:[],error:[]}},dispose:()=>{a.forEach(e=>{e.dispose?.()})}}};export{b as a};
//# sourceMappingURL=chunk-H7XGBN2W.js.map