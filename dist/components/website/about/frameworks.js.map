{"version":3,"sources":["../../../../src/components/website/about/frameworks.ts"],"names":["template","AboutPage","index","slides","total","slideWidth","e","clone","eventBusManager","data","fragment","key","value","slide","content","type","title"],"mappings":"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","file":"frameworks.js","sourcesContent":["import { EventBus } from \"@utils/event_management/eventBus\";\nimport { EventBusManager } from \"@utils/event_management/eventBusFactory\";\nimport { DisplayEvents } from \"@utils/event_management/eventType\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/about.css\">\n    <div class=\"about hidden\">\n        <div class=\"carousel\">\n          <div class=\"carousel-track\"></div>\n          <button class=\"prev\">←</button>\n          <button class=\"next\">→</button>\n        </div>\n    </div>\n`;\n\ninterface State {\n  currentIndex: number;\n}\n\ninterface Components {\n  about: HTMLDivElement | null;\n  carousel: HTMLDivElement | null;\n  next: HTMLButtonElement | null;\n  prev: HTMLButtonElement | null;\n  track: HTMLDivElement | null;\n}\n\nexport class AboutPage extends HTMLElement {\n  state: State = {\n    currentIndex: 0,\n  };\n  root: ShadowRoot;\n  displayBus: EventBus<DisplayEvents> | null = null;\n  components: Components;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n\n    this.components = {\n      about: this.root.querySelector(\".about\"),\n      carousel: this.root.querySelector(\".carousel\"),\n      next: this.root.querySelector(\".next\"),\n      prev: this.root.querySelector(\".prev\"),\n      track: this.root.querySelector(\".carousel-track\"),\n    };\n  }\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.displayBus = eventBusManager.displayBus;\n\n    this.displayBus.on(\"about:show\", this.onShow);\n    this.displayBus.on(\"about:hide\", this.onHide);\n  }\n\n  async connectedCallback() {\n    try {\n      const res = await fetch(\"/public/data/about.json\");\n      const data = await res.json();\n\n      this.inflateCarousel(data);\n\n      this.bindEvents();\n    } catch (err) {\n      this.root.innerHTML = `\n        <p>Error in getting data</p>\n      `;\n    }\n  }\n\n  disconnectedCallback() {\n    this.unbindEvents();\n\n    this.displayBus?.off(\"about:show\", this.onShow);\n    this.displayBus?.off(\"about:hide\", this.onHide);\n  }\n\n  private onShow = () => {\n    this.components.about?.classList.toggle(\"hidden\", false);\n  };\n\n  private onHide = () => {\n    this.components.about?.classList.toggle(\"hidden\", true);\n  };\n\n  moveSlide = (index: number) => {\n    if (!this.components.track) return;\n\n    this.state.currentIndex = index;\n    const slides = this.components.track.children;\n    const total = slides.length;\n\n    if (index < 0) this.state.currentIndex = 0;\n\n    if (index >= total) this.state.currentIndex = total - 1;\n\n    console.log(\"state index\", this.state.currentIndex);\n\n    const slideWidth = slides[0].clientWidth ?? 0;\n    console.log(\"move\", this.components.track.style);\n    if (\"transform\" in this.components.track.style) {\n      this.components.track.style.transform = `translateX(-${\n        this.state.currentIndex * slideWidth\n      }px)`;\n      console.log(\"move\");\n    }\n  };\n\n  prevClick = (e: Event) => this.moveSlide(this.state.currentIndex - 1);\n  nextClick = (e: Event) => this.moveSlide(this.state.currentIndex + 1);\n\n  private bindEvents = () => {\n    this.components.prev?.addEventListener(\"click\", this.prevClick);\n    this.components.next?.addEventListener(\"click\", this.nextClick);\n  };\n\n  private unbindEvents = () => {\n    this.components.prev?.removeEventListener(\"click\", this.prevClick);\n    this.components.next?.removeEventListener(\"click\", this.nextClick);\n  };\n\n  private inflateCarousel(data: Record<string, { type: string; data: any }>) {\n    if (!this.components.track) return;\n\n    const fragment = document.createDocumentFragment();\n\n    Object.entries(data).forEach(([key, value]) => {\n      const slide = document.createElement(\"div\");\n      slide.classList.add(\"slide\");\n      const content = this.Content(value.type, value.data);\n      slide.appendChild(content);\n      fragment.appendChild(slide);\n    });\n\n    this.components.track.appendChild(fragment);\n  }\n\n  private Content(type: string, data: any): HTMLElement {\n    const title = document.createElement(\"h3\");\n\n    title.innerText = type;\n\n    return title;\n  }\n}\n"]}