{"version":3,"sources":["../src/components/website/loading.ts"],"sourcesContent":["import { EventBus } from \"@utils/event_management/eventBus\";\nimport { EventBusManager } from \"@utils/event_management/eventBusFactory\";\nimport { LoadingEvents } from \"@utils/event_management/eventType\";\n\nconst template = document.createElement(\"template\");\n\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/loading_modal.css\"/>\n   \n    <div class=\"overlay hidden\" id=\"overlay\">\n      <div class=\"loading-logo\"></div>\n      <div id=\"loading-text\">Loading...</div>\n    </div>\n`;\n\ninterface Tags {\n  overlay: HTMLElement | null;\n}\n\nexport class LoadingModal extends HTMLElement {\n  loadingEventBus?: EventBus<LoadingEvents>;\n  root: ShadowRoot;\n\n  tags: Tags;\n\n  progress: number;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n    this.progress = 0;\n\n    this.tags = {\n      overlay: this.root.getElementById(\"overlay\"),\n    };\n  }\n\n  handleLoading = () => {\n    this.loadingEventBus?.on(\"load:start\", (data) => {\n      this.tags.overlay?.classList.remove(\"hidden\");\n    });\n\n    this.loadingEventBus?.on(\"load:progress\", (data) => {\n      this.progress = data.loaded / data.total;\n    });\n\n    this.loadingEventBus?.on(\"load:complete\", (data) => {\n      this.tags.overlay?.classList.add(\"hidden\");\n    });\n\n    this.loadingEventBus?.on(\"load:error\", (data) => {});\n  };\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.loadingEventBus = eventBusManager.loadingBus;\n    this.handleLoading();\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n}\n"],"mappings":"AAIA,IAAMA,EAAW,SAAS,cAAc,UAAU,EAElDA,EAAS,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAad,IAAMC,EAAN,cAA2B,WAAY,CAQ5C,aAAc,CACZ,MAAM,EAYR,mBAAgB,IAAM,CACpB,KAAK,iBAAiB,GAAG,aAAeC,GAAS,CAC/C,KAAK,KAAK,SAAS,UAAU,OAAO,QAAQ,CAC9C,CAAC,EAED,KAAK,iBAAiB,GAAG,gBAAkBA,GAAS,CAClD,KAAK,SAAWA,EAAK,OAASA,EAAK,KACrC,CAAC,EAED,KAAK,iBAAiB,GAAG,gBAAkBA,GAAS,CAClD,KAAK,KAAK,SAAS,UAAU,IAAI,QAAQ,CAC3C,CAAC,EAED,KAAK,iBAAiB,GAAG,aAAeA,GAAS,CAAC,CAAC,CACrD,EAzBE,KAAK,KAAO,KAAK,aAAa,CAAE,KAAM,MAAO,CAAC,EAE9C,IAAMC,EAAQH,EAAS,QAAQ,UAAU,EAAI,EAC7C,KAAK,KAAK,YAAYG,CAAK,EAC3B,KAAK,SAAW,EAEhB,KAAK,KAAO,CACV,QAAS,KAAK,KAAK,eAAe,SAAS,CAC7C,CACF,CAkBA,IAAI,gBAAgBC,EAAkC,CACpD,KAAK,gBAAkBA,EAAgB,WACvC,KAAK,cAAc,CACrB,CAEA,mBAAoB,CAAC,CAErB,sBAAuB,CAAC,CAC1B","names":["template","LoadingModal","data","clone","eventBusManager"]}