import {a as a$3}from'./chunk-J2GAZC5Y.js';import {a as a$5}from'./chunk-K65PKKA6.js';import {a as a$4}from'./chunk-5QK6BUU3.js';import {c as c$1,b as b$2,a as a$6}from'./chunk-YAYS4WMW.js';import {a as a$1,e,d,c}from'./chunk-ODDPPANY.js';import {a}from'./chunk-QNDPI4IB.js';import {a as a$2}from'./chunk-CAQH3HKN.js';import {b as b$1}from'./chunk-37KH4TOK.js';import {b}from'./chunk-ML4JF6YZ.js';var F=()=>{let{globalState:N,eventBusManager:i}=b(),u=a(),e$1=null,t={navigation:null,about:null,projects:null},m={navigation:c,about:d,projects:e},s=null,a$7=null,_=()=>{try{e$1=a$2({globalState:N,loaderEventBus:i.loadingBus,renderer:u.get("renderer"),scene:u.get("scene")}),e$1?.configure();}catch(o){throw new Error(`[Gameplay] Couldnt create and initailize the loader due to ${o}`)}},E=o=>{switch(o){case "navigation":return t[o]=a$5(a$6),t[o];case "about":return t[o]=a$4(b$2),t[o];case "projects":return t[o]=a$3(c$1),t[o];default:throw new Error(`Unknown Room key ${o}`)}},c$2=async o=>{if(!e$1)return;if(!m[o])throw new Error("[Room Controller] sufficient asset meta data is not given.");if(!t[o]){let n=E(o);await e$1.load({meshesMetaData:m[o].meshes,hdrMetaData:m[o].hdr,animationsMetaData:[]}),n&&(n.mount(),n.isLoaded=true,s=n);}},d$1=async o=>{a$7!==o&&(a$7!=null&&(console.log("deactivating........."),b$1.onInit("deactivating"),t[a$7]!=null&&t[a$7].setDeactive()),await c$2(o),t[o]&&t[o].setActive(),a$7=o);},P=async()=>{b$1.onMount("room-controller"),_(),await e$1?.load({meshesMetaData:[a$1],animationsMetaData:[]}),await c$2("navigation"),await d$1("navigation");},I=o=>{s?.update(o);},K=()=>{e$1?.dispose(),Object.values(t).forEach(o=>{o?.unmount();}),b$1.onUnmount("room-controller");},l=o=>{i.loadingBus.emit({type:"load:start",loaded:0,total:0,url:""}),Promise.allSettled([d$1(o)]).then(()=>{i.loadingBus.emit({type:"load:complete"});});},C=()=>{a$7&&s?.setDeactive();};return {mount:P,switchRoom:{navigation:()=>l("navigation"),about:()=>l("about"),projects:()=>l("projects"),default:()=>C()},update:I,unmount:K}};export{F as a};//# sourceMappingURL=chunk-D64MIHBI.js.map
//# sourceMappingURL=chunk-D64MIHBI.js.map