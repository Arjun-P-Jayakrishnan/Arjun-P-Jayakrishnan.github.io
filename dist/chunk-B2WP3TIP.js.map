{"version":3,"sources":["../src/components/gallery/gallery.ts"],"names":["template","ProjectGallery","data","clone","eventBusManager","_","projects","fragment","cardProps","card"],"mappings":"AAKA,IAAMA,EAAW,QAAA,CAAS,aAAA,CAAc,UAAU,CAAA,CAClDA,EAAS,SAAA,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAA,KA0BRC,CAAAA,CAAN,cAA6B,WAAY,CAO9C,aAAc,CACZ,KAAA,EAAM,CAuBR,IAAA,CAAQ,OAAUC,CAAAA,EAAc,IAAA,CAAK,aAAA,CAAcA,CAAI,EACvD,IAAA,CAAQ,MAAA,CAAUA,CAAAA,EAAc,IAAA,CAAK,cAAcA,CAAI,CAAA,CAvBrD,IAAA,CAAK,IAAA,CAAO,KAAK,YAAA,CAAa,CAAE,IAAA,CAAM,MAAO,CAAC,CAAA,CAC9C,IAAMC,CAAAA,CAAQH,CAAAA,CAAS,QAAQ,SAAA,CAAU,IAAI,CAAA,CAC7C,IAAA,CAAK,KAAK,WAAA,CAAYG,CAAK,CAAA,CAE3B,IAAA,CAAK,QAAU,IAAA,CAAK,IAAA,CAAK,cAAA,CAAe,SAAS,EACjD,IAAA,CAAK,SAAA,CAAY,IAAA,CAAK,IAAA,CAAK,eAAe,oBAAoB,EAChE,CAEA,IAAI,gBAAgBC,CAAAA,CAAkC,CACpD,IAAA,CAAK,YAAA,CAAeA,EAAgB,QACtC,CAEA,aAAA,CAAcC,CAAAA,CAAQ,CACpB,OAAA,CAAQ,GAAA,CAAI,gBAAgB,CAAA,CAC5B,IAAA,CAAK,SAAS,SAAA,CAAU,MAAA,CAAO,QAAQ,EACzC,CAEA,aAAA,CAAcA,CAAAA,CAAQ,CACpB,OAAA,CAAQ,IAAI,gBAAgB,CAAA,CAC5B,IAAA,CAAK,OAAA,EAAS,UAAU,GAAA,CAAI,QAAQ,EACtC,CAKQ,YAAYC,CAAAA,CAA+B,CACjD,GAAI,CAAC,KAAK,SAAA,CAAW,OACrB,IAAMC,CAAAA,CAAW,SAAS,sBAAA,EAAuB,CACjDD,CAAAA,CAAS,OAAA,CAASE,GAAc,CAC9B,IAAMC,EAAoB,QAAA,CAAS,aAAA,CACjC,cACF,CAAA,CACAA,CAAAA,CAAK,OAAA,CAAQD,CAAS,EACtBD,CAAAA,CAAS,WAAA,CAAYE,CAAI,EAC3B,CAAC,CAAA,CAED,IAAA,CAAK,SAAA,CAAU,WAAA,CAAYF,CAAQ,CAAA,CAE9B,IAAA,CAAK,YAAA,GAEV,IAAA,CAAK,aAAa,EAAA,CAAG,qBAAA,CAAuB,IAAA,CAAK,MAAM,EACvD,IAAA,CAAK,YAAA,CAAa,EAAA,CAAG,qBAAA,CAAuB,KAAK,MAAM,CAAA,EACzD,CAEA,IAAI,WAAWL,CAAAA,CAAmB,CAC3BA,EAAK,OAAA,CAGR,IAAA,CAAK,KAAK,SAAA,CAAY;AAAA,aAAA,EACbA,EAAK,OAAO,CAAA;AAAA,QAAA,CAAA,CAHrB,IAAA,CAAK,WAAA,CAAYA,CAAAA,CAAK,IAAI,EAM9B,CAEA,iBAAA,EAAoB,CAAC,CAErB,oBAAA,EAAuB,CAChB,IAAA,CAAK,YAAA,GAEV,IAAA,CAAK,YAAA,CAAa,GAAA,CAAI,qBAAA,CAAuB,IAAA,CAAK,MAAM,CAAA,CACxD,IAAA,CAAK,YAAA,CAAa,GAAA,CAAI,qBAAA,CAAuB,IAAA,CAAK,MAAM,CAAA,EAC1D,CACF","file":"chunk-B2WP3TIP.js","sourcesContent":["import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { ViewEvents } from \"types/event.types\";\nimport { CardMarshall, ProjectCard } from \"./card\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/gallery.css\">\n    <style>\n      .hidden {\n        display:none;\n        opacity: 0;\n        pointer-events: none;\n      }\n    </style>\n    <div class=\"gallery hidden\" id=\"gallery\">\n      <div class=\"gallery--container\" id=\"gallery--container\">\n\n      </div>\n    </div>\n`;\n\nexport type ProjectData =\n  | {\n      list: Array<CardMarshall>;\n      isError: false;\n    }\n  | {\n      isError: true;\n      message: string;\n    };\n\nexport class ProjectGallery extends HTMLElement {\n  root: ShadowRoot;\n  gallery: HTMLElement | null;\n  container: HTMLElement | null;\n\n  viewEventBus: EventBus<ViewEvents> | undefined;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n\n    this.gallery = this.root.getElementById(\"gallery\");\n    this.container = this.root.getElementById(\"gallery--container\");\n  }\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.viewEventBus = eventBusManager.viewBus;\n  }\n\n  showComponent(_: any) {\n    console.log(\"gallery shown \");\n    this.gallery?.classList.remove(\"hidden\");\n  }\n\n  hideComponent(_: any) {\n    console.log(\"gallery hidden\");\n    this.gallery?.classList.add(\"hidden\");\n  }\n\n  private onShow = (data: any) => this.showComponent(data);\n  private onHide = (data: any) => this.hideComponent(data);\n\n  private inflateData(projects: Array<CardMarshall>) {\n    if (!this.container) return;\n    const fragment = document.createDocumentFragment();\n    projects.forEach((cardProps) => {\n      const card: ProjectCard = document.createElement(\n        \"project-card\"\n      ) as ProjectCard;\n      card.setData(cardProps);\n      fragment.appendChild(card);\n    });\n\n    this.container.appendChild(fragment);\n\n    if (!this.viewEventBus) return;\n\n    this.viewEventBus.on(\"project-screen:show\", this.onShow);\n    this.viewEventBus.on(\"project-screen:hide\", this.onHide);\n  }\n\n  set updateData(data: ProjectData) {\n    if (!data.isError) {\n      this.inflateData(data.list);\n    } else {\n      this.root.innerHTML = `\n          <p>${data.message}</p>\n        `;\n    }\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {\n    if (!this.viewEventBus) return;\n\n    this.viewEventBus.off(\"project-screen:show\", this.onShow);\n    this.viewEventBus.off(\"project-screen:hide\", this.onHide);\n  }\n}\n"]}