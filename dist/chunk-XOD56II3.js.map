{"version":3,"sources":["../src/core/components/main.ts"],"names":["createWebComponentManager","mountComponents","LoadingModal","Navbar","ProjectGallery","ProjectCard","SceneInspector","AboutPage","processPipelineDebugger","attachReferences","context","getGlobalContext","loadingModal","err","navbar","gallery","sceneInspector","about","_loadJSON","url","data","selector","element"],"mappings":"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","file":"chunk-XOD56II3.js","sourcesContent":["import { getGlobalContext } from \"managers/globalContext\";\nimport { SceneInspector } from \"../../components/threejs/scene_inspector\";\nimport { AboutPage } from \"../../components/website/about/about\";\nimport { ProjectCard } from \"../../components/website/gallery/card\";\n\nimport { ProjectGallery } from \"../../components/website/gallery/gallery\";\nimport { LoadingModal } from \"../../components/website/loading\";\nimport { Navbar } from \"../../components/website/navbar/header\";\nimport { processPipelineDebugger } from \"debug/debugger\";\nimport { LifeCycle } from \"core/lifecyle\";\n\nexport interface WebComponentManager extends LifeCycle{\n  /**attach global context references */\n  attachReferences: () => void;\n\n  /**load external data */\n  load: () => Promise<void>;\n\n  /**unmounts web components */\n  unmount: () => void;\n}\n\nexport const createWebComponentManager = (): WebComponentManager => {\n \n  const mountComponents = () => {\n    customElements.define(\"loading-modal\", LoadingModal);\n    customElements.define(\"nav-bar\", Navbar);\n    customElements.define(\"project-gallery\", ProjectGallery);\n    customElements.define(\"project-card\", ProjectCard);\n    customElements.define(\"scene-inspector\", SceneInspector);\n    customElements.define(\"about-page\", AboutPage);\n    \n    processPipelineDebugger.onMount('web-components');\n  };\n\n  /**\n   * attach references like global context for the web components\n   */\n  const attachReferences = () => {\n    processPipelineDebugger.onLoad('web-components')\n    /***\n     * get context attached to web components\n     */\n    const context = getGlobalContext();\n\n    try {\n      const loadingModal: LoadingModal =\n        document.querySelector(\"loading-modal\")!;\n      loadingModal.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(`Missing loading modal element :${err}`);\n    }\n\n    try {\n      const navbar: Navbar = document.querySelector(\"nav-bar\")!;\n      navbar.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(`Missing navbar element : ${err}`);\n    }\n\n    try {\n      const gallery: ProjectGallery =\n        document.querySelector(\"project-gallery\")!;\n      gallery.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(`Missing project gallery component : ${err}`);\n    }\n\n    try {\n      const sceneInspector: SceneInspector =\n        document.querySelector(\"scene-inspector\")!;\n      sceneInspector.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(err);\n    }\n\n    try {\n      const about: AboutPage = document.querySelector(\"about-page\")!;\n      about.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const _loadJSON = async (url: string): Promise<any> => {\n    const res = await fetch(url);\n    const data = await res.json();\n\n    return data;\n  };\n\n  const loadData = async () => {\n    const about: AboutPage = document.querySelector(\"about-page\")!;\n    try {\n      const data = await _loadJSON(\"/public/data/about.json\");\n\n      about.updateData = {\n        isError: false,\n        records: data,\n      };\n    } catch (err) {\n      about.updateData = {\n        isError: true,\n        message: `Error getting data ${err}`,\n      };\n      console.error(`Error getting data ${err}`);\n    }\n  };\n\n  /**\n   * unmount web components\n   */\n  const unmountComponents = () => {\n    processPipelineDebugger.onUnmount('web-components')\n    const selectors = [\n      \"loading-modal\",\n      \"nav-bar\",\n      \"project-gallery\",\n      \"project-card\",\n      \"scene-inspector\",\n      \"about-page\",\n      \"background-page\",\n    ];\n\n    selectors.forEach((selector) => {\n      const element = document.querySelector(selector);\n      if (element?.parentElement) {\n        //call disconnected  callback for the removal of event listeners\n        element.parentElement.removeChild(element);\n      } else {\n        console.warn(\n          `Could not unmount ${selector} either already removed or not found`\n        );\n      }\n    });\n  };\n\n  return {\n    mount: mountComponents,\n    attachReferences: attachReferences,\n    load: loadData,\n    unmount: unmountComponents,\n  };\n};\n"]}