import{a as l}from"./chunk-TKIYTNN6.js";import{a as p}from"./chunk-S7M4EPWK.js";import{a as g}from"./chunk-H7XGBN2W.js";import{b as u}from"./chunk-P5V7ULDZ.js";var _=w=>{let{globalState:v,eventBusManager:t}=u(),n=p({camera:{},domMountTag:"game-engine"}),{scene:a,renderer:r,camera:s,controls:L}=n,d=g(w.loaderOptions,{globalState:v,loaderEventBus:t.loadingBus,renderer:r,scene:a}),i=l({player:{ids:{rootMesh:"player"}},ground:{ids:{groundRoot:"ground"}}}),o=()=>{let e=window.innerWidth,m=window.innerHeight;s.aspect=e/m,s.updateProjectionMatrix(),r.setSize(e,m)},c=e=>{e.key.toLowerCase()==="u"&&e.shiftKey&&(e.preventDefault(),t.debugBus.emit({type:"debug:inspector",scene:a}))},y=()=>{o(),window.addEventListener("resize",o),window.addEventListener("keydown",c)},f=()=>{y(),n.mount(),d.configure()},h=()=>{i.mount(),n.register(i.update)};return{mount:f,unmount:()=>{window.removeEventListener("resize",o),window.removeEventListener("keydown",c)},update:()=>{n.render()},load:async()=>{await d.loadAll(),h()}}};export{_ as a};
//# sourceMappingURL=chunk-SB3AIBQD.js.map