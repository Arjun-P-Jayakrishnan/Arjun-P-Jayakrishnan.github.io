{"version":3,"sources":["../src/components/gallery/gallery.ts"],"names":["template","ProjectGallery","data","clone","eventBusManager","_","projects","fragment","cardProps","card"],"mappings":"AAKA,IAAMA,EAAW,QAAS,CAAA,aAAA,CAAc,UAAU,CAAA,CAClDA,EAAS,SAAY,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAA,KAuBRC,CAAN,CAAA,cAA6B,WAAY,CAM9C,aAAc,CACZ,KAAA,EAuBF,CAAA,IAAA,CAAQ,OAAUC,CAAc,EAAA,IAAA,CAAK,aAAcA,CAAAA,CAAI,EACvD,IAAQ,CAAA,MAAA,CAAUA,CAAc,EAAA,IAAA,CAAK,cAAcA,CAAI,CAAA,CAvBrD,IAAK,CAAA,IAAA,CAAO,KAAK,YAAa,CAAA,CAAE,IAAM,CAAA,MAAO,CAAC,CAC9C,CAAA,IAAMC,CAAQH,CAAAA,CAAAA,CAAS,QAAQ,SAAU,CAAA,IAAI,CAC7C,CAAA,IAAA,CAAK,KAAK,WAAYG,CAAAA,CAAK,CAE3B,CAAA,IAAA,CAAK,QAAU,IAAK,CAAA,IAAA,CAAK,cAAe,CAAA,SAAS,EACnD,CAEA,IAAI,eAAgBC,CAAAA,CAAAA,CAAkC,CACpD,IAAK,CAAA,YAAA,CAAeA,CAAgB,CAAA,OAAA,CACpC,QAAQ,GAAI,CAAA,uCAAuC,EACrD,CAEA,cAAcC,CAAQ,CAAA,CACpB,OAAQ,CAAA,GAAA,CAAI,gBAAgB,CAC5B,CAAA,IAAA,CAAK,OAAS,EAAA,SAAA,CAAU,OAAO,QAAQ,EACzC,CAEA,aAAA,CAAcA,EAAQ,CACpB,OAAA,CAAQ,GAAI,CAAA,gBAAgB,EAC5B,IAAK,CAAA,OAAA,EAAS,SAAU,CAAA,GAAA,CAAI,QAAQ,EACtC,CAKQ,WAAYC,CAAAA,CAAAA,CAA+B,CACjD,GAAI,CAAC,IAAK,CAAA,OAAA,CAAS,OACnB,IAAMC,CAAAA,CAAW,QAAS,CAAA,sBAAA,GAC1BD,CAAS,CAAA,OAAA,CAASE,CAAc,EAAA,CAC9B,IAAMC,CAAoB,CAAA,QAAA,CAAS,aACjC,CAAA,cACF,EACAA,CAAK,CAAA,OAAA,CAAQD,CAAS,CAAA,CACtBD,EAAS,WAAYE,CAAAA,CAAI,EAC3B,CAAC,EAED,IAAK,CAAA,OAAA,CAAQ,WAAYF,CAAAA,CAAQ,EAE5B,IAAK,CAAA,YAAA,GAEV,IAAK,CAAA,YAAA,CAAa,GAAG,qBAAuB,CAAA,IAAA,CAAK,MAAM,CAAA,CACvD,KAAK,YAAa,CAAA,EAAA,CAAG,qBAAuB,CAAA,IAAA,CAAK,MAAM,CACzD,EAAA,CAEA,IAAI,UAAA,CAAWL,EAAmB,CAC3BA,CAAAA,CAAK,OAGR,CAAA,IAAA,CAAK,KAAK,SAAY,CAAA;AAAA,aAAA,EACbA,EAAK,OAAO,CAAA;AAAA,QAHrB,CAAA,CAAA,IAAA,CAAK,WAAYA,CAAAA,CAAAA,CAAK,IAAI,EAM9B,CAEA,iBAAA,EAAoB,EAEpB,oBAAuB,EAAA,CAChB,IAAK,CAAA,YAAA,GAEV,IAAK,CAAA,YAAA,CAAa,GAAI,CAAA,qBAAA,CAAuB,IAAK,CAAA,MAAM,CACxD,CAAA,IAAA,CAAK,YAAa,CAAA,GAAA,CAAI,qBAAuB,CAAA,IAAA,CAAK,MAAM,CAAA,EAC1D,CACF","file":"chunk-3UNRKVQH.js","sourcesContent":["import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { ViewEvents } from \"types/eventType\";\nimport { CardMarshall, ProjectCard } from \"./card\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/gallery.css\">\n    <style>\n      .hidden {\n        transform: translateX(-50%) scale(0.95);\n        opacity: 0;\n        pointer-events: none;\n      }\n    </style>\n    <div class=\"gallery hidden\" id=\"gallery\">\n    </div>\n`;\n\nexport type ProjectData =\n  | {\n      list: Array<CardMarshall>;\n      isError: false;\n    }\n  | {\n      isError: true;\n      message: string;\n    };\n\nexport class ProjectGallery extends HTMLElement {\n  root: ShadowRoot;\n  gallery: HTMLElement | null;\n\n  viewEventBus: EventBus<ViewEvents> | undefined;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n\n    this.gallery = this.root.getElementById(\"gallery\");\n  }\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.viewEventBus = eventBusManager.viewBus;\n    console.log(\"event bus attached to project gallery\");\n  }\n\n  showComponent(_: any) {\n    console.log(\"gallery shown \");\n    this.gallery?.classList.remove(\"hidden\");\n  }\n\n  hideComponent(_: any) {\n    console.log(\"gallery hidden\");\n    this.gallery?.classList.add(\"hidden\");\n  }\n\n  private onShow = (data: any) => this.showComponent(data);\n  private onHide = (data: any) => this.hideComponent(data);\n\n  private inflateData(projects: Array<CardMarshall>) {\n    if (!this.gallery) return;\n    const fragment = document.createDocumentFragment();\n    projects.forEach((cardProps) => {\n      const card: ProjectCard = document.createElement(\n        \"project-card\"\n      ) as ProjectCard;\n      card.setData(cardProps);\n      fragment.appendChild(card);\n    });\n\n    this.gallery.appendChild(fragment);\n\n    if (!this.viewEventBus) return;\n\n    this.viewEventBus.on(\"project-screen:show\", this.onShow);\n    this.viewEventBus.on(\"project-screen:hide\", this.onHide);\n  }\n\n  set updateData(data: ProjectData) {\n    if (!data.isError) {\n      this.inflateData(data.list);\n    } else {\n      this.root.innerHTML = `\n          <p>${data.message}</p>\n        `;\n    }\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {\n    if (!this.viewEventBus) return;\n\n    this.viewEventBus.off(\"project-screen:show\", this.onShow);\n    this.viewEventBus.off(\"project-screen:hide\", this.onHide);\n  }\n}\n"]}