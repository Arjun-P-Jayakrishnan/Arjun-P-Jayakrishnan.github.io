import{a as c}from"./chunk-GLOVEEDL.js";import{a as p}from"./chunk-2WMY54B6.js";import{a as d}from"./chunk-QN6TAM35.js";import{a as s}from"./chunk-AEEBPYE3.js";import{a as i}from"./chunk-NAQJJEVU.js";import{b as u}from"./chunk-P5V7ULDZ.js";import{Clock as T,Euler as G}from"three";var j=r=>{let{globalState:P,eventBusManager:D,globalStorage:x}=u(),y=new T,a,e,t={deltaTime:0,mouseRotation:{yaw:0,pitch:0},camera:{rotation:new G(0,0,0,"XYZ")}},o={deltaTime:0,playerData:null},g=()=>{a=i();let n=s();n.mount({mouse:{sensitivity:.01}});let l=d({ids:r.player.ids});l.create();let f=c({camera:a.getProperty("camera")}),m=p(r.ground);m.mount(),e={player:l,camera:f,ground:m,controllers:n}},C=()=>{o.deltaTime=y.getDelta(),isNaN(o.deltaTime)||(t.deltaTime=o.deltaTime)};return{mount:g,update:()=>{C(),t.mouseRotation=e.controllers.getController("mouse")?.getRotation(),o.playerData=e.player.update(t.deltaTime,t.mouseRotation,t.camera),t.camera=e.camera.update(o.playerData.position,t.mouseRotation),e.ground.update()},unmount:()=>{e.player.destroy(),e.controllers.unmount(),e.ground.unmount(),a.unmount(),e=null,a=null}}};export{j as a};
//# sourceMappingURL=chunk-TKIYTNN6.js.map