{"version":3,"sources":["../src/2d/scene2DManager.ts"],"names":["createScene2DManager","cleanupFns","mountScene","timelineCleanup","initTimelineCarousel","techCleanup","initTechCarousel","projectsCleanup","initProjects","hudCleanup","initVisorHUD","fn","removeAllListeners"],"mappings":"gKAyBO,IAAMA,CAAAA,CAAuB,IAAsB,CACxD,IAGMC,CAAAA,CAAgC,GAwEtC,OAAO,CAAE,MAAA,CAtEM,IAAM,CACnB,OAAA,CAAQ,GAAA,CAAI,uBAAuB,EACrC,CAAA,CAoEiB,MAAA,CAlEF,IAAM,CACnB,OAAA,CAAQ,GAAA,CAAI,kBAAkB,CAAA,CAE9B,IAAMC,EAAa,IAAM,CAEvB,IAAMC,CAAAA,CAAkBC,GAAAA,EAAqB,CACzCD,GAAiBF,CAAAA,CAAW,IAAA,CAAKE,CAAe,CAAA,CAEpD,IAAME,CAAAA,CAAcC,GAAiB,CACjCD,CAAAA,EAAaJ,CAAAA,CAAW,IAAA,CAAKI,CAAW,CAAA,CAO5C,IAAME,CAAAA,CAAkBC,CAAAA,EAAa,CACjCD,CAAAA,EAAiBN,CAAAA,CAAW,IAAA,CAAKM,CAAe,EAGpD,IAAME,GAAAA,CAAaC,GAAAA,EAAa,CAC5BD,GAAAA,EAAYR,CAAAA,CAAW,KAAKQ,GAAU,EAO5C,CAAA,CAMEP,IAIJ,CAAA,CA4ByB,OAAA,CA1BT,IAAM,CACpB,OAAA,CAAQ,GAAA,CAAI,mBAAmB,EAIjC,CAAA,CAqBkC,QAAA,CAnBjB,IAAM,CAEvB,CAAA,CAiB4C,UAf1B,IAAM,CACtB,OAAA,CAAQ,GAAA,CAAI,qBAAqB,CAAA,CAGjCD,EAAW,OAAA,CAASU,CAAAA,EAAOA,CAAAA,EAAI,CAAA,CAC/BV,CAAAA,CAAW,OAAS,CAAA,CAGpBW,CAAAA,GACF,CAAA,CAMuD,SAAA,CAJrC,IAAM,CACtB,OAAA,CAAQ,GAAA,CAAI,qBAAqB,EACnC,CAEiE,CACnE","file":"chunk-HXOQS3JX.js","sourcesContent":["// engine/managers/Scene2DManager.ts\n\nimport { initTechCarousel, initTimelineCarousel } from \"./modules/carousels\";\nimport { removeAllListeners } from \"./modules/events\";\nimport { initProjects } from \"./modules/projects\";\nimport { initVisorHUD } from \"./modules/visorHUD\";\n\n/**\n * @interface Scene2DManager\n * @description Lifecycle hooks for the 2D scene: initialization, mounting, updating, unmounting, destroying\n */\nexport interface Scene2DManager {\n  onInit: () => void;\n  onLoad: () => void;\n  onMount: () => void;\n  onUpdate: () => void;\n  onUnmount: () => void;\n  onDestroy: () => void;\n}\n\n/**\n * @function createScene2DManager\n * @returns Scene2DManager\n * @description Manages the 2D scene: intro, carousels, outro, projects, HUD, and event listeners.\n */\nexport const createScene2DManager = (): Scene2DManager => {\n  let introPlayed = false;\n\n  // Cleanup functions for unmounting\n  const cleanupFns: Array<() => void> = [];\n\n  const onInit = () => {\n    console.log(\"[Scene2D] Initialized\");\n  };\n\n  const onLoad = () => {\n    console.log(\"[Scene2D] Loaded\");\n\n    const mountScene = () => {\n      // 1️⃣ Carousels\n      const timelineCleanup = initTimelineCarousel();\n      if (timelineCleanup) cleanupFns.push(timelineCleanup);\n\n      const techCleanup = initTechCarousel();\n      if (techCleanup) cleanupFns.push(techCleanup);\n\n      // 2️⃣ Outro\n      // const outroCleanup = initOutro(); // pass goTo3D if needed\n      // if (outroCleanup) cleanupFns.push(outroCleanup);\n\n      // 3️⃣ Projects\n      const projectsCleanup = initProjects();\n      if (projectsCleanup) cleanupFns.push(projectsCleanup);\n\n      // 4️⃣ HUD\n      const hudCleanup = initVisorHUD();\n      if (hudCleanup) cleanupFns.push(hudCleanup);\n\n      // 5️⃣ Global event listeners (example: window resize)\n      // addListener(window, \"resize\", () => {\n      //   timelineCleanup?.();\n      //   techCleanup?.();\n      // });\n    };\n\n    // Play intro only once\n    if (!introPlayed) {\n      introPlayed = true;\n      // showIntro().then(() => mountScene());\n      mountScene();\n    } else {\n      mountScene();\n    }\n  };\n\n  const onMount = () => {\n    console.log(\"[Scene2D] Mounted\");\n\n    // const outroCleanup = initOutro(); // pass goTo3D if needed\n    // if (outroCleanup) cleanupFns.push(outroCleanup);\n  };\n\n  const onUpdate = () => {\n    // Optional: update animations or HUD if needed\n  };\n\n  const onUnmount = () => {\n    console.log(\"[Scene2D] Unmounted\");\n\n    // Run all cleanup functions\n    cleanupFns.forEach((fn) => fn());\n    cleanupFns.length = 0;\n\n    // Remove global event listeners\n    removeAllListeners();\n  };\n\n  const onDestroy = () => {\n    console.log(\"[Scene2D] Destroyed\");\n  };\n\n  return { onInit, onLoad, onMount, onUpdate, onUnmount, onDestroy };\n};\n"]}