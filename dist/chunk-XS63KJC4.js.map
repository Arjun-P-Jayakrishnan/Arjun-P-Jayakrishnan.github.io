{"version":3,"sources":["../src/components/main.ts"],"sourcesContent":["import { getGlobalContext } from \"@utils/globalContext\";\nimport { SceneInspector } from \"./threejs/scene_inspector\";\nimport { ProjectCard } from \"./website/card\";\nimport { ProjectGallery } from \"./website/gallery\";\nimport { Navbar } from \"./website/header\";\nimport { LoadingModal } from \"./website/loading\";\n\nexport interface WebComponentManager {\n  /**\n   * @description mounts the web components\n   */\n  mountComponents: () => void;\n  /**\n   * @description attach global context references\n   */\n  attachReferences: () => void;\n  /**\n   * @description unmounts web components\n   */\n  unmountComponents: () => void;\n}\n\nexport const createWebComponentManager = (): WebComponentManager => {\n  /**\n   * @description mount components\n   */\n  const mountComponents = () => {\n    customElements.define(\"loading-modal\", LoadingModal);\n    customElements.define(\"nav-bar\", Navbar);\n    customElements.define(\"project-gallery\", ProjectGallery);\n    customElements.define(\"project-card\", ProjectCard);\n    customElements.define(\"scene-inspector\", SceneInspector);\n    console.log(\"custom components mounted\");\n  };\n\n  /**\n   * attach references like global context for the web components\n   */\n  const attachReferences = () => {\n    /***\n     * get context attached to web components\n     */\n    const context = getGlobalContext();\n\n    try {\n      const loadingModal: LoadingModal =\n        document.querySelector(\"loading-modal\")!;\n      loadingModal.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(`Missing loading modal element :${err}`);\n    }\n\n    try {\n      const navbar: Navbar = document.querySelector(\"nav-bar\")!;\n      navbar.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(`Missing navbar element : ${err}`);\n    }\n\n    try {\n      const gallery: ProjectGallery =\n        document.querySelector(\"project-gallery\")!;\n      gallery.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(`Missing project gallery component : ${err}`);\n    }\n\n    try {\n      const sceneInspector: SceneInspector =\n        document.querySelector(\"scene-inspector\")!;\n      sceneInspector.eventBusManager = context.eventBusManager;\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  /**\n   * unmount web components\n   */\n  const unmountComponents = () => {\n    const selectors = [\n      \"loading-modal\",\n      \"nav-bar\",\n      \"project-gallery\",\n      \"project-card\",\n      \"scene-inspector\",\n    ];\n\n    selectors.forEach((selector) => {\n      const element = document.querySelector(selector);\n      if (element?.parentElement) {\n        //call disconnected  callback for the removal of event listeners\n        element.parentElement.removeChild(element);\n      }\n      else{\n        console.warn(`Could not unmount ${selector} either already removed or not found`)\n      }\n    });\n\n    console.log(\"custom components unmounted\");\n  };\n\n  return {\n    mountComponents: mountComponents,\n    attachReferences: attachReferences,\n    unmountComponents: unmountComponents,\n  };\n};\n"],"mappings":"2OAsBO,IAAMA,EAA4B,KAgFhC,CACL,gBA7EsB,IAAM,CAC5B,eAAe,OAAO,gBAAiBC,CAAY,EACnD,eAAe,OAAO,UAAWC,CAAM,EACvC,eAAe,OAAO,kBAAmBC,CAAc,EACvD,eAAe,OAAO,eAAgBC,CAAW,EACjD,eAAe,OAAO,kBAAmBC,CAAc,EACvD,QAAQ,IAAI,2BAA2B,CACzC,EAuEE,iBAlEuB,IAAM,CAI7B,IAAMC,EAAUC,EAAiB,EAEjC,GAAI,CACF,IAAMC,EACJ,SAAS,cAAc,eAAe,EACxCA,EAAa,gBAAkBF,EAAQ,eACzC,OAASG,EAAK,CACZ,QAAQ,MAAM,kCAAkCA,CAAG,EAAE,CACvD,CAEA,GAAI,CACF,IAAMC,EAAiB,SAAS,cAAc,SAAS,EACvDA,EAAO,gBAAkBJ,EAAQ,eACnC,OAASG,EAAK,CACZ,QAAQ,MAAM,4BAA4BA,CAAG,EAAE,CACjD,CAEA,GAAI,CACF,IAAME,EACJ,SAAS,cAAc,iBAAiB,EAC1CA,EAAQ,gBAAkBL,EAAQ,eACpC,OAASG,EAAK,CACZ,QAAQ,MAAM,uCAAuCA,CAAG,EAAE,CAC5D,CAEA,GAAI,CACF,IAAMG,EACJ,SAAS,cAAc,iBAAiB,EAC1CA,EAAe,gBAAkBN,EAAQ,eAC3C,OAASG,EAAK,CACZ,QAAQ,MAAMA,CAAG,CACnB,CACF,EA+BE,kBA1BwB,IAAM,CACZ,CAChB,gBACA,UACA,kBACA,eACA,iBACF,EAEU,QAASI,GAAa,CAC9B,IAAMC,EAAU,SAAS,cAAcD,CAAQ,EAC3CC,GAAS,cAEXA,EAAQ,cAAc,YAAYA,CAAO,EAGzC,QAAQ,KAAK,qBAAqBD,CAAQ,sCAAsC,CAEpF,CAAC,EAED,QAAQ,IAAI,6BAA6B,CAC3C,CAMA","names":["createWebComponentManager","LoadingModal","Navbar","ProjectGallery","ProjectCard","SceneInspector","context","getGlobalContext","loadingModal","err","navbar","gallery","sceneInspector","selector","element"]}