import {Vector3,Spherical,MathUtils}from'three';var r={DISTANCE:3,HEIGHT_OFFSET:2,PITCH_MIN:0,PITH_MAX:Math.PI/2,SMOOTHING:.1},d=new Vector3(0,0,0),a=new Vector3(0,0,0),i=new Vector3(0,0,0);function M(e,n){return {yaw:MathUtils.euclideanModulo(e,Math.PI*2),pitch:MathUtils.clamp(n,r.PITCH_MIN,r.PITH_MAX)}}function C(e){return a.set(0,0,0),a.setFromSpherical(e),a.y+=r.HEIGHT_OFFSET,a}function T(e,n,t){return e.lerp(n,t)}var v=({camera:e})=>{let t={mode:"thirdPerson",rotation:{pitch:Math.PI/2,yaw:0},spherical:new Spherical(r.DISTANCE,Math.PI/2,0)},u=o=>{t.mode=o;},m=()=>{},l=()=>{e.position.set(0,2,2),console.log("nav camera position activation",e.position);},h=o=>{t.rotation.yaw+=o.yaw,t.rotation.pitch+=o.pitch;let c=M(t.rotation.yaw,t.rotation.pitch);t.rotation.yaw=c.yaw,t.rotation.pitch=c.pitch;},y=o=>{t.spherical.theta=t.rotation.yaw,t.spherical.phi=t.rotation.pitch,a.copy(C(t.spherical)),d.copy(o.playerPosition).add(a),e.position.copy(T(e.position,d,r.SMOOTHING)),i.copy(o.playerPosition),i.y+=r.HEIGHT_OFFSET,e.lookAt(i);},P=o=>{e.position.copy(o),e.rotation.set(t.rotation.pitch,t.rotation.yaw,0);};return {setMode:u,update:o=>(h(o.rotationDelta),t.mode==="thirdPerson"?y(o):P(o.playerPosition),{rotation:e.rotation}),mount:m,activate:l,deactivate:()=>{},unmount:()=>{}}};export{v as a};//# sourceMappingURL=chunk-RQ6XBFXE.js.map
//# sourceMappingURL=chunk-RQ6XBFXE.js.map