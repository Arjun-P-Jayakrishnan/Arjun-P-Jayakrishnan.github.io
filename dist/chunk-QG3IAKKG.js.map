{"version":3,"sources":["../src/plugins/input/mouse.ts"],"names":["createMouseController","sensitivityYaw","sensitivityPitch","MOUSE_CONFIG","state","handleMouse","e","sideways","up_down"],"mappings":"oCAoBaA,IAAAA,CAAAA,CAAwB,IAAkB,CACrD,GAAM,CAAE,cAAAC,CAAAA,CAAAA,CAAgB,iBAAAC,CAAiB,CAAA,CAAIC,EAAa,WAEtDC,CAAAA,CAAAA,CAAe,CAKjB,QAAA,CAAU,CACR,KAAO,CAAA,CAAA,CACP,IAAK,CACP,CACF,EAEMC,CAAeC,CAAAA,CAAAA,EAAkB,CACrCF,CAAM,CAAA,QAAA,CAAS,OAASE,CAAE,CAAA,SAAA,CAC1BF,EAAM,QAAS,CAAA,GAAA,EAAOE,EAAE,UAC1B,CAAA,CAuBA,OAAO,CACL,OAtBkB,CAAA,IAAM,CACxB,QAAS,CAAA,gBAAA,CAAiB,YAAaD,CAAW,EACpD,EAqBE,SAnBoB,CAAA,IAAM,CAC1B,QAAS,CAAA,mBAAA,CAAoB,YAAaA,CAAW,EACvD,EAkBE,WAhBkB,CAAA,IAAM,CACxB,IAAME,CAAAA,CAAWH,EAAM,QAAS,CAAA,GAAA,CAC1BI,EAAUJ,CAAM,CAAA,QAAA,CAAS,MAE/B,OAAAA,CAAAA,CAAM,SAAS,KAAQ,CAAA,CAAA,CACvBA,EAAM,QAAS,CAAA,GAAA,CAAM,EAEd,CACL,GAAA,CAAK,CAACH,CAAiBM,CAAAA,CAAAA,CACvB,MAAOL,CAAmBM,CAAAA,CAC5B,CACF,CAMA,CACF","file":"chunk-QG3IAKKG.js","sourcesContent":["import { MOUSE_CONFIG } from \"config/constants\";\nimport { InputPlugin } from \"types/plugin.types\";\n\ninterface MouseInput extends InputPlugin {\n  /**Gets the delta Rotation */\n  getRotation: () => { pitch: number; yaw: number };\n}\n\ninterface State {\n  mouse: {\n    lastX: number;\n    lastY: number;\n  };\n\n  rotation: {\n    pitch: number;\n    yaw: number;\n  };\n}\n\nexport const createMouseController = (): MouseInput => {\n  const { sensitivityYaw, sensitivityPitch } = MOUSE_CONFIG.SENSITIVITY;\n\n  let state: State = {\n    mouse: {\n      lastX: 0,\n      lastY: 0,\n    },\n    rotation: {\n      pitch: 0,\n      yaw: 0,\n    },\n  };\n\n  const handleMouse = (e: MouseEvent) => {\n    state.rotation.pitch += e.movementY;\n    state.rotation.yaw += e.movementX;\n  };\n\n  const mountEvents = () => {\n    document.addEventListener(\"mousemove\", handleMouse);\n  };\n\n  const unmountEvents = () => {\n    document.removeEventListener(\"mousemove\", handleMouse);\n  };\n\n  const getRotation = () => {\n    const sideways = state.rotation.yaw;\n    const up_down = state.rotation.pitch;\n\n    state.rotation.pitch = 0;\n    state.rotation.yaw = 0;\n\n    return {\n      yaw: -sensitivityYaw * sideways,\n      pitch: sensitivityPitch * up_down,\n    };\n  };\n\n  return {\n    onMount: mountEvents,\n    onUnmount: unmountEvents,\n    getRotation: getRotation,\n  };\n};\n\nexport type { MouseInput };\n"]}