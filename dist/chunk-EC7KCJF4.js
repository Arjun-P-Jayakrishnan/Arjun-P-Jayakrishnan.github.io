import {Vector3}from'three';var u={WALK_SPEED:.05,RUN_SPEED:.1,DEADZONE:.001,TILT_ANGLE:.25,TILT_SPEED:8},T=({object:s,keyboard:a,mouse:E})=>{let i=0,y=new Vector3(0,0,-1),D=new Vector3(1,0,0),n=new Vector3,c=new Vector3,e=new Vector3,m=0,b=t=>{let o=t.clone().setY(0).normalize();n.copy(o),c.crossVectors(s.up,n).normalize(),i=Math.atan2(n.x,-n.z),s.rotation.set(0,i,0);},g=()=>{if(!E)return 0;let t=E.getRotation().yaw;return i+=t,s.rotation.set(0,i,0),n.copy(y).applyAxisAngle(new Vector3(0,1,0),i),c.copy(D).applyAxisAngle(new Vector3(0,1,0),i),t},w=t=>{e.set(0,0,0);let o=0;a?.isKeyPressed("w")&&e.add(n),a?.isKeyPressed("s")&&e.sub(n),a?.isKeyPressed("d")&&(e.add(c),o=1),a?.isKeyPressed("a")&&(e.sub(c),o=-1),e.lengthSq()>0&&e.normalize();let l=a?.isKeyPressed("shift")??false,p=e.lengthSq()>0?l?u.RUN_SPEED:u.WALK_SPEED:0;e.lengthSq()>0&&s.position.addScaledVector(e,p);let d=o*u.TILT_ANGLE;return m+=(d-m)*Math.min(t*u.TILT_SPEED,1),s.rotation.x=m,{speed:p,isRunning:l,tilt:m}};return {initialize:b,update:t=>{let o=g(),{speed:l,isRunning:p,tilt:d}=w(t),f=l>u.DEADZONE;return {speed:l,isMoving:f,isRunning:p&&f,yawDelta:o,tilt:d}}}};export{T as a};//# sourceMappingURL=chunk-EC7KCJF4.js.map
//# sourceMappingURL=chunk-EC7KCJF4.js.map