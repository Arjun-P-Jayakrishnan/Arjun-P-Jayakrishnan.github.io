{"version":3,"sources":["../src/components/loading/loading.ts"],"names":["template","LoadingModal","data","clone","getServiceRegistry","eventBusManager"],"mappings":"oCAMA,IAAMA,EAAW,QAAA,CAAS,aAAA,CAAc,UAAU,CAAA,CAElDA,EAAS,SAAA,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAA,CAad,IAAMC,CAAAA,CAAN,cAA2B,WAAY,CAO5C,WAAA,EAAc,CACZ,KAAA,EAAM,CAcR,IAAA,CAAA,aAAA,CAAgB,IAAM,CACpB,KAAK,eAAA,EAAiB,EAAA,CAAG,YAAA,CAAeC,CAAAA,EAAS,CAC/C,IAAA,CAAK,IAAA,CAAK,OAAA,EAAS,SAAA,CAAU,MAAA,CAAO,QAAQ,EAC9C,CAAC,CAAA,CACD,IAAA,CAAK,eAAA,EAAiB,GAAG,eAAA,CAAkBA,CAAAA,EAAS,CAClD,IAAA,CAAK,QAAA,CAAWA,CAAAA,CAAK,MAAA,CAASA,CAAAA,CAAK,MACrC,CAAC,CAAA,CACD,IAAA,CAAK,eAAA,EAAiB,EAAA,CAAG,eAAA,CAAkBA,CAAAA,EAAS,CAClD,IAAA,CAAK,IAAA,CAAK,OAAA,EAAS,SAAA,CAAU,GAAA,CAAI,QAAQ,EAC3C,CAAC,CAAA,CACD,IAAA,CAAK,eAAA,EAAiB,EAAA,CAAG,YAAA,CAAeA,CAAAA,EAAS,CAAC,CAAC,EACrD,CAAA,CAxBE,IAAA,CAAK,IAAA,CAAO,IAAA,CAAK,YAAA,CAAa,CAAE,IAAA,CAAM,MAAO,CAAC,CAAA,CAE9C,IAAMC,CAAAA,CAAQH,CAAAA,CAAS,OAAA,CAAQ,SAAA,CAAU,IAAI,EAC7C,IAAA,CAAK,IAAA,CAAK,WAAA,CAAYG,CAAK,CAAA,CAC3B,IAAA,CAAK,QAAA,CAAW,CAAA,CAEhB,IAAA,CAAK,IAAA,CAAO,CACV,OAAA,CAAS,IAAA,CAAK,IAAA,CAAK,cAAA,CAAe,SAAS,CAC7C,CAAA,CACA,IAAA,CAAK,MAAA,CAASC,CAAAA,EAAmB,CAAE,GAAA,CAAI,QAAQ,CAAA,CAC/C,IAAA,CAAK,MAAA,CAAO,MAAA,CAAO,CAAE,MAAA,CAAQ,eAAgB,CAAC,EAChD,CAeA,IAAI,eAAA,CAAgBC,CAAAA,CAAkC,CACpD,IAAA,CAAK,eAAA,CAAkBA,CAAAA,CAAgB,UAAA,CACvC,IAAA,CAAK,aAAA,GACP,CAEA,iBAAA,EAAoB,CAAC,CAErB,oBAAA,EAAuB,CAAC,CAC1B","file":"chunk-WVIKCH65.js","sourcesContent":["import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { Logger } from \"@utils/Logger\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { LoadingEvents } from \"types/event.types\";\n\nconst template = document.createElement(\"template\");\n///TODO: Re-add hidden in overlay\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/loading_modal.css\"/>\n   \n    <div class=\"overlay\" id=\"overlay\">\n      <div class=\"loading-logo\"></div>\n      <div id=\"loading-text\">Loading...</div>\n    </div>\n`;\n\ninterface Tags {\n  overlay: HTMLElement | null;\n}\n\nexport class LoadingModal extends HTMLElement {\n  loadingEventBus?: EventBus<LoadingEvents>;\n  root: ShadowRoot;\n  tags: Tags;\n  progress: number;\n  logger: Logger;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n    this.progress = 0;\n\n    this.tags = {\n      overlay: this.root.getElementById(\"overlay\"),\n    };\n    this.logger = getServiceRegistry().get(\"Logger\");\n    this.logger.onLoad({ origin: \"Loading Modal\" });\n  }\n\n  handleLoading = () => {\n    this.loadingEventBus?.on(\"load:start\", (data) => {\n      this.tags.overlay?.classList.remove(\"hidden\");\n    });\n    this.loadingEventBus?.on(\"load:progress\", (data) => {\n      this.progress = data.loaded / data.total;\n    });\n    this.loadingEventBus?.on(\"load:complete\", (data) => {\n      this.tags.overlay?.classList.add(\"hidden\");\n    });\n    this.loadingEventBus?.on(\"load:error\", (data) => {});\n  };\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.loadingEventBus = eventBusManager.loadingBus;\n    this.handleLoading();\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n}\n"]}