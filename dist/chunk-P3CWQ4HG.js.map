{"version":3,"sources":["../src/engine/managers/storage/StorageManager.ts"],"names":["createGlobalStorageManager","storage","keys","createStorageForType","key","createStorageUnit","unit"],"mappings":"oCASO,IAAMA,EAA6B,IAA4B,CACpE,IAAIC,CAAAA,CAEC,EAAC,CAEAC,CAAAA,CAAqB,CAAC,OAAA,CAAS,MAAM,CAAA,CAErCC,GAAAA,CAAwBC,CAAAA,EAAoB,CAChD,OAAQA,CAAAA,EACN,KAAK,OAAA,CACHH,EAAQG,CAAG,CAAA,CAAIC,CAAAA,EAAqD,CACpE,MACF,KAAK,MAAA,CACHJ,CAAAA,CAAQG,CAAG,EAAIC,CAAAA,EAAmD,CAClE,KACJ,CACF,CAAA,CAwBA,OAAO,CACL,OAAA,CAvBc,IAAM,CACpBH,EAAK,OAAA,CAA+BE,CAAAA,EAAW,CAC7CD,GAAAA,CAAqBC,CAAG,EAC1B,CAAC,EACH,CAAA,CAoBE,MAlBY,IAAM,CAClB,MAAA,CAAO,MAAA,CAAOH,CAAO,CAAA,CAAE,OAAA,CAASK,CAAAA,EAAS,CACvCA,EAAK,KAAA,GACP,CAAC,EACH,EAeE,UAAA,CAZAF,CAAAA,GAEKH,CAAAA,CAAQG,CAAG,GACdD,GAAAA,CAAqBC,CAAG,EAGnBH,CAAAA,CAAQG,CAAG,EAOpB,CACF","file":"chunk-P3CWQ4HG.js","sourcesContent":["import {\n  JSONStorageUnit,\n  ObjectStorageUnit,\n  StorageKey,\n  StorageMap,\n} from \"types/storage.types\";\nimport { createStorageUnit } from \"./genericStorageUnit\";\nimport { GenericStorageUnit, GlobalStorageManager } from \"./storageTypes\";\n\nexport const createGlobalStorageManager = (): GlobalStorageManager => {\n  let storage: Partial<{\n    [K in StorageKey]: GenericStorageUnit<StorageMap[K]>;\n  }> = {};\n\n  const keys: StorageKey[] = [\"model\", \"json\"];\n\n  const createStorageForType = (key: StorageKey) => {\n    switch (key) {\n      case \"model\":\n        storage[key] = createStorageUnit<Record<string, ObjectStorageUnit>>();\n        break;\n      case \"json\":\n        storage[key] = createStorageUnit<Record<string, JSONStorageUnit>>();\n        break;\n    }\n  };\n\n  const inflate = () => {\n    keys.forEach(<K extends StorageKey>(key: K) => {\n      createStorageForType(key);\n    });\n  };\n\n  const clear = () => {\n    Object.values(storage).forEach((unit) => {\n      unit.clear();\n    });\n  };\n\n  const getStorage = <K extends StorageKey>(\n    key: K\n  ): GenericStorageUnit<StorageMap[K]> => {\n    if (!storage[key]) {\n      createStorageForType(key);\n    }\n\n    return storage[key]!;\n  };\n\n  return {\n    inflate: inflate,\n    clear: clear,\n    getStorage: getStorage,\n  };\n};\n"]}