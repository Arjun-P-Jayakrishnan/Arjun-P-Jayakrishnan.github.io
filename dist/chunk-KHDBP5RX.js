import {a}from'./chunk-Y3P3ES6H.js';import {a as a$3}from'./chunk-CRGVJHEO.js';import {c}from'./chunk-TO4VY5TN.js';import {a as a$1}from'./chunk-HDSUTNB3.js';import {a as a$2}from'./chunk-JHTWF4VD.js';import {b}from'./chunk-Q74ELE7M.js';var S=w=>{let{globalState:y,eventBusManager:d}=b(),o={isMounted:false},a$4=a({camera:{},domMountTag:"game-engine"}),i=a$1(c),e=null,n=null,s=()=>{if(!e)return;let t=window.innerWidth,l=window.innerHeight;e.camera.aspect=t/l,e.camera.updateProjectionMatrix(),e.renderer.setSize(t,l);},u=t=>{e&&t.key.toLowerCase()==="u"&&t.shiftKey&&(t.preventDefault(),d.debugBus.emit({type:"debug:inspector",scene:e.scene}));},h=()=>{s(),window.addEventListener("resize",s),window.addEventListener("keydown",u);},v=()=>{e={scene:a$2().getProperty("scene"),camera:a$2().getProperty("camera"),renderer:a$2().getProperty("renderer"),orbit:a$2().getProperty("orbit")},n=a$3(w.loaderOptions,{globalState:y,loaderEventBus:d.loadingBus,renderer:e.renderer,scene:e.scene});},M=()=>{o.isMounted||(a$4.mount(),v(),h(),n.configure(),o.isMounted=true);},L=()=>{a$4.render();},E=()=>{o.isMounted&&(window.removeEventListener("resize",s),window.removeEventListener("keydown",u),i&&i.unmount(),a$4.dispose(),n&&(n.dispose(),n=null),e=null,o.isMounted=false);},b$1=()=>{i.mount(),a$4.register(i.update);};return {mount:M,unmount:E,update:L,load:async()=>{try{if(!o.isMounted)throw new Error("Try to load before mounting");await n.loadAll(),b$1();}catch(t){console.error(`Error while loading :${t}`);}}}};export{S as a};//# sourceMappingURL=chunk-KHDBP5RX.js.map
//# sourceMappingURL=chunk-KHDBP5RX.js.map