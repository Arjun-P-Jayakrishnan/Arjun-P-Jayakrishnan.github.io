{"version":3,"sources":["../src/components/website/gallery/gallery.ts"],"names":["template","ProjectGallery","data","clone","eventBusManager","_","res","projects","fragment","cardProps","card"],"mappings":"AAMA,IAAMA,EAAW,QAAS,CAAA,aAAA,CAAc,UAAU,CAAA,CAClDA,EAAS,SAAY,CAAA;AAAA;AAAA;AAAA;AAAA,CAMd,CAAA,IAAMC,EAAN,cAA6B,WAAY,CAM9C,WAAc,EAAA,CACZ,KAAM,EAAA,CAqBR,IAAQ,CAAA,MAAA,CAAUC,GAAc,IAAK,CAAA,aAAA,CAAcA,CAAI,CAAA,CACvD,IAAQ,CAAA,MAAA,CAAUA,GAAc,IAAK,CAAA,aAAA,CAAcA,CAAI,CAAA,CArBrD,IAAK,CAAA,IAAA,CAAO,KAAK,YAAa,CAAA,CAAE,IAAM,CAAA,MAAO,CAAC,CAAA,CAC9C,IAAMC,CAAQH,CAAAA,CAAAA,CAAS,OAAQ,CAAA,SAAA,CAAU,IAAI,CAAA,CAC7C,KAAK,IAAK,CAAA,WAAA,CAAYG,CAAK,CAAA,CAE3B,IAAK,CAAA,OAAA,CAAU,KAAK,IAAK,CAAA,cAAA,CAAe,SAAS,EACnD,CAEA,IAAI,gBAAgBC,CAAkC,CAAA,CACpD,KAAK,eAAkBA,CAAAA,CAAAA,CAAgB,WACzC,CAEA,aAAA,CAAcC,CAAQ,CAAA,CACpB,OAAQ,CAAA,GAAA,CAAI,gBAAgB,CAC5B,CAAA,IAAA,CAAK,OAAS,EAAA,SAAA,CAAU,MAAO,CAAA,QAAQ,EACzC,CAEA,aAAA,CAAcA,CAAQ,CAAA,CACpB,IAAK,CAAA,OAAA,EAAS,UAAU,GAAI,CAAA,QAAQ,EACtC,CAKA,MAAM,iBAAA,EAAoB,CACxB,GAAI,CAAC,IAAK,CAAA,OAAA,CAAS,OAEnB,IAAMC,EAAM,MAAM,KAAA,CAAM,4BAA4B,CAAA,CACpD,GAAI,CAACA,EAAI,EAAI,CAAA,CACX,IAAK,CAAA,OAAA,CAAQ,SAAY,CAAA;AAAA;AAAA,MAAA,CAAA,CAGzB,MACF,CAEA,IAAMC,CAAAA,CAAW,MAAMD,CAAI,CAAA,IAAA,EAErBE,CAAAA,CAAAA,CAAW,SAAS,sBAAuB,EAAA,CAEhDD,CAAS,CAAA,QAAA,CAAoC,QAASE,CAAc,EAAA,CACnE,IAAMC,CAAAA,CAAoB,QAAS,CAAA,aAAA,CACjC,cACF,CAAA,CACAA,EAAK,OAAQD,CAAAA,CAAS,CACtBD,CAAAA,CAAAA,CAAS,YAAYE,CAAI,EAC3B,CAAC,CAAA,CAED,KAAK,OAAQ,CAAA,WAAA,CAAYF,CAAQ,CAAA,CAE5B,IAAK,CAAA,eAAA,GAEV,IAAK,CAAA,eAAA,CAAgB,GAAG,cAAgB,CAAA,IAAA,CAAK,MAAM,CAAA,CACnD,KAAK,eAAgB,CAAA,EAAA,CAAG,cAAgB,CAAA,IAAA,CAAK,MAAM,CACrD,EAAA,CAEA,oBAAuB,EAAA,CAChB,KAAK,eAEV,GAAA,IAAA,CAAK,eAAgB,CAAA,GAAA,CAAI,eAAgB,IAAK,CAAA,MAAM,CACpD,CAAA,IAAA,CAAK,gBAAgB,GAAI,CAAA,cAAA,CAAgB,IAAK,CAAA,MAAM,GACtD,CACF","file":"chunk-27URZVCA.js","sourcesContent":["import { EventBus } from \"@utils/event_management/eventBus\";\nimport { EventBusManager } from \"@utils/event_management/eventBusFactory\";\nimport { DisplayEvents } from \"@utils/event_management/eventType\";\nimport { CardMarshall, ProjectCard } from \"./card\";\n\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/gallery.css\">\n    <div class=\"gallery hidden\" id=\"gallery\">\n    </div>\n`;\n\nexport class ProjectGallery extends HTMLElement {\n  root: ShadowRoot;\n  gallery: HTMLElement | null;\n\n  displayEventBus: EventBus<DisplayEvents> | undefined;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n\n    this.gallery = this.root.getElementById(\"gallery\");\n  }\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.displayEventBus = eventBusManager.displayBus;\n  }\n\n  showComponent(_: any) {\n    console.log(\"gallery shown \");\n    this.gallery?.classList.remove(\"hidden\");\n  }\n\n  hideComponent(_: any) {\n    this.gallery?.classList.add(\"hidden\");\n  }\n\n  private onShow = (data: any) => this.showComponent(data);\n  private onHide = (data: any) => this.hideComponent(data);\n\n  async connectedCallback() {\n    if (!this.gallery) return;\n\n    const res = await fetch(\"/public/data/projects.json\");\n    if (!res.ok) {\n      this.gallery.innerHTML = `\n        <p> Failed to load projects</p>\n      `;\n      return;\n    }\n\n    const projects = await res.json();\n\n    const fragment = document.createDocumentFragment();\n\n    (projects[\"projects\"] as Array<CardMarshall>).forEach((cardProps) => {\n      const card: ProjectCard = document.createElement(\n        \"project-card\"\n      ) as ProjectCard;\n      card.setData(cardProps);\n      fragment.appendChild(card);\n    });\n\n    this.gallery.appendChild(fragment);\n\n    if (!this.displayEventBus) return;\n\n    this.displayEventBus.on(\"project:show\", this.onShow);\n    this.displayEventBus.on(\"project:hide\", this.onHide);\n  }\n\n  disconnectedCallback() {\n    if (!this.displayEventBus) return;\n\n    this.displayEventBus.off(\"project:show\", this.onShow);\n    this.displayEventBus.off(\"project:hide\", this.onHide);\n  }\n}\n"]}