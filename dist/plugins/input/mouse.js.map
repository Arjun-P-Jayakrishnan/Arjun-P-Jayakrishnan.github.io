{"version":3,"sources":["../../../src/config/constants.ts","../../../src/plugins/input/mouse.ts"],"names":["MOUSE_CONFIG","createMouseController","sensitivityPitch","state","handleMouse","e","sideways","up_down","sensitivityYaw"],"mappings":"AAYA,IAAMA,CAAe,CAAA,CACnB,WAAa,CAAA,CAAyB,gBAAkB,CAAA,IAAM,CAChE,CAAA,CCMaC,IAAAA,CAAAA,CAAwB,IAAkB,CACrD,GAAM,CAAkB,gBAAA,CAAAC,CAAiB,CAAA,CAAIF,CAAa,CAAA,WAAA,CAEtDG,CAAe,CAAA,CAKjB,QAAA,CAAU,CACR,KAAA,CAAO,CACP,CAAA,GAAA,CAAK,CACP,CACF,CAEMC,CAAAA,CAAAA,CAAeC,CAAkB,EAAA,CACrCF,CAAM,CAAA,QAAA,CAAS,OAASE,CAAE,CAAA,SAAA,CAC1BF,CAAM,CAAA,QAAA,CAAS,GAAOE,EAAAA,CAAAA,CAAE,UAC1B,CAAA,CAuBA,OAAO,CACL,OAtBkB,CAAA,IAAM,CACxB,QAAA,CAAS,gBAAiB,CAAA,WAAA,CAAaD,CAAW,EACpD,CAqBE,CAAA,SAAA,CAnBoB,IAAM,CAC1B,QAAS,CAAA,mBAAA,CAAoB,WAAaA,CAAAA,CAAW,EACvD,CAAA,CAkBE,WAhBkB,CAAA,IAAM,CACxB,IAAME,CAAAA,CAAWH,CAAM,CAAA,QAAA,CAAS,GAC1BI,CAAAA,CAAAA,CAAUJ,CAAM,CAAA,QAAA,CAAS,KAE/B,CAAA,OAAAA,CAAM,CAAA,QAAA,CAAS,KAAQ,CAAA,CAAA,CACvBA,CAAM,CAAA,QAAA,CAAS,GAAM,CAAA,CAAA,CAEd,CACL,GAAA,CAAK,KAACK,CAAiBF,CACvB,CAAA,KAAA,CAAOJ,CAAmBK,CAAAA,CAC5B,CACF,CAMA,CACF","file":"mouse.js","sourcesContent":["const MAX_TASKS_PER_FRAME = 5;\nconst MAX_FRAME_BUCKET_TIME = 20; //ms\n\nconst DEFAULT_CAMERA_OPTIONS = {\n  fov: 75,\n  aspectRatio: window.innerWidth / window.innerHeight,\n  near: 0.1,\n  far: 1000,\n} as const;\n\nconst CANVAS_ID = \"game-engine\";\n\nconst MOUSE_CONFIG = {\n  SENSITIVITY: { sensitivityYaw: 0.003, sensitivityPitch: 0.001 },\n};\n\nexport {\n  CANVAS_ID,\n  DEFAULT_CAMERA_OPTIONS,\n  MAX_FRAME_BUCKET_TIME,\n  MAX_TASKS_PER_FRAME,\n  MOUSE_CONFIG,\n};\n","import { MOUSE_CONFIG } from \"config/constants\";\nimport { InputPlugin } from \"types/plugin.types\";\n\ninterface MouseInput extends InputPlugin {\n  /**Gets the delta Rotation */\n  getRotation: () => { pitch: number; yaw: number };\n}\n\ninterface State {\n  mouse: {\n    lastX: number;\n    lastY: number;\n  };\n\n  rotation: {\n    pitch: number;\n    yaw: number;\n  };\n}\n\nexport const createMouseController = (): MouseInput => {\n  const { sensitivityYaw, sensitivityPitch } = MOUSE_CONFIG.SENSITIVITY;\n\n  let state: State = {\n    mouse: {\n      lastX: 0,\n      lastY: 0,\n    },\n    rotation: {\n      pitch: 0,\n      yaw: 0,\n    },\n  };\n\n  const handleMouse = (e: MouseEvent) => {\n    state.rotation.pitch += e.movementY;\n    state.rotation.yaw += e.movementX;\n  };\n\n  const mountEvents = () => {\n    document.addEventListener(\"mousemove\", handleMouse);\n  };\n\n  const unmountEvents = () => {\n    document.removeEventListener(\"mousemove\", handleMouse);\n  };\n\n  const getRotation = () => {\n    const sideways = state.rotation.yaw;\n    const up_down = state.rotation.pitch;\n\n    state.rotation.pitch = 0;\n    state.rotation.yaw = 0;\n\n    return {\n      yaw: -sensitivityYaw * sideways,\n      pitch: sensitivityPitch * up_down,\n    };\n  };\n\n  return {\n    onMount: mountEvents,\n    onUnmount: unmountEvents,\n    getRotation: getRotation,\n  };\n};\n\nexport type { MouseInput };\n"]}