{"version":3,"sources":["../src/components/website/loading.ts"],"sourcesContent":["import { EventBus } from \"@utils/event_management/eventBus\";\r\nimport { EventBusManager } from \"@utils/event_management/eventBusFactory\";\r\nimport { LoadingEvents } from \"@utils/event_management/eventType\";\r\n\r\nconst template = document.createElement(\"template\");\r\n\r\ntemplate.innerHTML = `\r\n    <link rel=\"stylesheet\" href=\"/style/loading_modal.css\"/>\r\n   \r\n    <div class=\"overlay hidden\" id=\"overlay\">\r\n      <div class=\"loading-logo\"></div>\r\n      <div id=\"loading-text\">Loading...</div>\r\n    </div>\r\n`;\r\n\r\ninterface Tags {\r\n  overlay: HTMLElement | null;\r\n}\r\n\r\nexport class LoadingModal extends HTMLElement {\r\n  loadingEventBus?: EventBus<LoadingEvents>;\r\n  root: ShadowRoot;\r\n\r\n  tags: Tags;\r\n\r\n  progress: number;\r\n\r\n  constructor() {\r\n    super();\r\n    this.root = this.attachShadow({ mode: \"open\" });\r\n\r\n    const clone = template.content.cloneNode(true);\r\n    this.root.appendChild(clone);\r\n    this.progress = 0;\r\n\r\n    this.tags = {\r\n      overlay: this.root.getElementById(\"overlay\"),\r\n    };\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.loadingEventBus?.on(\"load:start\", (data) => {\r\n      this.tags.overlay?.classList.remove(\"hidden\");\r\n    });\r\n\r\n    this.loadingEventBus?.on(\"load:progress\", (data) => {\r\n      this.progress = data.loaded / data.total;\r\n    });\r\n\r\n    this.loadingEventBus?.on(\"load:complete\", (data) => {\r\n      this.tags.overlay?.classList.add(\"hidden\");\r\n    });\r\n\r\n    this.loadingEventBus?.on(\"load:error\", (data) => {});\r\n  };\r\n\r\n  set eventBusManager(eventBusManager: EventBusManager) {\r\n    this.loadingEventBus = eventBusManager.loadingBus;\r\n    this.handleLoading();\r\n  }\r\n\r\n  connectedCallback() {}\r\n\r\n  disconnectedCallback() {}\r\n}\r\n"],"mappings":";AAIA,IAAM,WAAW,SAAS,cAAc,UAAU;AAElD,SAAS,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAad,IAAM,eAAN,cAA2B,YAAY;AAAA,EAQ5C,cAAc;AACZ,UAAM;AAYR,yBAAgB,MAAM;AACpB,WAAK,iBAAiB,GAAG,cAAc,CAAC,SAAS;AAC/C,aAAK,KAAK,SAAS,UAAU,OAAO,QAAQ;AAAA,MAC9C,CAAC;AAED,WAAK,iBAAiB,GAAG,iBAAiB,CAAC,SAAS;AAClD,aAAK,WAAW,KAAK,SAAS,KAAK;AAAA,MACrC,CAAC;AAED,WAAK,iBAAiB,GAAG,iBAAiB,CAAC,SAAS;AAClD,aAAK,KAAK,SAAS,UAAU,IAAI,QAAQ;AAAA,MAC3C,CAAC;AAED,WAAK,iBAAiB,GAAG,cAAc,CAAC,SAAS;AAAA,MAAC,CAAC;AAAA,IACrD;AAzBE,SAAK,OAAO,KAAK,aAAa,EAAE,MAAM,OAAO,CAAC;AAE9C,UAAM,QAAQ,SAAS,QAAQ,UAAU,IAAI;AAC7C,SAAK,KAAK,YAAY,KAAK;AAC3B,SAAK,WAAW;AAEhB,SAAK,OAAO;AAAA,MACV,SAAS,KAAK,KAAK,eAAe,SAAS;AAAA,IAC7C;AAAA,EACF;AAAA,EAkBA,IAAI,gBAAgB,iBAAkC;AACpD,SAAK,kBAAkB,gBAAgB;AACvC,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,oBAAoB;AAAA,EAAC;AAAA,EAErB,uBAAuB;AAAA,EAAC;AAC1B;","names":[]}