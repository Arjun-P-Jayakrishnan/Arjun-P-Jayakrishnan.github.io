{"version":3,"sources":["../../../src/utils/dsl.ts","../../../src/components/about/background.ts","../../../src/components/about/experience.ts","../../../src/components/about/frameworks.ts","../../../src/components/about/resume.ts","../../../src/components/about/about.ts","../../../src/components/gallery/card.ts","../../../src/components/gallery/gallery.ts","../../../src/engine/core/ServiceRegistry.ts","../../../src/components/loading/loading.ts","../../../src/components/navbar/navbar.ts","../../../src/components/threejs/scene_inspector.ts","../../../src/engine/managers/DOMManger.ts","../../../src/config/constants.ts","../../../src/config/asset_manifest.ts","../../../src/config/rooms.ts","../../../src/plugins/loader/fbx_loader.ts","../../../src/plugins/loader/glb_loader.ts","../../../src/plugins/loader/hdr_loader.ts","../../../src/engine/core/LoadingManager.ts","../../../src/gameplay/rooms/about/camera.ts","../../../src/gameplay/rooms/about/ground.ts","../../../src/gameplay/rooms/about/lights.ts","../../../src/gameplay/rooms/about/player.ts","../../../src/gameplay/rooms/about/room.ts","../../../src/gameplay/rooms/navigation/camera.ts","../../../src/materials/grid/grid-material.ts","../../../src/materials/grid/grid-fragment.ts","../../../src/materials/grid/grid-vertex.ts","../../../src/gameplay/rooms/navigation/ground.ts","../../../src/gameplay/modules/animation.ts","../../../src/gameplay/modules/fsm/player.ts","../../../src/gameplay/rooms/navigation/player.ts","../../../src/gameplay/rooms/navigation/room.ts","../../../src/gameplay/rooms/projects/camera.ts","../../../src/gameplay/rooms/projects/ground.ts","../../../src/gameplay/rooms/projects/lights.ts","../../../src/gameplay/rooms/projects/player.ts","../../../src/gameplay/rooms/projects/room.ts","../../../src/gameplay/RoomManager.ts","../../../src/gameplay/GameplayManager.ts","../../../src/engine/managers/ThreeJsManager.ts","../../../src/engine/managers/RenderManager.ts","../../../src/engine/core/Engine.ts"],"names":["queueStep","fn","args","flattenTask","tasks","result","task","template","BackgroundPage","clone","data","summary","education","li","h3","ul","item","tag","skills","fragment","skill","ExperiencePage","button","index","collapsibleElement","e","header","title","duration","details","responsibilities","documentFragment","responsibility","_li","entry","dataList","FrameworkPage","web","mobile","languages","cmdLine","name","className","url","img","type","fragmentWeb","icon","fragmentMobile","fragmentLanguages","ResumePage","TabNames","AboutPage","background","experience","resume","frameworks","buttons","_","id","el","eventBusManager","offset","prevIndex","length","activeSlide","skillItem","experienceData","resumeData","frameworkData","PROJECT_CARD_CONSTANTS","ProjectCard","oldValue","newValue","props","description","image","_title","tags","children","span","github_link","ProjectGallery","projects","cardProps","card","createServiceRegistry","services","service","serviceRegistry","getServiceRegistry","LoadingModal","Navbar","nextState","tabId","link","key","hideEvent","showEvent","showHandler","hideHandler","SceneInspector","resizer","panel","newWidth","scene","objects","materialsMap","traverse","object","node","child","mat","treeNode","label","treeRoot","nodes","isCollapsed","nodeList","nodeRoot","_loadJSON","loadAboutData","about","err","loadProjectData","projectGallery","createDomManager","flags","serviceRegsitry","lifecycleScheduler","logger","loadingModal","navbar","sceneInspector","selector","element","DEFAULT_CAMERA_OPTIONS","CANVAS_ID","FILE_CONSTANTS","PLAYER_ASSET","NAVIGATION_ROOM_ASSETS","ABOUT_ROOM_ASSETS","PROJECTS_ROOM_ASSETS","NAVIGATION_ROOM_OPTIONS","ABOUT_ROOM_OPTIONS","PROJECTS_ROOM_OPTIONS","createFBXLoader","loadingManager","storageManager","fbxLoader","FBXLoader","_loadMesh","metaData","model","assets","promises","asset","createGLBLoader","gltfLoader","GLTFLoader","dracoLoader","DRACOLoader","createHDRLoader","renderer","pmremGenerator","PMREMGenerator","rgbeLoader","RGBELoader","_loadHDRTexture","reject","resolve","texData","envMap","load","createLoader","loaderEventBus","stateManager","manager","LoadingManager","isConfigured","glbLoader","hdrLoader","assetQueue","_configureLoadingManager","itemsLoaded","itemsTotal","pushToRespectiveLoaderQueue","_configurePlugins","createCameraManager","camera","target","Vector3","createGround","reference","storage","ground","createLighting","dirLight","ambientLight","DirectionalLight","AmbientLight","PCFShadowMap","createPlayer","animations","castShadow","player","playerRoot","AnimationMixer","createAboutRoom","context","orbit","components","group","deltaTime","TPV_CONFIG","tempPosition","tempOffset","tempLookTarget","clampRotation","yaw","pitch","MathUtils","computeThirdPersonOffset","spherical","lerpVector","from","to","alpha","isThirdPerson","state","Spherical","setCamera","mode","mount","activate","updateRotation","delta","clamped","updateThirdPerson","info","updateFirstPerson","playerPos","GridFragment","GridVertex","createGridMaterial","ShaderMaterial","cameraPos","references","gridMat","createAnimationController","mixer","actions","crossFadeDuration","currentAnimation","currentAction","animationName","blendDuration","nextAction","Idle","Walk","Run","createFSMController","inputs","animationController","keyboard","shiftPressed","idle","walk","run","currentState","update","playerFSM","isMoving","isShiftPressed","_getState","newState","changeState","PLAYER_CONSTANTS","InputManager","controllers","tempData","fsmController","updateMouse","mouse","updateKeyboard","FRICTION","VELOCITY_DEADZONE","inputDirection","decay","updateControllers","Euler","createNavigationRoom","contextManager","room","isMounted","points","camPath","CatmullRomCurve3","t","isComplete","position","lookAt","groups","excludeShadow","mixers","createProjectRoom","createRoomController","loader","rooms","roomAssets","activeRoom","activeRoomKey","initializeLoader","instantiateRoom","loadRoom","loadItems","switchRoom","unmount","transitionRooms","deactivateRoom","createGameplayManager","input","clock","Clock","roomController","bind","updateDeltaTime","createThreeJsInstance","fov","aspectRatio","near","far","Scene","PerspectiveCamera","WebGLRenderer","animationCallback","animationFrameId","mountRendererToDom","elementId","container","OrbitControls","exposeToContext","callback","loop","handleResize","height","width","handleDebug","debugEventBus","createRenderManager","threeJsManager","threeJsContext","gameplay","_handleResize","_handleDebug","addEventListeners","removeEventListeners","createEngine","domManager","renderManager","onInit","onLoad","onMount","onUpdate","onUnmount"],"mappings":"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","file":"Engine.js","sourcesContent":["//Domain Specific Language\n\nimport { Task } from \"types/lifecycle.types\";\n\ntype Step<F extends (...args: any[]) => any> = [F, ...Parameters<F>];\n\nfunction queueStep<F extends (...args: any[]) => any>(\n  fn: F,\n  ...args: Parameters<F>\n): Task {\n  return () => fn(...args);\n}\n\nfunction flattenTask(tasks: (Task | Task[])[]): Task[] {\n  const result: Task[] = [];\n\n  for (const task of tasks) {\n    if (Array.isArray(task)) {\n      result.push(...flattenTask(task));\n    } else {\n      result.push(task);\n    }\n  }\n\n  return result;\n}\n\nexport { flattenTask, queueStep };\n","const template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/background.css\">\n    <div class=\"background\">\n       <section class=\"summary\">\n          <h2 class=\"summary--title\">Title</h2>\n          <p class=\"summary--description\">Description</p>\n       </section>\n\n       <section class=\"education\">\n          <h2 class=\"education--title\"> Education</h2>\n          <article class=\"education--item\">\n            <h3 class=\"education--course\">Course</h3>\n            <h4 class=\"education--institute\">Institute Name</h4>\n            <p class=\"education--description\">Description</p>\n          </article>\n       </section>\n\n       <section class=\"skills\">\n        <h2 class=\"skills-title\"> Skills</h2>\n\n        <ul class=\"skills--list\">\n            <li class=\"skill--category\">\n                <h3 class=\"skill--category--title\">Title</h3>\n                <ul class=\"skill--tags\">\n                  <li class=\"skill--item\">Skill 1</li>\n                  <li class=\"skill--item\">Skill 2</li>\n                  <li class=\"skill--item\">Skill 3</li>\n                  <li class=\"skill--item\">Skill 4</li>\n                  <li class=\"skill--item\">Skill 5</li>\n                  <li class=\"skill--item\">Skill 6</li>\n\n                </ul>\n            </li>\n        </ul>\n       </section>\n    </div>\n`;\n\ninterface Components {\n  summary: {\n    root: HTMLElement | null;\n    title: HTMLHeadingElement | null;\n    description: HTMLParagraphElement | null;\n  };\n  education: {\n    course: HTMLHeadingElement | null;\n    institution: HTMLHeadingElement | null;\n    description: HTMLParagraphElement | null;\n  };\n  skillsRoot: HTMLUListElement;\n}\n\nexport interface Skill {\n  title: string;\n  tags: string[];\n}\n\nexport interface Summary {\n  title: string;\n  description: string;\n}\n\nexport interface Education {\n  institute: string;\n  course: string;\n  description: string;\n}\n\nexport class BackgroundPage extends HTMLElement {\n  root: ShadowRoot;\n  components: Components;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n\n    this.components = {\n      summary: {\n        root: this.root.querySelector(\".summary\") as HTMLElement,\n        title: this.root.querySelector(\".summary--title\") as HTMLHeadingElement,\n        description: this.root.querySelector(\n          \".summary--description\"\n        ) as HTMLParagraphElement,\n      },\n      education: {\n        course: this.root.querySelector(\n          \".education--course\"\n        ) as HTMLHeadingElement,\n        institution: this.root.querySelector(\n          \".education--institute\"\n        ) as HTMLHeadingElement,\n        description: this.root.querySelector(\n          \".education--description\"\n        ) as HTMLParagraphElement,\n      },\n\n      skillsRoot: this.root.querySelector(\".skills--list\") as HTMLUListElement,\n    };\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n\n  set Summary(data: Summary) {\n    console.log(\"update summary\");\n    const summary = this.components.summary;\n\n    if (!summary.title) return;\n    summary.title.textContent = data.title;\n\n    if (!summary.description) return;\n    summary.description.textContent = data.description;\n  }\n\n  set Education(data: Education) {\n    console.log(\"update education\");\n    const education = this.components.education;\n\n    if (!education.course) return;\n    education.course.textContent = data.course;\n\n    if (!education.institution) return;\n    education.institution.textContent = data.institute;\n\n    if (!education.description) return;\n    education.description.textContent = data.description;\n  }\n\n  private addSkill(data: Skill): HTMLLIElement {\n    console.log(\"update skills\");\n\n    const li = document.createElement(\"li\");\n    li.classList.add(\"skill--category\");\n\n    const h3 = document.createElement(\"h3\");\n    h3.classList.add(\"skill--category--title\");\n    h3.textContent = data.title;\n    li.appendChild(h3);\n\n    const ul = document.createElement(\"ul\");\n    ul.classList.add(\"skill--tags\");\n    li.appendChild(ul);\n\n    data.tags.forEach((item) => {\n      const tag = document.createElement(\"li\");\n      tag.classList.add(\"skill--item\");\n      tag.textContent = item;\n      ul.appendChild(tag);\n    });\n\n    return li;\n  }\n\n  set Skills(skills: Array<Skill>) {\n    const fragment = document.createDocumentFragment();\n    skills.forEach((skill) => {\n      const li = this.addSkill(skill);\n\n      fragment.appendChild(li);\n    });\n\n    this.components.skillsRoot.innerHTML = \"\";\n    this.components.skillsRoot.appendChild(fragment);\n  }\n}\n","const template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/experience.css\">\n    <div class=\"experience\">\n        <ul class=\"job-list\">\n          <li class=\"job-item\">\n            <div class=\"job-header\">\n              <h3 class=\"job-title\">Title</h2>\n              <h5 class=\"job-duration\">Duration</h2>\n            </div>\n            <div class=\"job-details\">\n              <ul class=\"job-responsibilities\">\n                <li class=\"job-responsibility-item\">Done task which improved some item</li>\n              </ul>\n            </div>\n          </li>\n        </ul>\n    </div>\n`;\n\ninterface Components {\n  root: HTMLDivElement | null;\n  jobList: HTMLUListElement | null;\n}\n\nexport interface JobExperience {\n  title: string;\n  duration: string;\n  responsibilities: string[];\n}\n\nexport class ExperiencePage extends HTMLElement {\n  root: ShadowRoot;\n  components: Components;\n  events: Record<\n    string,\n    { button: HTMLButtonElement; callback: (e: Event) => void }\n  > = {};\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n\n    this.components = {\n      root: this.root.querySelector(\".experience\") as HTMLDivElement,\n      jobList: this.root.querySelector(\".job-list\") as HTMLUListElement,\n    };\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n\n  private addEvent(\n    button: HTMLButtonElement,\n    index: number,\n    collapsibleElement: HTMLDivElement\n  ) {\n    const fn = (e: Event) => {\n      collapsibleElement.classList.toggle(\"hidden\");\n      console.log(\"button is clicked \", index);\n    };\n    this.events[`button :${index}`] = {\n      button: button,\n      callback: fn,\n    };\n    button.addEventListener(\"click\", fn);\n    console.log(\"attaching event\", index);\n  }\n\n  private addJobExperience(data: {\n    title: string;\n    duration: string;\n    responsibilities: string[];\n    index: number;\n  }): HTMLLIElement {\n    const li = document.createElement(\"li\");\n    li.classList.add(\"job-item\");\n\n    const header = document.createElement(\"div\");\n    header.classList.add(\"job-header\");\n\n    const title = document.createElement(\"h3\");\n    title.classList.add(\"job-title\");\n    title.textContent = data.title;\n\n    const duration = document.createElement(\"h5\");\n    duration.classList.add(\"job-duration\");\n    duration.textContent = data.duration;\n\n    header.appendChild(title);\n    header.appendChild(duration);\n    // header.appendChild(button);\n\n    const details = document.createElement(\"div\");\n    details.classList.add(\"job-details\");\n    details.classList.add(\"hidden\");\n\n    // this.addEvent(button, data.index, details);\n\n    const responsibilities = document.createElement(\"ul\");\n    responsibilities.classList.add(\"job-responsibilities\");\n\n    const documentFragment = document.createDocumentFragment();\n\n    data.responsibilities.forEach((responsibility) => {\n      const _li = document.createElement(\"li\");\n      _li.classList.add(\"job-responsibility-item\");\n      _li.textContent = responsibility;\n      documentFragment.appendChild(_li);\n    });\n\n    responsibilities.appendChild(documentFragment);\n    details.appendChild(responsibilities);\n    li.appendChild(header);\n    li.appendChild(details);\n\n    return li;\n  }\n\n  private removeEvents() {\n    console.log(\"remove all\");\n    Object.entries(this.events).forEach((entry) => {\n      entry[1].button.removeEventListener(\"click\", entry[1].callback);\n    });\n  }\n\n  private inflateCarousel(dataList: Array<JobExperience>) {\n    if (!this.components.jobList) return;\n    this.removeEvents();\n    this.components.jobList.innerHTML = \"\";\n\n    dataList.forEach((data, index) => {\n      this.components.jobList?.appendChild(\n        this.addJobExperience({\n          ...data,\n          index: index,\n        })\n      );\n    });\n  }\n\n  set Experience(data: Array<JobExperience>) {\n    console.log(\"experience\", data);\n    this.inflateCarousel(data);\n  }\n}\n","import { EventBus } from \"@events/eventBus\";\nimport { NavigationEvents } from \"types/eventType\";\n\nconst template = document.createElement(\"template\");\n\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/frameworks.css\">\n    <div class=\"frameworks\">\n      <div class=\"framework__navigation\">\n        <button class=\"nav-btn nav--web\">Web</button>\n        <button class=\"nav-btn nav--mobile\">Mobile</button>\n        <button class=\"nav-btn nav--languages\">Languages</button>\n        <button class=\"nav-btn nav--cli\">CLI</button>\n      </div>\n\n      <div class=\"framework__contents\">\n        <div class=\"web\">\n          <ul class=\"web__content\"></ul>\n        </div>\n        <div class=\"mobile\">\n          <ul class=\"mobile__content\"></ul>\n        </div>\n        <div class=\"languages\">\n          <ul class=\"languages__content\"></ul>\n        </div>\n        <div class=\"cli\">\n          <ul class=\"cli__content\"></ul>\n        </div>\n      </div>\n    </div>\n`;\n\ninterface Navigation {\n  web: HTMLButtonElement | null;\n  mobile: HTMLButtonElement | null;\n  language: HTMLButtonElement | null;\n  cli: HTMLButtonElement | null;\n}\n\ninterface Components {\n  framework: HTMLUListElement | null;\n  web: HTMLUListElement | null;\n  mobile: HTMLUListElement | null;\n  languages: HTMLUListElement | null;\n  cli: HTMLUListElement | null;\n}\n\nexport interface FrameworkData {\n  web: any;\n  mobile: any;\n  languages: any;\n  cli: any;\n}\n\nexport class FrameworkPage extends HTMLElement {\n  root: ShadowRoot;\n  displayBus: EventBus<NavigationEvents> | null = null;\n  components: Components;\n  navigation: Navigation;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n\n    this.components = {\n      framework: this.root.querySelector(\".frameworks\"),\n      web: this.root.querySelector(\".web__content\"),\n      mobile: this.root.querySelector(\".mobile__content\"),\n      languages: this.root.querySelector(\".languages__content\"),\n      cli: this.root.querySelector(\".cli__content\"),\n    };\n\n    this.navigation = {\n      web: this.root.querySelector(\".nav--web\"),\n      mobile: this.root.querySelector(\".nav--mobile\"),\n      language: this.root.querySelector(\".nav--languages\"),\n      cli: this.root.querySelector(\".nav--cli\"),\n    };\n  }\n\n  connectedCallback() {\n    this.bindEvents();\n  }\n\n  disconnectedCallback() {\n    this.unbindEvents();\n  }\n\n  webClick = (e: Event) => this.openPage(0);\n  mobileClick = (e: Event) => this.openPage(1);\n  languagesClick = (e: Event) => this.openPage(2);\n  cliClick = (e: Event) => this.openPage(3);\n\n  private openPage(index: number) {\n    const web = this.root.querySelector(\".web\");\n    const mobile = this.root.querySelector(\".mobile\");\n    const languages = this.root.querySelector(\".languages\");\n    const cmdLine = this.root.querySelector(\".cli\");\n\n    web?.classList.toggle(\"active\", false);\n    mobile?.classList.toggle(\"active\", false);\n    languages?.classList.toggle(\"active\", false);\n    cmdLine?.classList.toggle(\"active\", false);\n\n    if (index === 0) {\n      web?.classList.toggle(\"active\", true);\n    } else if (index == 1) {\n      mobile?.classList.toggle(\"active\", true);\n    } else if (index == 2) {\n      languages?.classList.toggle(\"active\", true);\n    } else if (index == 3) {\n      cmdLine?.classList.toggle(\"active\", true);\n    }\n  }\n\n  private bindEvents = () => {\n    if (this.navigation.web) {\n      this.navigation.web.addEventListener(\"click\", this.webClick);\n    }\n\n    if (this.navigation.mobile) {\n      this.navigation.mobile.addEventListener(\"click\", this.mobileClick);\n    }\n\n    if (this.navigation.language) {\n      this.navigation.language.addEventListener(\"click\", this.languagesClick);\n    }\n\n    if (this.navigation.cli) {\n      this.navigation.cli.addEventListener(\"click\", this.cliClick);\n    }\n  };\n\n  private unbindEvents = () => {\n    if (this.navigation.web) {\n      this.navigation.web.removeEventListener(\"click\", this.webClick);\n    }\n\n    if (this.navigation.mobile) {\n      this.navigation.mobile.removeEventListener(\"click\", this.mobileClick);\n    }\n\n    if (this.navigation.language) {\n      this.navigation.language.removeEventListener(\n        \"click\",\n        this.languagesClick\n      );\n    }\n\n    if (this.navigation.cli) {\n      this.navigation.cli.removeEventListener(\"click\", this.cliClick);\n    }\n  };\n\n  private addIcon(\n    name: string,\n    className: string[],\n    url: string\n  ): HTMLLIElement {\n    const li = document.createElement(\"li\");\n\n    // const icon = document.createElement(\"i\");\n    // icon.classList.add(...className);\n\n    // const span = document.createElement(\"span\");\n    // span.textContent = name;\n\n    // li.appendChild(icon);\n    // li.appendChild(span);\n\n    const img = document.createElement(\"img\");\n    img.setAttribute(\"src\", url);\n    img.setAttribute(\"alt\", name);\n    img.classList.add(\"framework_logo\");\n\n    li.appendChild(img);\n\n    return li;\n  }\n\n  private inflate(data: Array<{ name: string; link: string }>, type: string) {\n    switch (type) {\n      case \"web\":\n        const fragmentWeb = document.createDocumentFragment();\n        data.forEach((icon) => {\n          fragmentWeb.appendChild(this.addIcon(icon.name, [], icon.link));\n        });\n        this.components.web?.appendChild(fragmentWeb);\n        break;\n      case \"mobile\":\n        const fragmentMobile = document.createDocumentFragment();\n        data.forEach((icon) => {\n          fragmentMobile.appendChild(this.addIcon(icon.name, [], icon.link));\n        });\n        this.components.mobile?.appendChild(fragmentMobile);\n        break;\n      case \"languages\":\n        const fragmentLanguages = document.createDocumentFragment();\n        data.forEach((icon) => {\n          fragmentLanguages.appendChild(this.addIcon(icon.name, [], icon.link));\n        });\n        this.components.languages?.appendChild(fragmentLanguages);\n        break;\n      case \"command-line\":\n        const fragment = document.createDocumentFragment();\n        data.forEach((icon) => {\n          fragment.appendChild(this.addIcon(icon.name, [], icon.link));\n        });\n\n        this.components.cli?.appendChild(fragment);\n        break;\n      default:\n        console.warn(\"The types doesnt match for frameworks\");\n    }\n  }\n\n  set FrameworkData(data: FrameworkData) {\n    this.inflate(data[\"web\"], \"web\");\n    this.inflate(data[\"mobile\"], \"mobile\");\n    this.inflate(data[\"languages\"], \"languages\");\n    this.inflate(data[\"cli\"], \"command-line\");\n  }\n}\n","const template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/resume.css\">\n    <div class=\"resume\">\n      <div class=\"resume__layout\">\n        <div class=\"resume__pdf\">\n          <iframe \n            src=\"/assets/pdf/my_resume.pdf\"\n            title=\"Resume PDF Viewer\"\n            loading=\"lazy\"\n          >\n            Your browser does not support embedded PDFs. \n            <a href=\"/assets/pdf/my_resume.pdf\" download>Download the resume</a>.\n          </iframe>\n        </div>\n        <a \n          class=\"download\" \n          href=\"/assets/pdf/my_resume.pdf\" \n          download \n          title=\"Download a copy of the resume\"\n        >\n           Download Resume\n        </a>\n      </div> \n    </div>\n`;\n\nexport class ResumePage extends HTMLElement {\n  root: ShadowRoot;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n}\n","import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { NavigationEvents } from \"types/eventType\";\nimport { BackgroundPage } from \"./background\";\nimport { ExperiencePage, JobExperience } from \"./experience\";\nimport { FrameworkPage } from \"./frameworks\";\nimport { ResumePage } from \"./resume\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/about.css\">\n    <style>\n    .hidden {\n      opacity: 0;\n      pointer-events: none;\n      transform: translateY(-50%) scale(0.95);\n      transition: all 0.3s ease;\n    }\n    </style>\n    <div class=\"about hidden\">\n        <div class=\"tab\">\n          <h3 class=\"tab--name\">Background</h3>  \n        </div>\n        <div class=\"carousel\">\n          <div class=\"carousel-container\">\n            <ul class=\"carousel-track\">\n                <li class=\"slide\" data-active><slot name=\"background\">Background</slot></li>\n                <li class=\"slide\"><slot name=\"experience\">Experience</slot></li>\n                <li class=\"slide\"><slot name=\"resume\">Resume</slot></li>\n                <li class=\"slide\"><slot name=\"frameworks\">Frameworks</slot></li>\n            </ul>\n          </div>\n          <button class=\"carousel__button prev\">&#8678;</button>\n          <button class=\"carousel__button next\">&#8680;</button>\n          <div class=\"carousel_nav\">\n                <button class=\"carousel_indicator\" data-active-button></button>\n                <button class=\"carousel_indicator\"></button>\n                <button class=\"carousel_indicator\"></button>\n                <button class=\"carousel_indicator\"></button>\n          </div>\n        </div>\n    </div>\n`;\n\ninterface State {\n  currentIndex: number;\n}\n\ninterface Components {\n  about: HTMLDivElement | null;\n  tabName: HTMLHeadElement | null;\n  carousel: HTMLDivElement | null;\n  next: HTMLButtonElement | null;\n  prev: HTMLButtonElement | null;\n  track: HTMLUListElement | null;\n  navButtons: HTMLButtonElement[];\n}\n\ninterface CarouselItems {\n  background: BackgroundPage;\n  experience: ExperiencePage;\n  resume: ResumePage;\n  frameworks: FrameworkPage;\n}\n\nexport type AboutData =\n  | {\n      isError: false;\n      records: Record<string, { type: string; data: any }>;\n    }\n  | {\n      isError: true;\n      message: string;\n    };\n\nconst TabNames = [\n  \" Background\",\n  \" Experience\",\n  \" Resume\",\n  \" Frameworks\",\n];\n\nexport class AboutPage extends HTMLElement {\n  state: State = {\n    currentIndex: 0,\n  };\n  root: ShadowRoot;\n  displayBus: EventBus<NavigationEvents> | null = null;\n  components: Components;\n  carouselItem: CarouselItems | null = null;\n\n  prevClick = (e: Event) => this.swapSlides(-1);\n  nextClick = (e: Event) => this.swapSlides(1);\n  navButtonClicks: Array<(e: Event) => void> = [];\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n\n    const buttons = Array.from(\n      this.root.querySelector(\".carousel_nav\")?.children ?? []\n    );\n\n    this.components = {\n      about: this.root.querySelector(\".about\"),\n      tabName: this.root.querySelector(\".tab--name\"),\n      carousel: this.root.querySelector(\".carousel\"),\n      next: this.root.querySelector(\".next\"),\n      prev: this.root.querySelector(\".prev\"),\n      track: this.root.querySelector(\".carousel-track\"),\n      navButtons: buttons as any as HTMLButtonElement[],\n    };\n\n    this.components.navButtons.forEach((_, index) => {\n      this.navButtonClicks.push((e: Event) =>\n        this.swapSlides(index - this.state.currentIndex)\n      );\n    });\n    this.defineElements();\n    this.querySlottedElements();\n\n    this.components.about?.classList.toggle(\"hidden\");\n  }\n\n  private defineElements = () => {\n    if (!customElements.get(\"background-page\")) {\n      customElements.define(\"background-page\", BackgroundPage);\n    }\n\n    if (!customElements.get(\"experience-page\")) {\n      customElements.define(\"experience-page\", ExperiencePage);\n    }\n\n    if (!customElements.get(\"resume-page\")) {\n      customElements.define(\"resume-page\", ResumePage);\n    }\n\n    if (!customElements.get(\"frameworks-page\")) {\n      customElements.define(\"frameworks-page\", FrameworkPage);\n    }\n  };\n\n  private findElement(name: string, type: any) {\n    const id = `slot[name=\"${name}\"]`;\n    const slot = this.root.querySelector(id) as HTMLSlotElement;\n    const nodes = slot.assignedElements?.() || [];\n\n    const element = nodes.find((el) => el instanceof type);\n\n    return element as typeof type;\n  }\n\n  private querySlottedElements = () => {\n    const background: BackgroundPage = this.findElement(\n      \"background\",\n      BackgroundPage\n    );\n\n    const experience: ExperiencePage = this.findElement(\n      \"experience\",\n      ExperiencePage\n    );\n    const resume: ResumePage = this.findElement(\"resume\", ResumePage);\n    const frameworks: FrameworkPage = this.findElement(\n      \"frameworks\",\n      FrameworkPage\n    );\n\n    this.carouselItem = {\n      background: background,\n      experience: experience,\n      resume: resume,\n      frameworks: frameworks,\n    };\n  };\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.displayBus = eventBusManager.displayBus;\n\n    this.displayBus.on(\"about:show\", this.onShow);\n    this.displayBus.on(\"about:hide\", this.onHide);\n  }\n\n  set updateData(data: AboutData) {\n    if (!data.isError) {\n      this.inflateCarousel(data.records);\n    } else {\n      this.root.innerHTML = `\n        <p>${data.message}</p>\n      `;\n    }\n  }\n\n  connectedCallback() {\n    this.bindEvents();\n  }\n\n  disconnectedCallback() {\n    this.unbindEvents();\n\n    this.displayBus?.off(\"about:show\", this.onShow);\n    this.displayBus?.off(\"about:hide\", this.onHide);\n  }\n\n  private onShow = () => {\n    this.components.about?.classList.toggle(\"hidden\", false);\n  };\n\n  private onHide = () => {\n    this.components.about?.classList.toggle(\"hidden\", true);\n  };\n\n  swapSlides(offset: number) {\n    if (!this.components.track) return;\n\n    const prevIndex = this.state.currentIndex;\n    const length = this.components.track.children.length;\n\n    this.state.currentIndex += offset;\n    if (this.state.currentIndex < 0) this.state.currentIndex = length - 1;\n    if (this.state.currentIndex >= length) this.state.currentIndex = 0;\n\n    const activeSlide = this.components.track.children[\n      prevIndex\n    ] as HTMLElement;\n\n    if (this.components.tabName) {\n      this.components.tabName!.textContent = TabNames[\n        this.state.currentIndex\n      ] as string;\n    }\n\n    (\n      this.components.track.children[this.state.currentIndex] as HTMLElement\n    ).dataset.active = \"true\";\n    delete activeSlide.dataset.active;\n\n    this.components.navButtons[this.state.currentIndex].dataset.activeButton =\n      \"true\";\n    delete this.components.navButtons[prevIndex].dataset.activeButton;\n  }\n\n  private bindEvents = () => {\n    this.components.prev?.addEventListener(\"click\", this.prevClick);\n    this.components.next?.addEventListener(\"click\", this.nextClick);\n    this.components.navButtons.forEach((button, index) => {\n      button.addEventListener(\"click\", this.navButtonClicks[index]);\n    });\n  };\n\n  private unbindEvents = () => {\n    this.components.prev?.removeEventListener(\"click\", this.prevClick);\n    this.components.next?.removeEventListener(\"click\", this.nextClick);\n    this.components.navButtons.forEach((button, index) => {\n      button.removeEventListener(\"click\", this.navButtonClicks[index]);\n    });\n  };\n\n  private setBackground(data: any) {\n    if (!this.carouselItem?.background) return;\n\n    this.carouselItem.background.Summary = {\n      title: data[\"summary\"][\"title\"] ?? \"Title-Placeholder\",\n      description: data[\"summary\"][\"description\"] ?? \"Description\",\n    };\n\n    const education = data[\"education\"];\n\n    this.carouselItem.background.Education = {\n      course: education[\"course\"],\n      institute: education[\"institute\"],\n      description: education[\"description\"],\n    };\n\n    const skills: Array<any> = data[\"skills\"] as Array<any>;\n    this.carouselItem.background.Skills = skills.map((skillItem) => {\n      return {\n        title: skillItem[\"title\"],\n        tags: skillItem[\"tags\"] as Array<string>,\n      };\n    });\n  }\n\n  private setExperience(experienceData: any) {\n    if (!this.carouselItem?.experience) return;\n\n    this.carouselItem.experience.Experience = experienceData.map(\n      (data: any) => {\n        return {\n          title: data.title,\n          duration: data.duration,\n          responsibilities: data[\"responsibilities\"] as Array<string>,\n        } as JobExperience;\n      }\n    );\n  }\n\n  private setResume(resumeData: any) {\n    if (!this.carouselItem?.resume) return;\n  }\n\n  private setFrameworks(frameworkData: any) {\n    if (!this.carouselItem?.frameworks) return;\n\n    this.carouselItem.frameworks.FrameworkData = frameworkData;\n  }\n\n  private inflateCarousel(data: Record<string, { type: string; data: any }>) {\n    this.setBackground(data[\"personal\"].data);\n    this.setExperience(data[\"experience\"].data);\n    this.setResume(data[\"resume\"].data);\n    this.setFrameworks(data[\"frameworks\"].data);\n  }\n}\n","const template = document.createElement(\"template\");\ntemplate.innerHTML = `\n  <link rel=\"stylesheet\" href=\"/style/card.css\" />\n  <div class=\"card\">\n    <div class=\"card-content\">\n     <div class=\"card-header\">\n        <div class=\"card-image\">\n          <img src=\"\" alt=\"\" loading=\"lazy\"/>\n        </div>\n        <div class=\"title-group\">\n          <h3></h3>\n          <small class=\"sub-heading\"></small>\n        </div>\n      </div>  \n     \n      <p class=\"description\"></p>\n      <div class=\"tags\"></div>\n      <a class=\"github-link\" href=\"\" >\n        <img src=\"/assets/images/github-brands-solid.svg\" alt=\"Github\" loading=\"lazy\"/>\n        Github\n      </a>\n    </div>\n  </div>\n`;\n\nconst PROJECT_CARD_CONSTANTS = [\n  \"title\",\n  \"image\",\n  \"description\",\n  \"tags\",\n  \"linkUrl\",\n];\n\nexport interface CardMarshall {\n  title: string;\n  description: string;\n  imageUrl: string;\n  tags?: string;\n  linkUrl: string;\n}\n\ninterface Components {\n  logo: HTMLImageElement | null;\n  title: HTMLHeadingElement | null;\n  description: HTMLParagraphElement | null;\n  tagRoot: HTMLDivElement | null;\n  link: HTMLAnchorElement | null;\n}\n\nexport class ProjectCard extends HTMLElement {\n  root: ShadowRoot;\n  components: Components;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n\n    this.components = {\n      logo: this.root.querySelector(\"img\"),\n      title: this.root.querySelector(\"h3\"),\n      description: this.root.querySelector(\"p\"),\n      tagRoot: this.root.querySelector(\".tags\"),\n      link: this.root.querySelector(\".github-link\"),\n    };\n  }\n\n  static get observedAttributes() {\n    return PROJECT_CARD_CONSTANTS;\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue !== newValue) {\n      this.render(name);\n    }\n  }\n\n  setData(props: CardMarshall) {\n    this.setAttribute(\"title\", props.title);\n    this.setAttribute(\"image\", props.imageUrl);\n    this.setAttribute(\"description\", props.description);\n    this.setAttribute(\"tags\", props.tags ?? \"\");\n    this.setAttribute(\"linkUrl\", props.linkUrl);\n  }\n\n  render(name: string) {\n    switch (name) {\n      case \"title\":\n        const title: string = this.getAttribute(\"title\") || \"\";\n        if (this.components.title) this.components.title.textContent = title;\n        break;\n      case \"description\":\n        const description: string = this.getAttribute(\"description\") || \"\";\n        if (this.components.description)\n          this.components.description!.textContent = description;\n        break;\n      case \"image\":\n        const image: string = this.getAttribute(\"image\") || \"\";\n        const _title: string = this.getAttribute(\"title\") || \"\";\n        if (this.components.logo) {\n          this.components.logo.setAttribute(\"src\", image);\n          this.components.logo.setAttribute(\"alt\", _title);\n        }\n        break;\n      case \"tags\":\n        const tags = (this.getAttribute(\"tags\") || \"\").split(\",\");\n        if (this.components.tagRoot) {\n          const children = tags.map((tag) => {\n            const span = document.createElement(\"span\");\n            span.textContent = tag;\n            return span;\n          });\n\n          this.components.tagRoot.replaceChildren(...children);\n        }\n        break;\n      case \"linkUrl\":\n        const github_link = this.getAttribute(\"linkUrl\") || \"\";\n        if (this.components.link) {\n          this.components.link.setAttribute(`href`, github_link);\n        }\n        break;\n    }\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n}\n","import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { ViewEvents } from \"types/eventType\";\nimport { CardMarshall, ProjectCard } from \"./card\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/gallery.css\">\n    <style>\n      .hidden {\n        transform: translateX(-50%) scale(0.95);\n        opacity: 0;\n        pointer-events: none;\n      }\n    </style>\n    <div class=\"gallery hidden\" id=\"gallery\">\n    </div>\n`;\n\nexport type ProjectData =\n  | {\n      list: Array<CardMarshall>;\n      isError: false;\n    }\n  | {\n      isError: true;\n      message: string;\n    };\n\nexport class ProjectGallery extends HTMLElement {\n  root: ShadowRoot;\n  gallery: HTMLElement | null;\n\n  viewEventBus: EventBus<ViewEvents> | undefined;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n\n    this.gallery = this.root.getElementById(\"gallery\");\n  }\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.viewEventBus = eventBusManager.viewBus;\n    console.log(\"event bus attached to project gallery\");\n  }\n\n  showComponent(_: any) {\n    console.log(\"gallery shown \");\n    this.gallery?.classList.remove(\"hidden\");\n  }\n\n  hideComponent(_: any) {\n    console.log(\"gallery hidden\");\n    this.gallery?.classList.add(\"hidden\");\n  }\n\n  private onShow = (data: any) => this.showComponent(data);\n  private onHide = (data: any) => this.hideComponent(data);\n\n  private inflateData(projects: Array<CardMarshall>) {\n    if (!this.gallery) return;\n    const fragment = document.createDocumentFragment();\n    projects.forEach((cardProps) => {\n      const card: ProjectCard = document.createElement(\n        \"project-card\"\n      ) as ProjectCard;\n      card.setData(cardProps);\n      fragment.appendChild(card);\n    });\n\n    this.gallery.appendChild(fragment);\n\n    if (!this.viewEventBus) return;\n\n    this.viewEventBus.on(\"project-screen:show\", this.onShow);\n    this.viewEventBus.on(\"project-screen:hide\", this.onHide);\n  }\n\n  set updateData(data: ProjectData) {\n    if (!data.isError) {\n      this.inflateData(data.list);\n    } else {\n      this.root.innerHTML = `\n          <p>${data.message}</p>\n        `;\n    }\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {\n    if (!this.viewEventBus) return;\n\n    this.viewEventBus.off(\"project-screen:show\", this.onShow);\n    this.viewEventBus.off(\"project-screen:hide\", this.onHide);\n  }\n}\n","import {\n  ServiceKey,\n  ServiceMap,\n  ServiceRegistry,\n  ServiceType,\n} from \"types/service.types\";\n\nconst createServiceRegistry = (): ServiceRegistry => {\n  const services: Map<ServiceKey, ServiceType> = new Map<\n    ServiceKey,\n    ServiceType\n  >();\n\n  const register = <K extends ServiceKey>(\n    name: K,\n    service: ServiceMap[K]\n  ): void => {\n    if (services.has(name)) {\n      throw new Error(`Error : Redefining the service [${name}]`);\n    }\n    services.set(name, service);\n  };\n\n  const get = <K extends ServiceKey>(name: K): ServiceMap[K] => {\n    const service = services.get(name);\n    if (!service) {\n      throw new Error(\n        `Error : Trying to obtain value of an unregistered service ${name}`\n      );\n    }\n    return service as ServiceMap[K];\n  };\n\n  const has = (name: ServiceKey): boolean => {\n    return services.has(name);\n  };\n\n  return {\n    register: register,\n    get: get,\n    has: has,\n  };\n};\n\nlet serviceRegistry: ServiceRegistry | undefined = undefined;\n\nconst getServiceRegistry = () => {\n  if (!serviceRegistry) {\n    serviceRegistry = createServiceRegistry();\n  }\n\n  return serviceRegistry;\n};\n\nexport { getServiceRegistry };\n","import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { Logger } from \"@utils/Logger\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { LoadingEvents } from \"types/eventType\";\n\nconst template = document.createElement(\"template\");\n///TODO: Re-add hidden in overlay\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/loading_modal.css\"/>\n   \n    <div class=\"overlay hidden\" id=\"overlay\">\n      <div class=\"loading-logo\"></div>\n      <div id=\"loading-text\">Loading...</div>\n    </div>\n`;\n\ninterface Tags {\n  overlay: HTMLElement | null;\n}\n\nexport class LoadingModal extends HTMLElement {\n  loadingEventBus?: EventBus<LoadingEvents>;\n  root: ShadowRoot;\n  tags: Tags;\n  progress: number;\n  logger: Logger;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n    this.progress = 0;\n\n    this.tags = {\n      overlay: this.root.getElementById(\"overlay\"),\n    };\n    this.logger = getServiceRegistry().get(\"Logger\");\n    this.logger.onLoad({ origin: \"Loading Modal\" });\n  }\n\n  handleLoading = () => {\n    // this.loadingEventBus?.on(\"load:start\", (data) => {\n    //   this.tags.overlay?.classList.remove(\"hidden\");\n    // });\n    // this.loadingEventBus?.on(\"load:progress\", (data) => {\n    //   this.progress = data.loaded / data.total;\n    // });\n    // this.loadingEventBus?.on(\"load:complete\", (data) => {\n    //   this.tags.overlay?.classList.add(\"hidden\");\n    // });\n    // this.loadingEventBus?.on(\"load:error\", (data) => {});\n  };\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.loadingEventBus = eventBusManager.loadingBus;\n    this.handleLoading();\n  }\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n}\n","import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { Logger } from \"@utils/Logger\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { NavigationEvents } from \"types/eventType\";\n\nconst template = document.createElement(\"template\");\n\ntemplate.innerHTML = `\n  <link\n      rel=\"stylesheet\"\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\"\n    />\n  <link rel=\"stylesheet\" href=\"/style/navbar.css\">\n  <nav class=\"navbar\" id=\"main-nav\">\n      <div class=\"logo\">Logo</div>\n      <button class=\"toggle-btn\" aria-expanded=\"false\" aria-controls=\"main-nav\">&#9776</button>\n      <ul class=\"nav-links\" aria-expanded=\"false\">\n          <li>\n            <a href=\"\" id=\"home\" aria-label=\"Home\" class=\"active\"> \n              <i class=\"fas fa-home\"></i>\n              <span class=\"desktop\">Home</span>\n            </a>\n          </li>\n          <li>\n            <a href=\"\" id=\"about\" aria-label=\"About\">\n              <i class=\"fas fa-user\"></i> \n              <span>About</span>\n            </a>\n          </li>\n          <li>\n            <a href=\"\" id=\"projects\" aria-label=\"Projects\">\n              <i class=\"fas fa-folder-open\"></i>\n              <span>Projects</span>\n            </a>\n          </li>\n          <li>\n            <a href=\"\" id=\"contact\" aria-label=\"Contact\">\n              <i class=\"fas fa-envelope\"></i>\n              <span>Contact</span>\n            </a>\n          </li>\n      </ul>\n  </nav>\n`;\n\ntype TabKeys = \"home\" | \"about\" | \"projects\" | \"contact\";\ntype BusHandler = Record<\n  `${TabKeys}:show` | `${TabKeys}:hide`,\n  (e: NavigationEvents) => void\n>;\n\ninterface State {\n  activeTab: TabKeys;\n}\n\ninterface Components {\n  toggleBtn: Nullable<HTMLElement>;\n  navLinks: Nullable<HTMLElement>;\n  projects: Nullable<HTMLAnchorElement>;\n  about: Nullable<HTMLAnchorElement>;\n  home: Nullable<HTMLAnchorElement>;\n  contact: Nullable<HTMLAnchorElement>;\n}\n\nexport class Navbar extends HTMLElement {\n  //State\n  private state: State;\n  private displayEventBus: EventBus<NavigationEvents> | null = null;\n  private components: Components;\n  private root: ShadowRoot;\n  private busHandlers: Nullable<BusHandler> = null;\n  private sections = [\"projects\", \"about\", \"contact\", \"home\"] as const;\n  private links;\n  private logger: Logger;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n    this.root.appendChild(clone);\n\n    this.state = {\n      activeTab: \"home\",\n    };\n\n    this.components = {\n      about: null,\n      navLinks: null,\n      projects: null,\n      contact: null,\n      home: null,\n      toggleBtn: null,\n    };\n\n    this.queryElements();\n    this.links = [\n      this.components.home,\n      this.components.about,\n      this.components.projects,\n      this.components.contact,\n    ];\n\n    this.logger = getServiceRegistry().get(\"Logger\");\n    this.logger.onLoad({ origin: \"Navbar\" });\n  }\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  /**\n   * @description called when the component is mounted\n   */\n  connectedCallback() {\n    this.bindEvents();\n    this.setupBusListeners();\n  }\n\n  /**\n   * @description called when component is un mounted\n   */\n  disconnectedCallback() {\n    this.unBindEvents();\n    this.disposeBusListeners();\n  }\n\n  queryElements() {\n    this.components.toggleBtn = this.root.querySelector(\".toggle-btn\");\n    this.components.navLinks = this.root.querySelector(\".nav-links\");\n\n    if (this.components.navLinks) {\n      this.components.projects =\n        this.components.navLinks.querySelector(\"#projects\");\n\n      this.components.about = this.components.navLinks.querySelector(\"#about\");\n\n      this.components.contact =\n        this.components.navLinks.querySelector(\"#contact\");\n\n      this.components.home = this.components.navLinks.querySelector(\"#home\");\n    }\n  }\n\n  bindEvents() {\n    this.components.toggleBtn?.addEventListener(\"click\", this.onToggleClick);\n    this.components.projects?.addEventListener(\"click\", this.onProjectClick);\n    this.components.about?.addEventListener(\"click\", this.onAboutClick);\n    this.components.home?.addEventListener(\"click\", this.onHomeClick);\n    this.components.contact?.addEventListener(\"click\", this.onContactClick);\n  }\n\n  unBindEvents() {\n    this.components.toggleBtn?.removeEventListener(\"click\", this.onToggleClick);\n    this.components.projects?.removeEventListener(\"click\", this.onProjectClick);\n    this.components.about?.removeEventListener(\"click\", this.onAboutClick);\n    this.components.home?.removeEventListener(\"click\", this.onHomeClick);\n    this.components.contact?.removeEventListener(\"click\", this.onContactClick);\n  }\n\n  /***\n   * @description on Click handler for hamburger menu closing or opening\n   */\n  toggleHamburgerMenu = (): void => {\n    console.log(this.components.navLinks);\n    if (!this.components.navLinks) return;\n\n    const isOpen =\n      this.components.navLinks.getAttribute(\"aria-expanded\") === \"true\";\n    const nextState = !isOpen;\n\n    this.components.navLinks.setAttribute(\"aria-expanded\", String(nextState));\n    this.components?.toggleBtn?.setAttribute(\n      \"aria-expanded\",\n      String(nextState)\n    );\n  };\n\n  setActiveTab = (tabId: TabKeys) => {\n    this.links.forEach((link) => {\n      link?.classList.remove(\"active\");\n    });\n\n    this.components[tabId]?.classList.add(\"active\");\n    this.state.activeTab = tabId;\n  };\n\n  toggleSections = <K extends NavigationEvents[\"elementId\"]>(\n    e: Event,\n    key: K\n  ) => {\n    if (this.state.activeTab == key) return;\n    e.preventDefault();\n\n    const hideEvent = {\n      elementId: key,\n      type: `${this.state.activeTab}:hide`,\n    } as NavigationEvents;\n    this.displayEventBus?.emit(hideEvent);\n\n    this.setActiveTab(key);\n\n    const showEvent = {\n      elementId: key,\n      type: `${key}:show`,\n    } as NavigationEvents;\n\n    console.log(`nvbar emits  ${showEvent.type}`);\n    this.displayEventBus?.emit(showEvent);\n  };\n\n  private onToggleClick = (e: Event) => this.toggleHamburgerMenu();\n  private onProjectClick = (e: Event) => this.toggleSections(e, \"projects\");\n  private onAboutClick = (e: Event) => this.toggleSections(e, \"about\");\n  private onHomeClick = (e: Event) => this.toggleSections(e, \"home\");\n  private onContactClick = (e: Event) => this.toggleSections(e, \"contact\");\n\n  setupBusListeners = () => {\n    if (!this.displayEventBus) return;\n\n    this.sections.forEach((id) => {\n      const showHandler = (e: NavigationEvents) => {\n        this.logger.onMount({ origin: `[${id}]-component` });\n      };\n      const hideHandler = (e: NavigationEvents) => {\n        this.logger.onUnmount({ origin: `[${id}]-component` });\n      };\n\n      this.displayEventBus?.on(`${id}:show`, showHandler);\n      this.displayEventBus?.on(`${id}:hide`, hideHandler);\n\n      if (!this.busHandlers) return;\n\n      this.busHandlers[`${id}:show`] = showHandler;\n      this.busHandlers[`${id}:hide`] = hideHandler;\n    });\n  };\n\n  disposeBusListeners = () => {\n    if (!this.displayEventBus) return;\n\n    this.sections.forEach((id) => {\n      if (!this.busHandlers) return;\n\n      this.displayEventBus?.off(`${id}:show`, this.busHandlers[`${id}:show`]);\n      this.displayEventBus?.off(`${id}:hide`, this.busHandlers[`${id}:hide`]);\n    });\n  };\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.displayEventBus = eventBusManager.displayBus;\n  }\n}\n","import { EventBus } from \"@events/eventBus\";\nimport { EventBusManager } from \"@events/EventBusManager\";\nimport { Material, Object3D, Scene } from \"three\";\nimport { DebugEvents } from \"types/eventType\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n    <link rel=\"stylesheet\" href=\"/style/scene_inspector.css\">\n    <div class=\"inspector-wrapper\">\n\n      <div class=\"resizer\"></div>\n    \n      <div class=\"scene-inspector hidden\">\n        <div class=\"inspector-header\">\n          <span class=\"title\">Scene Inspector</span>\n          <button class=\"close-btn\">  </button>\n        </div>\n\n        <div class=\"inspector-content\">\n          <ul class=\"tree-view\">\n\n          </ul>\n        </div>\n      </div>\n\n      \n    </div>\n`;\n\n//\n\ninterface State {\n  isMenuHidden: boolean;\n  isResizing: boolean;\n}\n\ninterface TreeNode {\n  id: string;\n  label: string;\n  //  type: \"mesh\" | \"camera\" | \"light\" | \"animation\" | \"sprite\" | \"group\";\n  type: string;\n  nodes: TreeNode[];\n}\n\ninterface TreeView {\n  Objects: TreeNode[];\n  Materials: TreeNode[];\n}\n\nexport class SceneInspector extends HTMLElement {\n  root: ShadowRoot;\n  eventBus: EventBus<DebugEvents> | undefined;\n  state: State;\n  element: Element;\n  treeView: TreeView;\n\n  constructor() {\n    super();\n    this.root = this.attachShadow({ mode: \"open\" });\n    const clone = template.content.cloneNode(true);\n\n    this.root.appendChild(clone);\n    this.state = {\n      isMenuHidden: true,\n      isResizing: false,\n    };\n\n    this.element = this.root.querySelector(\".scene-inspector\")!;\n\n    this.treeView = {\n      Objects: [],\n      Materials: [],\n    };\n\n    this.handleResize();\n  }\n\n  set eventBusManager(eventBusManager: EventBusManager) {\n    this.eventBus = eventBusManager.debugBus;\n    this.eventBus?.on(\"debug:inspector\", (data) => {\n      this.handleShowHideEvent(data);\n    });\n  }\n\n  handleShowHideEvent(data: DebugEvents) {\n    this.state.isMenuHidden = !this.state.isMenuHidden;\n\n    if (this.state.isMenuHidden) {\n      this.element.classList.add(\"hidden\");\n    } else {\n      this.element.classList.remove(\"hidden\");\n      if (data.scene != null && data.scene !== undefined) {\n        this.renderTree(data.scene);\n      }\n    }\n  }\n\n  handleResize() {\n    const resizer: HTMLElement = this.root.querySelector(\".resizer\")!;\n    const panel: HTMLElement = this.root.querySelector(\".scene-inspector\")!;\n\n    resizer.addEventListener(\"mousedown\", (e) => {\n      this.state.isResizing = true;\n      document.body.style.cursor = \"ew-resize\";\n      e.preventDefault();\n    });\n\n    window.addEventListener(\"mousemove\", (e) => {\n      if (!this.state.isResizing) return;\n\n      const newWidth = window.innerWidth - (e as MouseEvent).clientX;\n\n      panel.style.width = `${Math.min(Math.max(newWidth, 200), 600)}px`;\n    });\n\n    window.addEventListener(\"mouseup\", (e) => {\n      if (this.state.isResizing) {\n        this.state.isResizing = false;\n        document.body.style.cursor = \"\";\n      }\n    });\n  }\n\n  toggleCloseButton() {\n    this.state.isMenuHidden = true;\n\n    this.element.classList.add(\"hidden\");\n  }\n\n  private collectSceneData(scene: Scene): TreeView {\n    const objects: TreeNode[] = [];\n    const materialsMap: Map<string, TreeNode> = new Map();\n\n    const traverse = (object: Object3D): TreeNode => {\n      const node: TreeNode = {\n        id: object.uuid,\n        label: object.name == \"\" ? object.type : object.name,\n        type: object.type,\n        nodes: [],\n      };\n\n      object.children.forEach((child) => {\n        node.nodes.push(traverse(child));\n      });\n\n      if (\"material\" in object && object.material) {\n        const mats: Material[] = Array.isArray(object.material)\n          ? object.material\n          : [object.material];\n        mats.forEach((mat) => {\n          /**\n           * Ensure that a material is registered only once to avoid duplicate entry\n           */\n          if (!materialsMap.has(mat.uuid)) {\n            materialsMap.set(mat.uuid, {\n              id: mat.uuid,\n              label: mat.name == \"\" ? mat.type : mat.name,\n              type: \"material\",\n              nodes: [],\n            });\n          }\n        });\n      }\n\n      return node;\n    };\n\n    scene.children.forEach((child) => {\n      objects.push(traverse(child));\n    });\n\n    return {\n      Objects: objects,\n      Materials: Array.from(materialsMap.values()),\n    };\n  }\n\n  protected renderTree(scene: Scene) {\n    this.treeView = this.collectSceneData(scene);\n\n    const treeNode = this.root.querySelector(\".tree-view\")!;\n    treeNode.innerHTML = ``;\n\n    this.addCategory(\"Objects\", treeNode, this.treeView.Objects);\n    this.addCategory(\"Materials\", treeNode, this.treeView.Materials);\n  }\n\n  private addCategory(label: string, treeRoot: Element, nodes: TreeNode[]) {\n    const li = document.createElement(\"li\");\n    li.classList.add(\"category\", \"collapsed\");\n\n    const header = document.createElement(\"div\");\n    header.classList.add(\"category-toggle\");\n    header.textContent = ` ${label}`;\n\n    header.addEventListener(\"click\", (e) => {\n      li.classList.toggle(\"collapsed\");\n      const isCollapsed = li.classList.contains(\"collapsed\");\n      header.textContent = isCollapsed ? ` ${label}` : ` ${label}`;\n    });\n\n    const nodeList = document.createElement(\"ul\");\n    nodeList.classList.add(\"category-content\");\n    nodes.forEach((node) => {\n      nodeList.appendChild(this.renderTreeNode(node));\n    });\n\n    li.appendChild(header);\n    li.appendChild(nodeList);\n    treeRoot.appendChild(li);\n  }\n\n  private renderTreeNode(node: TreeNode): HTMLElement {\n    const nodeRoot = document.createElement(\"li\");\n    nodeRoot.classList.add(\"tree-node\");\n\n    const label = document.createElement(\"div\");\n    label.classList.add(\"node-label\");\n    label.textContent = `${node.label} (${node.type})`;\n\n    nodeRoot.appendChild(label);\n\n    if (node.nodes.length > 0) {\n      nodeRoot.classList.add(\"collapsed\");\n\n      const ul = document.createElement(\"ul\");\n\n      node.nodes.forEach((node) => {\n        ul.appendChild(this.renderTreeNode(node));\n      });\n\n      label.addEventListener(\"click\", () => {\n        nodeRoot.classList.toggle(\"collapsed\");\n      });\n\n      nodeRoot.appendChild(ul);\n    }\n\n    return nodeRoot;\n  }\n\n  connectedCallback() {\n    const closeButton = this.root.querySelector(\".close-btn\")!;\n\n    closeButton.addEventListener(\"click\", () => {\n      this.toggleCloseButton();\n    });\n  }\n\n  disconnectedCallback() {}\n}\n","import { AboutPage } from \"@components/about/about\";\nimport { CardMarshall, ProjectCard } from \"@components/gallery/card\";\nimport { ProjectGallery } from \"@components/gallery/gallery\";\nimport { LoadingModal } from \"@components/loading/loading\";\nimport { Navbar } from \"@components/navbar/navbar\";\nimport { SceneInspector } from \"@components/threejs/scene_inspector\";\nimport { queueStep } from \"@utils/dsl\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { Lifecycle } from \"types/lifecycle.types\";\n\ninterface DOMManager extends Lifecycle {\n  onInit: () => void;\n}\n\nconst _loadJSON = async (url: string): Promise<any> => {\n  const res = await fetch(url);\n  const data = await res.json();\n\n  return data;\n};\n\nconst loadAboutData = async () => {\n  const about: AboutPage = document.querySelector(\"about-page\")!;\n  try {\n    const data = await _loadJSON(\"/public/data/about.json\");\n\n    about.updateData = {\n      isError: false,\n      records: data,\n    };\n  } catch (err) {\n    about.updateData = {\n      isError: true,\n      message: `Error getting data ${err}`,\n    };\n    console.error(`Error getting data ${err}`);\n  }\n};\n\nconst loadProjectData = async () => {\n  const projectGallery: ProjectGallery =\n    document.querySelector(\"project-gallery\")!;\n  try {\n    const data = await fetch(\"/public/data/projects.json\");\n    const projects = await data.json();\n\n    projectGallery.updateData = {\n      isError: false,\n      list: projects[\"projects\"] as Array<CardMarshall>,\n    };\n  } catch (err) {\n    projectGallery.updateData = {\n      isError: true,\n      message: `Error getting data ${err}`,\n    };\n    console.error(`Error getting data ${err}`);\n  }\n};\n\nconst createDomManager = (): DOMManager => {\n  let flags = {\n    navbarDefined: false,\n    loadingModalDefined: false,\n    sceneInspectorDefined: false,\n    projectGalleryDefined: false,\n    projectCardDefined: false,\n    aboutPageDefined: false,\n  };\n\n  const serviceRegsitry = getServiceRegistry();\n  const [lifecycleScheduler, logger, eventBusManager] = [\n    serviceRegsitry.get(\"LifecycleScheduler\"),\n    serviceRegsitry.get(\"Logger\"),\n    serviceRegsitry.get(\"EventBusManager\"),\n  ];\n\n  /**\n   * @description definition part\n   */\n  const onInit = () => {\n    // Navbar\n    if (!flags.navbarDefined) {\n      customElements.define(\"nav-bar\", Navbar);\n      flags.navbarDefined = true;\n    }\n    // Loading Modal\n    if (!flags.loadingModalDefined) {\n      customElements.define(\"loading-modal\", LoadingModal);\n      flags.loadingModalDefined = true;\n    }\n    // Scene Inspector\n    if (!flags.sceneInspectorDefined) {\n      customElements.define(\"scene-inspector\", SceneInspector);\n      flags.sceneInspectorDefined = true;\n    }\n\n    // Projects\n    eventBusManager.displayBus.once(\"projects:show\", () => {\n      if (flags.projectGalleryDefined) return;\n      logger.onMount({ origin: \"Projects-Page\" });\n      //Loading\n      eventBusManager.loadingBus.emit({\n        type: \"load:start\",\n        loaded: 0,\n        total: 0,\n        url: \"\",\n      });\n      customElements.define(\"project-gallery\", ProjectGallery);\n      customElements.define(\"project-card\", ProjectCard);\n\n      lifecycleScheduler.schedule(\n        queueStep(() => {\n          try {\n            const projectGallery: ProjectGallery =\n              document.querySelector(\"project-gallery\")!;\n\n            projectGallery.eventBusManager = eventBusManager;\n          } catch (err) {\n            console.error(err);\n          }\n        })\n      );\n\n      lifecycleScheduler.schedule(\n        queueStep(async () => {\n          try {\n            console.log(\"loading data\");\n            await loadProjectData();\n            eventBusManager.loadingBus.emit({ type: \"load:complete\" });\n          } catch (err) {\n            console.log(`Error while loading projects data ${err}`);\n          }\n        })\n      );\n\n      flags.projectGalleryDefined = true;\n    });\n\n    // About Page\n    eventBusManager.displayBus.once(\"about:show\", () => {\n      if (flags.aboutPageDefined) return;\n      logger.onMount({ origin: \"About-Page\" });\n      //Loading\n      eventBusManager.loadingBus.emit({\n        type: \"load:start\",\n        loaded: 0,\n        total: 0,\n        url: \"\",\n      });\n\n      customElements.define(\"about-page\", AboutPage);\n      lifecycleScheduler.schedule(\n        queueStep(async () => {\n          await loadAboutData();\n          eventBusManager.loadingBus.emit({ type: \"load:complete\" });\n        })\n      );\n\n      lifecycleScheduler.schedule(\n        queueStep(() => {\n          try {\n            const about: AboutPage = document.querySelector(\"about-page\")!;\n            about.eventBusManager = eventBusManager;\n          } catch (err) {\n            console.error(err);\n          }\n        })\n      );\n\n      flags.aboutPageDefined = true;\n    });\n  };\n\n  /**\n   * @description data-fetch part\n   */\n  const onLoad = () => {\n    logger.onLoad({ origin: \"DOMManager\" });\n    try {\n      const loadingModal: LoadingModal =\n        document.querySelector(\"loading-modal\")!;\n      loadingModal.eventBusManager = eventBusManager;\n    } catch (err) {\n      console.error(`Missing loading modal element :${err}`);\n    }\n\n    try {\n      const navbar: Navbar = document.querySelector(\"nav-bar\")!;\n      navbar.eventBusManager = eventBusManager;\n    } catch (err) {\n      console.error(`Missing navbar element : ${err}`);\n    }\n\n    try {\n      const sceneInspector: SceneInspector =\n        document.querySelector(\"scene-inspector\")!;\n      sceneInspector.eventBusManager = eventBusManager;\n    } catch (err) {\n      console.error(err);\n    }\n\n    // try {\n    //   const gallery: ProjectGallery =\n    //     document.querySelector(\"project-gallery\")!;\n    //   gallery.eventBusManager = context.eventBusManager;\n    // } catch (err) {\n    //   console.error(`Missing project gallery component : ${err}`);\n    // }\n  };\n\n  /**\n   * @description attach components with data /events\n   */\n  const onMount = () => {\n    logger.onMount({ origin: \"DOMManager\" });\n  };\n\n  const onUpdate = () => {\n    logger.onUpdate(0, { origin: \"DOMManager\" });\n  };\n\n  const onUnmount = () => {\n    const selectors = [\n      \"loading-modal\",\n      \"nav-bar\",\n      \"scene-inspector\",\n      // \"project-gallery\",\n      // \"project-card\",\n\n      // \"about-page\",\n      // \"background-page\",\n    ];\n\n    selectors.forEach((selector) => {\n      const element = document.querySelector(selector);\n      if (element?.parentElement) {\n        //call disconnected  callback for the removal of event listeners\n        element.parentElement.removeChild(element);\n      } else {\n        console.warn(\n          `Could not unmount ${selector} either already removed or not found`\n        );\n      }\n    });\n    logger.onUnmount({ origin: \"DOMManger\" });\n  };\n\n  /**\n   * @deprecated\n   */\n  const onDispose = () => {\n    logger.onDestroy({ origin: \"DOMManager\" });\n  };\n\n  return {\n    onInit: onInit,\n    onLoad: onLoad,\n    onMount: onMount,\n    onUpdate: onUpdate,\n    onUnmount: onUnmount,\n    onDestroy: onDispose,\n  };\n};\n\nexport { createDomManager };\n\nexport type { DOMManager };\n","const MAX_TASKS_PER_FRAME = 5;\nconst MAX_FRAME_BUCKET_TIME = 20; //ms\n\nconst DEFAULT_CAMERA_OPTIONS = {\n  fov: 75,\n  aspectRatio: window.innerWidth / window.innerHeight,\n  near: 0.1,\n  far: 1000,\n} as const;\n\nconst CANVAS_ID = \"game-engine\";\n\nconst MOUSE_CONFIG = {\n  SENSITIVITY: { sensitivityYaw: 0.003, sensitivityPitch: 0.001 },\n};\n\nexport {\n  CANVAS_ID,\n  DEFAULT_CAMERA_OPTIONS,\n  MAX_FRAME_BUCKET_TIME,\n  MAX_TASKS_PER_FRAME,\n  MOUSE_CONFIG,\n};\n","import { ModelAssetDescriptor } from \"types/loader.types\";\nimport { RoomAsset } from \"types/rooms.types\";\n\nconst FILE_CONSTANTS = {\n  PATH_TO_MODELS: \"/assets/Models/\",\n  PATH_TO_HDR: \"/assets/HDR/\",\n  PATH_TO_ANIMATIONS: \"../../assets/Animations/\",\n};\n\nexport const PLAYER_ASSET: ModelAssetDescriptor = {\n  id: \"player\",\n  path: FILE_CONSTANTS.PATH_TO_MODELS + \"player.glb\",\n  type: \"glb\",\n};\n\nexport const NAVIGATION_ROOM_ASSETS: RoomAsset = {\n  meshes: [\n    {\n      id: \"navigation\",\n      path: FILE_CONSTANTS.PATH_TO_MODELS + \"room.glb\",\n      type: \"glb\",\n    },\n  ],\n  hdr: {\n    id: \"environment_hdr\",\n    path: FILE_CONSTANTS.PATH_TO_HDR + \"environment.hdr\",\n    type: \"hdr\",\n  },\n};\n\nexport const ABOUT_ROOM_ASSETS: RoomAsset = {\n  meshes: [\n    {\n      id: \"about\",\n      path: FILE_CONSTANTS.PATH_TO_MODELS + \"about.glb\",\n      type: \"glb\",\n    },\n  ],\n};\n\nexport const PROJECTS_ROOM_ASSETS: RoomAsset = {\n  meshes: [\n    {\n      id: \"projects\",\n      path: FILE_CONSTANTS.PATH_TO_MODELS + \"projects.glb\",\n      type: \"glb\",\n    },\n  ],\n};\n","import { AboutRoomProps } from \"gameplay/rooms/about/room\";\nimport { NavigationRoomProps } from \"gameplay/rooms/navigation/room\";\nimport { ProjectRoomProps } from \"gameplay/rooms/projects/room\";\n\nexport const NAVIGATION_ROOM_OPTIONS: NavigationRoomProps = {\n  player: {\n    id: \"RootNode\",\n    storageId: \"player\",\n  },\n  ground: {\n    id: \"ground\",\n    storageId: \"navigation\",\n  },\n};\n\nexport const ABOUT_ROOM_OPTIONS: AboutRoomProps = {\n  player: {\n    id: \"RootNode\",\n    storageId: \"player\",\n  },\n  ground: {\n    id: \"ground\",\n    storageId: \"about\",\n  },\n};\n\nexport const PROJECTS_ROOM_OPTIONS: ProjectRoomProps = {\n  player: {\n    id: \"RootNode\",\n    storageId: \"player\",\n  },\n  ground: {\n    id: \"ground\",\n    storageId: \"projects\",\n  },\n};\n","import { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { Scene } from \"three\";\nimport { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader.js\";\nimport type { LoadingManager } from \"three/src/loaders/LoadingManager.js\";\nimport { ModelAssetDescriptor } from \"types/loader.types\";\nimport { LoaderPlugin } from \"types/plugin.types\";\n\nexport interface FBXLoaderProps {\n  scene: Scene;\n  loadingManager: LoadingManager;\n  storageManager: GlobalStorageManager;\n}\n\nexport const createFBXLoader = ({\n  loadingManager,\n  scene,\n  storageManager,\n}: FBXLoaderProps): LoaderPlugin => {\n  const fbxLoader: FBXLoader = new FBXLoader(loadingManager);\n\n  /**\n   * @description load the mesh\n   * @param metaData meta-data for loading the mesh\n   */\n  const _loadMesh = async (metaData: ModelAssetDescriptor) => {\n    try {\n      const model = await fbxLoader.loadAsync(metaData.path);\n      storageManager.getStorage(\"model\").store(metaData.id, {\n        animations: model.animations,\n        groups: model,\n      });\n      scene.add(model);\n    } catch (err) {\n      throw new Error(`Error while loading fbx file : ${err}`);\n    }\n  };\n\n  const load = async (assets: ModelAssetDescriptor[]) => {\n    const promises: Promise<void>[] = [];\n    assets.forEach((asset) => {\n      promises.push(_loadMesh(asset));\n    });\n\n    await Promise.allSettled(promises);\n  };\n\n  return {\n    load: load,\n  };\n};\n","import { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { LoadingManager, Scene } from \"three\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { ModelAssetDescriptor } from \"types/loader.types\";\nimport { LoaderPlugin } from \"types/plugin.types\";\n\nexport interface GLBLoaderProps {\n  scene: Scene;\n  loadingManager: LoadingManager;\n  storageManager: GlobalStorageManager;\n}\n\nexport const createGLBLoader = ({\n  scene,\n  loadingManager,\n  storageManager,\n}: GLBLoaderProps): LoaderPlugin => {\n  const gltfLoader: GLTFLoader = new GLTFLoader(loadingManager);\n  const dracoLoader = new DRACOLoader();\n  dracoLoader.setDecoderPath(\"/public/draco/\");\n  gltfLoader.setDRACOLoader(dracoLoader);\n\n  /**\n   * @description load the mesh\n   * @param metaData meta-data for loading the mesh\n   */\n  const _loadMesh = async (metaData: ModelAssetDescriptor) => {\n    try {\n      const model = await gltfLoader.loadAsync(metaData.path);\n      storageManager.getStorage(\"model\").store(metaData.id, {\n        animations: model.animations,\n        groups: model.scene,\n      });\n      scene.add(model.scene);\n    } catch (err) {\n      throw new Error(`Errr occuerd while loading a glb file : ${err}`);\n    }\n  };\n\n  const load = async (assets: ModelAssetDescriptor[]) => {\n    const promises: Promise<void>[] = [];\n    assets.forEach((asset) => {\n      promises.push(_loadMesh(asset));\n    });\n\n    await Promise.allSettled(promises);\n  };\n\n  return {\n    load: load,\n  };\n};\n","import { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport {\n  DataTexture,\n  LoadingManager,\n  PMREMGenerator,\n  Scene,\n  WebGLRenderer,\n} from \"three\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader.js\";\nimport { ModelAssetDescriptor } from \"types/loader.types\";\nimport { LoaderPlugin } from \"types/plugin.types\";\n\nexport interface HDRTextureLoaderProps {\n  scene: Scene;\n  renderer: WebGLRenderer;\n  loadingManager: LoadingManager;\n  storageManager: GlobalStorageManager;\n}\n\n/**\n * @description loads .hdr files and illuminates scene\n * @param props hdr loading properties\n * @returns HDR loader plugin\n */\nexport const createHDRLoader = ({\n  loadingManager,\n  renderer,\n  scene,\n}: HDRTextureLoaderProps): LoaderPlugin => {\n  const pmremGenerator: PMREMGenerator = new PMREMGenerator(renderer);\n  const rgbeLoader: RGBELoader = new RGBELoader(loadingManager);\n\n  /**\n   * @description loads a hdr file\n   * @param metaData meta-data for loading hdr\n   */\n  const _loadHDRTexture = async (\n    metaData: ModelAssetDescriptor\n  ): Promise<void> => {\n    return new Promise((reject, resolve) => {\n      console.log(\"path\", metaData.path);\n      rgbeLoader.load(\n        metaData.path,\n        (data: DataTexture, texData: object) => {\n          const envMap = pmremGenerator.fromEquirectangular(data).texture;\n          data.dispose();\n          scene.environment = envMap;\n          resolve();\n        },\n        undefined,\n        (err) => {\n          reject();\n        }\n      );\n    });\n  };\n\n  const load = async (assets: ModelAssetDescriptor[]) => {\n    const promises: Promise<void>[] = [];\n\n    assets.forEach(async (asset) => {\n      promises.push(_loadHDRTexture(asset));\n    });\n\n    await Promise.allSettled(promises);\n  };\n\n  const dispose = () => {\n    pmremGenerator.dispose();\n  };\n\n  return {\n    load: load,\n  };\n};\n","import { EventBus } from \"@events/eventBus\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { LoadingManager, Scene, WebGLRenderer } from \"three\";\nimport { LoadingEvents } from \"types/eventType\";\nimport { LoadOptions, ModelAssetDescriptor } from \"types/loader.types\";\nimport { createFBXLoader } from \"../../plugins/loader/fbx_loader\";\nimport { createGLBLoader } from \"../../plugins/loader/glb_loader\";\nimport { createHDRLoader } from \"../../plugins/loader/hdr_loader\";\nimport { GlobalStateManager, LoadingContext } from \"./state/stateType\";\n\nexport interface LoaderProps {\n  scene: Scene;\n  renderer: WebGLRenderer;\n  loaderEventBus: EventBus<LoadingEvents>;\n  stateManager: GlobalStateManager;\n  storageManager: GlobalStorageManager;\n}\n\nexport interface Loader {\n  configure: () => void;\n  load: (assets: ModelAssetDescriptor[]) => Promise<{\n    success: string[];\n    error: string[];\n  }>;\n  dispose: () => void;\n}\n/**\n * @description creates a loader with the given settings\n * @param options options to change loader settings\n * @param context global context with references\n * @returns Loader\n */\nexport const createLoader = ({\n  scene,\n  renderer,\n  loaderEventBus,\n  stateManager,\n  storageManager,\n}: LoaderProps): Loader => {\n  const manager: LoadingManager = new LoadingManager();\n  let isConfigured: boolean = false;\n  const [glbLoader, fbxLoader, hdrLoader] = [\n    createGLBLoader({\n      scene,\n      loadingManager: manager,\n      storageManager,\n    }),\n    createFBXLoader({\n      scene,\n      loadingManager: manager,\n      storageManager,\n    }),\n    createHDRLoader({\n      scene,\n      loadingManager: manager,\n      renderer,\n      storageManager,\n    }),\n  ];\n  const assetQueue: {\n    glb: ModelAssetDescriptor[];\n    fbx: ModelAssetDescriptor[];\n    hdr: ModelAssetDescriptor[];\n  } = {\n    glb: [],\n    fbx: [],\n    hdr: [],\n  };\n\n  /**\n   * @description attaches the event bus for listening to loading changes\n   */\n  const _configureLoadingManager = () => {\n    manager.onStart = (url, itemsLoaded, itemsTotal) => {\n      loaderEventBus.emit({\n        type: \"load:start\",\n        url: url,\n        loaded: itemsLoaded,\n        total: itemsTotal,\n      });\n      stateManager.loading.setState({\n        loading: { active: true, progress: 0 } as LoadingContext,\n      });\n    };\n\n    manager.onProgress = (url, itemsLoaded, itemsTotal) => {\n      loaderEventBus.emit({\n        type: \"load:progress\",\n        url: url,\n        loaded: itemsLoaded,\n        total: itemsTotal,\n      });\n      stateManager.loading.setState({\n        loading: {\n          active: true,\n          progress: itemsLoaded / itemsTotal,\n        } as LoadingContext,\n      });\n    };\n\n    manager.onLoad = () => {\n      loaderEventBus.emit({\n        type: \"load:complete\",\n      });\n    };\n\n    manager.onError = (url) => {\n      loaderEventBus.emit({\n        type: \"load:error\",\n        url: url,\n      });\n    };\n\n    isConfigured = true;\n  };\n\n  const pushToRespectiveLoaderQueue = (model: ModelAssetDescriptor) => {\n    switch (model.type) {\n      case \"glb\":\n        assetQueue.glb.push(model);\n        break;\n      case \"fbx\":\n        assetQueue.fbx.push(model);\n        break;\n      case \"hdr\":\n        assetQueue.hdr.push(model);\n        break;\n      default:\n        break;\n    }\n  };\n\n  /**\n   * @description create necessary loaders\n   */\n  const _configurePlugins = (assets: ModelAssetDescriptor[]) => {\n    assets.forEach((asset) => {\n      pushToRespectiveLoaderQueue(asset);\n    });\n  };\n\n  /**\n   * @description configuration\n   */\n  const _configure = () => {\n    _configureLoadingManager();\n  };\n\n  /**\n   * @description load all types of assets\n   */\n  const load = async (\n    assets: LoadOptions\n  ): Promise<{ success: []; error: [] }> => {\n    if (!isConfigured)\n      throw new Error(\n        `Error: Trying to load from loader before configuring it`\n      );\n\n    const promises: Promise<void>[] = [];\n    _configurePlugins(assets);\n\n    promises.push(glbLoader.load(assetQueue.glb));\n    promises.push(fbxLoader.load(assetQueue.fbx));\n    promises.push(hdrLoader.load(assetQueue.hdr));\n\n    await Promise.allSettled(promises);\n    assetQueue.fbx = [];\n    assetQueue.glb = [];\n    assetQueue.hdr = [];\n\n    return {\n      success: [],\n      error: [],\n    };\n  };\n\n  const dispose = () => {};\n\n  return {\n    configure: _configure,\n    load: load,\n    dispose: dispose,\n  };\n};\n","import { PerspectiveCamera, Scene, Vector3 } from \"three\";\n\nexport interface CameraProps {\n  camera: PerspectiveCamera;\n  scene: Scene;\n}\n\nexport interface CameraManager {\n  mount: () => void;\n  activate: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createCameraManager = (props: CameraProps): CameraManager => {\n  const { camera, scene } = props;\n  const target = new Vector3(0, 1, 2);\n  const mount = () => {};\n\n  const activate = () => {\n    camera.position.set(target.x, 1, target.z);\n    camera.rotation.set(0, 0, 0, \"XYZ\");\n  };\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    activate: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { Material, Mesh, MeshStandardMaterial } from \"three\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface GroundProps {\n  reference: ModelIdentifier;\n  storage: GlobalStorageManager;\n  logger: Logger;\n}\n\nexport interface Ground {\n  mount: () => void;\n  actiavte: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createGround = ({\n  logger,\n  reference,\n  storage,\n}: GroundProps): Ground => {\n  let ground: Nullable<Mesh> = null;\n\n  const mount = () => {\n    ground = storage\n      .getStorage(\"model\")\n      .retrieve(reference.storageId)\n      ?.groups.getObjectByName(reference.id) as Mesh;\n\n    if (!ground) {\n      console.error(`Cant get ground mesh from the id : ${reference.id}`);\n      return;\n    }\n    ground.material = (ground.material as Material).clone();\n    ground.receiveShadow = true;\n\n    (ground.material as Material).needsUpdate = true;\n    (ground.material as MeshStandardMaterial).opacity = 0.15;\n    (ground.material as MeshStandardMaterial).transparent = true;\n\n    logger.onMount({ origin: \"about-ground\" });\n  };\n\n  const activate = () => {};\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    actiavte: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import {\n  AmbientLight,\n  DirectionalLight,\n  PCFShadowMap,\n  Scene,\n  WebGLRenderer,\n} from \"three\";\n\nexport interface LightingProps {\n  scene: Scene;\n  renderer: WebGLRenderer;\n}\n\nexport interface Lighting {\n  mount: () => void;\n  activate: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createLighting = ({\n  renderer,\n  scene,\n}: LightingProps): Lighting => {\n  let dirLight: Nullable<DirectionalLight>;\n  let ambientLight: Nullable<AmbientLight>;\n\n  const mount = () => {\n    dirLight = new DirectionalLight(0xffffff, 5);\n    dirLight.castShadow = true;\n    dirLight.position.set(0, 2, 0);\n    dirLight.target.position.set(0, 1, 0);\n\n    dirLight.shadow.mapSize.width = 1024;\n    dirLight.shadow.mapSize.height = 1024;\n    dirLight.shadow.camera.near = 0.1;\n    dirLight.shadow.camera.far = 50;\n    dirLight.shadow.camera.left = -10;\n    dirLight.shadow.camera.right = 10;\n    dirLight.shadow.camera.top = 10;\n    dirLight.shadow.camera.bottom = -10;\n\n    ambientLight = new AmbientLight(0xffffff);\n\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = PCFShadowMap;\n  };\n\n  const activate = () => {\n    if (dirLight) scene.add(dirLight);\n    if (ambientLight) scene.add(ambientLight);\n  };\n\n  const deactivate = () => {\n    if (dirLight) scene.remove(dirLight);\n    if (ambientLight) scene.remove(ambientLight);\n  };\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    activate: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport {\n  AnimationMixer,\n  Object3D,\n  Object3DEventMap,\n  Scene,\n  Vector3,\n} from \"three\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface PlayerProps {\n  reference: ModelIdentifier;\n  logger: Logger;\n  storage: GlobalStorageManager;\n  scene: Scene;\n}\n\nexport interface PlayerContext {\n  scene: Scene;\n}\n\nexport interface Player {\n  mount: () => void;\n  activate: () => void;\n  deactiavte: () => void;\n  unmount: () => void;\n}\n\ninterface PlayerState {}\n\ninterface ObjectReferences {\n  playerRoot: Object3D;\n}\n\ninterface Animation {\n  mixer: AnimationMixer | null;\n}\n\nconst PLAYER_CONSTANTS = {\n  MOVEMENT_ACCELERATION: 0.05,\n  MAX_VELOCITY: 0.05,\n};\n\ninterface TempData {\n  inputDirection: Vector3;\n}\n\nexport const createPlayer = ({\n  logger,\n  reference,\n  scene,\n  storage,\n}: PlayerProps): Player => {\n  let objects: ObjectReferences;\n  let animations: Animation;\n\n  const castShadow = (player: Object3D<Object3DEventMap>) => {\n    player.traverse((child) => {\n      child.castShadow = true;\n    });\n  };\n\n  const mount = () => {\n    try {\n      logger.onMount({ origin: \"about-room-player\" });\n      let playerRoot = scene.getObjectByName(reference.id);\n\n      if (!playerRoot) {\n        throw new Error(`player doesn't exist for the id ${reference.id}`);\n      }\n\n      //Local References\n      objects = {\n        playerRoot: playerRoot,\n      };\n\n      animations = {\n        mixer: new AnimationMixer(playerRoot),\n      };\n    } catch (err) {\n      console.error(`Player mesh cant be obtained :${err}`);\n    }\n  };\n\n  const activate = () => {\n    if (objects.playerRoot) {\n      objects.playerRoot.rotation.set(0, -Math.PI / 4, 0, \"XYZ\");\n      objects.playerRoot.castShadow = true;\n      castShadow(objects.playerRoot);\n\n      objects.playerRoot.position.set(1.5, 0, 0);\n    }\n  };\n\n  const deactivate = () => {};\n\n  const unmount = () => {\n    if (objects.playerRoot) {\n      objects.playerRoot.position.set(1.5, 0, 0);\n    }\n  };\n\n  return {\n    mount: mount,\n    activate: activate,\n    deactiavte: deactivate,\n    unmount: unmount,\n  };\n};\n","import { Group, Object3DEventMap } from \"three\";\n\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { ModelIdentifier, Room } from \"types/rooms.types\";\nimport { CameraManager, createCameraManager } from \"./camera\";\nimport { createGround, Ground } from \"./ground\";\nimport { createLighting, Lighting } from \"./lights\";\nimport { createPlayer, Player } from \"./player\";\n\nexport interface AboutRoomProps {\n  player: ModelIdentifier;\n  ground: ModelIdentifier;\n}\n\ninterface Components {\n  camera: CameraManager;\n  player: Player;\n  ground: Ground;\n  lighting: Lighting;\n}\n\nexport const createAboutRoom = ({ ground, player }: AboutRoomProps): Room => {\n  //====References====\n  const serviceRegistry = getServiceRegistry();\n  const [storage, logger, context] = [\n    serviceRegistry.get(\"GlobalStorageManager\"),\n    serviceRegistry.get(\"Logger\"),\n    serviceRegistry.get(\"ThreeJSContextManager\"),\n  ];\n\n  const { scene, camera, orbit, renderer } = {\n    scene: context.get(\"scene\")!,\n    camera: context.get(\"camera\")!,\n    orbit: context.get(\"orbit\")!,\n    renderer: context.get(\"renderer\")!,\n  };\n\n  //===Local===\n  const components: Components = {\n    camera: createCameraManager({ camera: camera, scene: scene }),\n    player: createPlayer({ logger, reference: player, scene, storage }),\n    ground: createGround({ logger, reference: ground, storage }),\n    lighting: createLighting({ renderer, scene }),\n  };\n\n  let group: Nullable<Group<Object3DEventMap>> = null;\n\n  const mount = () => {\n    logger.onMount({ origin: \"about-room\" });\n    components.ground.mount();\n    components.player.mount();\n    components.camera.mount();\n    components.lighting.mount();\n    group =\n      storage.getStorage(\"model\").retrieve(ground.storageId)?.groups ?? null;\n  };\n\n  const activate = () => {\n    if (group) group.visible = true;\n\n    orbit.enabled = false;\n    components.camera.activate();\n    components.ground.actiavte();\n    components.lighting.activate();\n    components.player.activate();\n  };\n\n  const update = (deltaTime: number) => {\n    // components.camera.update(deltaTime);\n  };\n\n  const deactivate = () => {\n    if (group) group.visible = false;\n\n    components.camera.deactivate();\n    components.ground.deactivate();\n    components.lighting.deactivate();\n    components.player.deactiavte();\n  };\n\n  const unmount = () => {\n    components.camera.unmount();\n    components.ground.unmount();\n    components.lighting.unmount();\n    components.player.unmount();\n  };\n\n  return {\n    mount: mount,\n    setActive: activate,\n    update: update,\n    setDeactive: deactivate,\n    unmount: unmount,\n    isLoaded: false,\n  };\n};\n","import { Euler, MathUtils, PerspectiveCamera, Spherical, Vector3 } from \"three\";\nimport { GenericLifeCycle } from \"types/rooms.types\";\n\nexport type CameraMode = \"firstPerson\" | \"thirdPerson\";\n\nexport interface CameraProps {\n  /**Main Camera */\n  camera: PerspectiveCamera;\n}\n\n/** Contains the Updated info about player */\nexport type UpdatedInfo = {\n  playerPosition: Vector3;\n  rotationDelta: { yaw: number; pitch: number };\n};\n\n/** Controls to manage camera */\nexport interface CameraManager extends GenericLifeCycle {\n  /** Updates the camera to look the player */\n  update: (info: UpdatedInfo) => { rotation: Euler };\n\n  /**sets the mode of camera */\n  setMode: (mode: CameraMode) => void;\n}\n\n//Third Person Config\nconst TPV_CONFIG = {\n  DISTANCE: 3,\n  HEIGHT_OFFSET: 2,\n  PITCH_MIN: 0,\n  PITH_MAX: Math.PI / 2,\n  SMOOTHING: 0.1,\n} as const;\n\n//Temporary Variables\n\nlet tempPosition = new Vector3(0, 0, 0);\nlet tempOffset = new Vector3(0, 0, 0);\nlet tempLookTarget = new Vector3(0, 0, 0);\n\n/**\n *\n * @param yaw the yaw angle\n * @param pitch the pitch angle\n * @returns restricted angles\n */\nfunction clampRotation(\n  yaw: number,\n  pitch: number\n): { yaw: number; pitch: number } {\n  return {\n    yaw: MathUtils.euclideanModulo(yaw, Math.PI * 2),\n    pitch: MathUtils.clamp(pitch, TPV_CONFIG.PITCH_MIN, TPV_CONFIG.PITH_MAX),\n  };\n}\n\n/**\n *\n * @param spherical the spherical coordinates\n * @returns the Vector based on spherical coordinates\n */\nfunction computeThirdPersonOffset(spherical: Spherical): Vector3 {\n  tempOffset.set(0, 0, 0);\n  tempOffset.setFromSpherical(spherical);\n  tempOffset.y += TPV_CONFIG.HEIGHT_OFFSET;\n\n  return tempOffset;\n}\n\n/**\n * Smoothly interpolate value between from and to vectors based on alpha\n */\nfunction lerpVector(from: Vector3, to: Vector3, alpha: number) {\n  return from.lerp(to, alpha);\n}\n\ninterface InternalState {\n  mode: CameraMode;\n  rotation: { yaw: number; pitch: number };\n  spherical: Spherical;\n}\n\nexport const createCameraManager = ({ camera }: CameraProps): CameraManager => {\n  let isThirdPerson: boolean = true;\n  let state: InternalState = {\n    mode: \"thirdPerson\",\n    rotation: { pitch: Math.PI / 2, yaw: 0 },\n    spherical: new Spherical(TPV_CONFIG.DISTANCE, Math.PI / 2, 0),\n  };\n\n  const setCamera = (mode: CameraMode) => {\n    state.mode = mode;\n  };\n\n  const mount = () => {};\n\n  const activate = () => {\n    camera.position.set(1, 2, 3);\n  };\n\n  /**\n   *\n   * @param yaw\n   * @param pitch\n   */\n  const updateRotation = (delta: { yaw: number; pitch: number }) => {\n    state.rotation.yaw += delta.yaw;\n    state.rotation.pitch += delta.pitch;\n\n    const clamped = clampRotation(state.rotation.yaw, state.rotation.pitch);\n    state.rotation.yaw = clamped.yaw;\n    state.rotation.pitch = clamped.pitch;\n  };\n\n  const updateThirdPerson = (info: UpdatedInfo) => {\n    state.spherical.theta = state.rotation.yaw;\n    state.spherical.phi = state.rotation.pitch;\n\n    //Calculate offset\n    tempOffset.copy(computeThirdPersonOffset(state.spherical));\n\n    //Calculate target position and camera lerp smoothly\n    tempPosition.copy(info.playerPosition).add(tempOffset);\n    camera.position.copy(\n      lerpVector(camera.position, tempPosition, TPV_CONFIG.SMOOTHING)\n    );\n\n    tempLookTarget.copy(info.playerPosition);\n    tempLookTarget.y += TPV_CONFIG.HEIGHT_OFFSET;\n    camera.lookAt(tempLookTarget);\n  };\n\n  const updateFirstPerson = (playerPos: Vector3) => {\n    camera.position.copy(playerPos);\n    camera.rotation.set(state.rotation.pitch, state.rotation.yaw, 0);\n  };\n\n  const update = (info: UpdatedInfo): { rotation: Euler } => {\n    updateRotation(info.rotationDelta);\n\n    if (state.mode === \"thirdPerson\") {\n      updateThirdPerson(info);\n    } else {\n      updateFirstPerson(info.playerPosition);\n    }\n\n    return {\n      rotation: camera.rotation,\n    };\n  };\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    setMode: setCamera,\n    update: update,\n    mount: mount,\n    activate: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import { PerspectiveCamera, ShaderMaterial, Vector3 } from \"three\";\nimport { GridFragment } from \"./grid-fragment\";\nimport { GridVertex } from \"./grid-vertex\";\n\nexport interface GridMaterialProps {\n  camera: PerspectiveCamera;\n  fadeNear: number;\n  fadeFar: number;\n}\n\nexport interface GridMaterial {\n  mat: ShaderMaterial;\n  update: (cameraPos: Vector3) => void;\n}\n\nexport const createGridMaterial = (props: GridMaterialProps) => {\n  const mat: ShaderMaterial = new ShaderMaterial({\n    uniforms: {\n      time: { value: 1 },\n      cameraPos: { value: props.camera.position },\n      fadeNear: { value: props.fadeNear },\n      fadeFar: { value: props.fadeFar },\n    },\n    vertexShader: GridVertex,\n    fragmentShader: GridFragment,\n  });\n\n  const update = (cameraPos: Vector3) => {\n    mat.uniforms.cameraPos.value = cameraPos;\n  };\n\n  return {\n    mat: mat,\n    update: update,\n  };\n};\n","export const GridFragment = `\n    precision highp float;\n\n    varying vec2 vUV;\n\n    float line(vec2 uv,float lineWidth){\n\n       \n        float lineAA=fwidth(uv.x);\n \n        float lineUV=1.0-abs(fract(uv.x)*2.0-1.0);\n\n        return smoothstep(lineWidth+lineAA,lineWidth-lineAA,lineUV);\n    }  \n\n    float grid(vec2 uv,float lineWidth){\n\n        vec2 uvDeriv=fwidth(uv);\n        vec2 drawWidth=max(vec2(lineWidth),uvDeriv);\n        vec2 lineAA=uvDeriv*1.5;\n \n        vec2 gridUV=1.0-abs(fract(uv)*2.0-1.0);\n\n        vec2 gridLines=smoothstep(drawWidth+lineAA,drawWidth-lineAA,gridUV);\n        gridLines*=clamp(lineWidth/drawWidth,0.0,1.0);\n\n        return mix(gridLines.x,1.0,gridLines.y);\n    } \n\n    void main(){\n        vec2 st=vUV*1500.0;\n       \n        gl_FragColor = vec4(vec3(grid(st,0.01)),1.0);\n    }\n\n`;\n","export const GridVertex = `\n    precision highp float;\n\n    \n\n    varying vec2 vUV;\n    varying vec4 vWorldPos; \n\n    void main(){\n        vUV=uv;\n        vWorldPos=modelViewMatrix*vec4(position,1.0);\n\n        gl_Position = projectionMatrix*modelViewMatrix*vec4(position,1.0);\n    }\n\n`;\n","import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { createGridMaterial, GridMaterial } from \"materials/grid/grid-material\";\nimport { Mesh, PerspectiveCamera } from \"three\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface GroundProps {\n  references: ModelIdentifier;\n  storage: GlobalStorageManager;\n  logger: Logger;\n  camera: PerspectiveCamera;\n}\n\nexport interface Ground {\n  mount: () => void;\n  update: () => void;\n  activate: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createGround = ({\n  logger,\n  references,\n  storage,\n  camera,\n}: GroundProps): Ground => {\n  let ground: Nullable<Mesh> = null;\n  let gridMat: Nullable<GridMaterial> = null;\n\n  const mount = () => {\n    ground =\n      (storage\n        .getStorage(\"model\")\n        .retrieve(references.storageId)\n        ?.groups.getObjectByName(references.id) as Mesh) ?? null;\n\n    if (!ground) {\n      console.error(\n        `Cant get ground mesh from the id : ${references.id} ${references.storageId}`\n      );\n      return;\n    }\n\n    gridMat = createGridMaterial({\n      camera: camera,\n      fadeNear: 0.1,\n      fadeFar: 1,\n    });\n\n    ground.material = gridMat.mat;\n    logger.onMount({ origin: \"Navigation-Ground\" });\n  };\n\n  const update = () => {\n    gridMat?.update(camera.position);\n  };\n\n  const activate = () => {};\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    update: update,\n    activate: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import { AnimationAction, AnimationMixer } from \"three\";\n\nexport interface AnimationControllerProps {\n  mixer: AnimationMixer;\n  actions: Record<string, AnimationAction>;\n  crossFadeDuration: 0.3;\n}\n\nexport interface AnimationController {\n  play: (animationName: string, blendDuration?: number) => void;\n  stop: () => void;\n  getCurrentAnimation: () => string | null;\n  update: (deltaTime: number) => void;\n}\n\nexport const createAnimationController = ({\n  mixer,\n  actions,\n  crossFadeDuration = 0.3,\n}: AnimationControllerProps): AnimationController => {\n  let currentAnimation: Nullable<string> = null;\n  let blendTime: number = 0;\n  let currentAction: Nullable<AnimationAction> = null;\n\n  const play = (animationName: string, blendDuration = 0) => {\n    if (currentAnimation === animationName) return;\n\n    const nextAction = actions[animationName];\n    if (!nextAction) return;\n    nextAction.reset();\n    nextAction.play();\n\n    if (currentAction != null) {\n      (currentAction as AnimationAction).crossFadeTo(\n        nextAction,\n        crossFadeDuration,\n        false\n      );\n    }\n\n    currentAction = nextAction;\n    currentAnimation = animationName;\n  };\n\n  const stop = () => {};\n\n  const getCurrentAnimation = () => {\n    return currentAnimation;\n  };\n\n  const update = (deltaTime: number) => {\n    if (deltaTime !== undefined) mixer.update(deltaTime);\n  };\n\n  return {\n    play: play,\n    getCurrentAnimation: getCurrentAnimation,\n    stop: stop,\n    update: update,\n  };\n};\n","import { InputManager } from \"engine/managers/InputManager\";\nimport { AnimationController } from \"../animation\";\n\ntype States = \"Idle\" | \"Walk\" | \"Run\";\n\ninterface PlayerFSM {\n  changeState: (state: States) => void;\n  isMoving: () => boolean;\n  isShiftPressed: () => boolean;\n}\n\ninterface StateProps {\n  animationId: string;\n  animationController: AnimationController;\n}\n\ninterface State {\n  enter: (player: PlayerFSM) => void;\n  execute: (player: PlayerFSM) => void;\n  exit: (player: PlayerFSM) => void;\n}\n\nconst Idle = (props: StateProps): State => {\n  const enter = (player: PlayerFSM) => {\n    console.log(\"enter idle\");\n    props.animationController.play(props.animationId);\n  };\n\n  const execute = (player: PlayerFSM) => {\n    if (player.isMoving()) {\n      if (player.isShiftPressed()) {\n        player.changeState(\"Run\");\n      } else {\n        player.changeState(\"Walk\");\n      }\n    }\n  };\n\n  const exit = (player: PlayerFSM) => {\n    console.log(\"exit idle\");\n  };\n\n  return {\n    enter: enter,\n    execute: execute,\n    exit: exit,\n  };\n};\n\nconst Walk = (props: StateProps): State => {\n  const enter = (player: PlayerFSM) => {\n    console.log(\"enter walk\");\n    props.animationController.play(props.animationId);\n  };\n\n  const execute = (player: PlayerFSM) => {\n    if (!player.isMoving()) {\n      player.changeState(\"Idle\");\n    } else if (player.isShiftPressed()) {\n      player.changeState(\"Run\");\n    }\n  };\n\n  const exit = (player: PlayerFSM) => {\n    console.log(\"exit walk\");\n  };\n\n  return {\n    enter: enter,\n    execute: execute,\n    exit: exit,\n  };\n};\n\nconst Run = (props: StateProps): State => {\n  const enter = (player: PlayerFSM) => {\n    console.log(\"enter run\");\n    props.animationController.play(props.animationId);\n  };\n\n  const execute = (player: PlayerFSM) => {\n    if (!player.isMoving()) {\n      player.changeState(\"Idle\");\n    } else if (!player.isShiftPressed()) {\n      player.changeState(\"Walk\");\n    }\n  };\n\n  const exit = (player: PlayerFSM) => {\n    console.log(\"exit run\");\n  };\n\n  return {\n    enter: enter,\n    execute: execute,\n    exit: exit,\n  };\n};\n\nexport interface FSMOptions {\n  inputs: InputManager;\n  animationController: AnimationController;\n}\n\nexport interface FSMController {\n  mount: () => void;\n  update: (deltaTime: number) => void;\n  unmount: () => void;\n}\n\nexport const createFSMController = ({\n  inputs,\n  animationController,\n}: FSMOptions): FSMController => {\n  const { mouse, keyboard } = {\n    mouse: inputs.getController(\"mouse\"),\n    keyboard: inputs.getController(\"keyboard\"),\n  };\n\n  let shiftPressed: boolean;\n  const { idle, walk, run } = {\n    idle: Idle({\n      animationController: animationController,\n      animationId: \"Idle\",\n    }),\n    walk: Walk({\n      animationController: animationController,\n      animationId: \"Walk\",\n    }),\n    run: Run({\n      animationController: animationController,\n      animationId: \"Run\",\n    }),\n  };\n  let state: State = idle;\n  let currentState: States = \"Idle\";\n\n  const update = (deltaTime: number) => {\n    state.execute(playerFSM);\n    animationController.update(deltaTime);\n  };\n\n  const isMoving = () => {\n    if (\n      keyboard?.isKeyPressed(\"w\") ||\n      keyboard?.isKeyPressed(\"a\") ||\n      keyboard?.isKeyPressed(\"s\") ||\n      keyboard?.isKeyPressed(\"d\")\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const isShiftPressed = () => {\n    return keyboard?.isKeyPressed(\"shift\") ?? false;\n  };\n\n  const _getState = (newState: States) => {\n    switch (newState) {\n      case \"Idle\":\n        return idle;\n      case \"Walk\":\n        return walk;\n      case \"Run\":\n        return run;\n      default:\n        return idle;\n    }\n  };\n\n  const changeState = (newState: States) => {\n    if (currentState !== newState) {\n      currentState = newState;\n      state.exit(playerFSM);\n      state = _getState(newState);\n      state.enter(playerFSM);\n    }\n  };\n\n  const mount = () => {\n    state.enter(playerFSM);\n  };\n\n  const playerFSM: PlayerFSM = {\n    changeState: changeState,\n    isMoving: isMoving,\n    isShiftPressed: isShiftPressed,\n  };\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    update: update,\n    unmount: unmount,\n  };\n};\n","import { InputManager } from \"engine/managers/InputManager\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport {\n  AnimationController,\n  createAnimationController,\n} from \"gameplay/modules/animation\";\nimport {\n  createFSMController,\n  FSMController,\n} from \"gameplay/modules/fsm/player\";\nimport { KeyboardInput } from \"plugins/input/keyboard\";\nimport { MouseInput } from \"plugins/input/mouse\";\nimport { AnimationMixer, Euler, Object3D, Vector3 } from \"three\";\nimport { GenericLifeCycle, ModelIdentifier } from \"types/rooms.types\";\n\nexport interface PlayerProps {\n  reference: ModelIdentifier;\n  storage: GlobalStorageManager;\n  InputManager: InputManager;\n}\n\nexport interface Player extends GenericLifeCycle {\n  /** Update based on controller input */\n  update: (deltaTime: number) => {\n    position: Vector3;\n    rotation: Euler;\n    rotationDelta: { yaw: number; pitch: number };\n  };\n}\n\ninterface PlayerState {\n  direction: Vector3;\n  velocity: Vector3;\n  rotationApplied: {\n    yaw: number;\n    pitch: number;\n  };\n}\n\ninterface Controllers {\n  input: {\n    mouse: Nullable<MouseInput>;\n    keyboard: Nullable<KeyboardInput>;\n  };\n  animation: AnimationController;\n  fsm: FSMController;\n}\n\ninterface ObjectReferences {\n  player: Nullable<Object3D>;\n}\n\nconst PLAYER_CONSTANTS = {\n  MOVEMENT_ACCELERATION: 0.05,\n  MAX_VELOCITY: 0.05,\n};\n\ninterface TempData {\n  inputDirection: Vector3;\n}\n\nexport const createPlayer = ({\n  reference,\n  storage,\n  InputManager,\n}: PlayerProps): Player => {\n  let controllers: Controllers;\n\n  let state: PlayerState = {\n    direction: new Vector3(0, 0, -1),\n    velocity: new Vector3(0, 0, 0),\n    rotationApplied: {\n      pitch: 0,\n      yaw: 0,\n    },\n  };\n  let tempData: TempData = {\n    inputDirection: new Vector3(0, 0, 0),\n  };\n\n  let objects: ObjectReferences = { player: null };\n\n  const mount = () => {\n    try {\n      const playerRoot = storage\n        .getStorage(\"model\")\n        .retrieve(reference.storageId);\n\n      if (!playerRoot) {\n        throw new Error(\n          `player doesn't exist for the id ${reference.storageId}`\n        );\n      }\n      const player = playerRoot?.groups;\n      const animations = playerRoot?.animations;\n\n      /**Animation */\n      const mixer = new AnimationMixer(player);\n      const animationController = createAnimationController({\n        mixer: mixer,\n        actions: {\n          Idle: mixer.clipAction(animations[0]),\n          Walk: mixer.clipAction(animations[3]),\n          Run: mixer.clipAction(animations[1]),\n        },\n        crossFadeDuration: 0.3,\n      });\n\n      const fsmController = createFSMController({\n        animationController: animationController,\n        inputs: InputManager,\n      });\n      fsmController.mount();\n\n      objects = {\n        player: player,\n      };\n\n      controllers = {\n        input: {\n          mouse: InputManager.getController(\"mouse\"),\n          keyboard: InputManager.getController(\"keyboard\"),\n        },\n        animation: animationController,\n        fsm: fsmController,\n      };\n    } catch (err) {\n      console.error(`Player mesh cant be obtained :${err}`);\n    }\n  };\n\n  const updateMouse = (mouse: Nullable<MouseInput>) => {\n    if (!mouse || !objects.player!) return;\n\n    state.rotationApplied = mouse.getRotation();\n    objects.player.rotation.y += state.rotationApplied.yaw;\n  };\n\n  const updateKeyboard = (\n    keyboard: Nullable<KeyboardInput>,\n    deltaTime: number\n  ) => {\n    if (!keyboard || !objects.player) return;\n    const FRICTION = 5.0;\n    const VELOCITY_DEADZONE = 0.001;\n\n    const { inputDirection } = tempData;\n    inputDirection.set(0, 0, 0);\n\n    if (keyboard.isKeyPressed(\"w\")) inputDirection.z -= 1;\n    if (keyboard.isKeyPressed(\"s\")) inputDirection.z += 1;\n    if (keyboard.isKeyPressed(\"a\")) inputDirection.x -= 1;\n    if (keyboard.isKeyPressed(\"d\")) inputDirection.x += 1;\n\n    if (inputDirection.length() > 0) {\n      //normalize direction\n      inputDirection.applyQuaternion(objects.player.quaternion);\n      inputDirection.normalize();\n\n      //accelerate towards the direction\n      state.velocity.add(\n        inputDirection.multiplyScalar(\n          PLAYER_CONSTANTS.MOVEMENT_ACCELERATION * deltaTime\n        )\n      );\n      //ensure the velocity doesn't go over the threshold\n      state.velocity.clampLength(0, PLAYER_CONSTANTS.MAX_VELOCITY);\n    } else if (inputDirection.length() == 0 && state.velocity.length() > 0) {\n      const decay = Math.exp(-FRICTION * deltaTime);\n      state.velocity.multiplyScalar(decay);\n\n      if (state.velocity.lengthSq() < VELOCITY_DEADZONE * VELOCITY_DEADZONE) {\n        state.velocity.set(0, 0, 0);\n      }\n    }\n\n    objects.player.position.add(state.velocity);\n  };\n\n  const updateControllers = (deltaTime: number) => {\n    updateMouse(controllers.input.mouse);\n    updateKeyboard(controllers.input.keyboard, deltaTime);\n  };\n\n  const update = (deltaTime: number) => {\n    updateControllers(deltaTime);\n\n    controllers.fsm.update(deltaTime);\n\n    return {\n      position: objects.player?.position ?? new Vector3(0, 0, 0),\n      rotation: objects.player?.rotation ?? new Euler(0, 0, 0, \"XYZ\"),\n      rotationDelta: state.rotationApplied,\n    };\n  };\n\n  const activate = () => {\n    // objects.playerRoot.rotation.set(0,0,0,'XYZ')\n  };\n\n  const deactivate = () => {};\n\n  const unmount = () => {\n    try {\n      //objects.playerRoot.clear();\n    } catch (err) {\n      console.error(`Error while destroy player ${err}`);\n    }\n  };\n\n  return {\n    mount: mount,\n    activate: activate,\n    deactivate: deactivate,\n    update: update,\n    unmount: unmount,\n  };\n};\n","import { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { InputManager } from \"engine/managers/InputManager\";\nimport { Euler, Vector3 } from \"three\";\nimport { ObjectStorageUnit } from \"types/managers.types\";\nimport { ModelIdentifier, Room } from \"types/rooms.types\";\nimport { CameraManager, createCameraManager } from \"./camera\";\nimport { createGround, Ground } from \"./ground\";\nimport { createPlayer, Player } from \"./player\";\n\nexport interface NavigationRoomProps {\n  player: ModelIdentifier;\n  ground: ModelIdentifier;\n}\n\ninterface Entities {\n  player: Player;\n  ground: Ground;\n  camera: CameraManager;\n  inputs: InputManager;\n}\n\ninterface InternalState {\n  player: {\n    position: Vector3;\n    rotation: Euler;\n    rotationDelta: { yaw: number; pitch: number };\n  };\n}\n\ninterface TempData {}\n\nexport const createNavigationRoom = ({\n  player,\n  ground,\n}: NavigationRoomProps): Room => {\n  //External dependencies\n  const serviceRegistry = getServiceRegistry();\n\n  const [logger, storage, eventBusManager, InputManager, contextManager] = [\n    serviceRegistry.get(\"Logger\"),\n    serviceRegistry.get(\"GlobalStorageManager\"),\n    serviceRegistry.get(\"EventBusManager\"),\n    serviceRegistry.get(\"InputManager\"),\n    serviceRegistry.get(\"ThreeJSContextManager\"),\n  ];\n\n  //Internal\n  let components: Nullable<Entities> = {\n    camera: createCameraManager({ camera: contextManager.get(\"camera\")! }),\n    player: createPlayer({\n      reference: player,\n      InputManager: InputManager,\n      storage: storage,\n    }),\n    ground: createGround({\n      camera: contextManager.get(\"camera\")!,\n      logger: logger,\n      references: ground,\n      storage: storage,\n    }),\n    inputs: InputManager,\n  };\n\n  //TODO:no idea on what to add yet\n  let state: Nullable<InternalState> = null;\n  //TODO: no idea what temporary data to add yet\n  let tempData: Nullable<TempData> = null;\n\n  let room: Nullable<ObjectStorageUnit> = null;\n  let isMounted: boolean = false;\n\n  const activate = () => {\n    if (!room || !components) return;\n    room.groups.visible = true;\n    contextManager.get(\"orbit\")!.enabled = false;\n\n    components.camera.activate();\n    components.ground.activate();\n    components.player.activate();\n  };\n\n  const deactivate = () => {\n    if (!room || !components) return;\n    room.groups.visible = false;\n\n    components.camera.deactivate();\n    components.ground.deactivate();\n    components.player.deactivate();\n  };\n\n  const mount = () => {\n    if (isMounted || !components) return;\n\n    logger.onMount({ origin: \"Navigation Room\" });\n    state = {\n      player: {\n        position: new Vector3(0, 0, 0),\n        rotation: new Euler(0, 0, 0),\n        rotationDelta: { yaw: 0, pitch: 0 },\n      },\n    };\n\n    //get base root i.e group so that it can be used to toggle visibility\n    room = storage.getStorage(\"model\").retrieve(ground.storageId) ?? null;\n\n    components.player.mount();\n    components.ground.mount();\n    components.camera.mount();\n\n    isMounted = true;\n  };\n\n  const update = (deltaTime: number) => {\n    if (!isMounted || !components || !state) return;\n    contextManager.get(\"orbit\")!.update();\n    state.player = components.player.update(deltaTime);\n    components.camera.update({\n      playerPosition: state.player.position,\n      rotationDelta: state.player.rotationDelta,\n    });\n\n    //entities.ground.update();\n  };\n\n  const unmount = () => {\n    if (!isMounted || !components) return;\n\n    logger.onUnmount({ origin: \"Navigation Room\" });\n\n    components.player.unmount();\n    components.ground.unmount();\n\n    components = null;\n    room = null;\n  };\n\n  return {\n    mount: mount,\n    update: update,\n    unmount: unmount,\n    setActive: activate,\n    setDeactive: deactivate,\n    isLoaded: false,\n  };\n};\n","import { EventBusManager } from \"@events/EventBusManager\";\nimport { CatmullRomCurve3, PerspectiveCamera, Scene, Vector3 } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nexport interface CameraProps {\n  camera: PerspectiveCamera;\n  scene: Scene;\n  orbit: OrbitControls;\n  eventBusManager: EventBusManager;\n}\n\nexport interface CameraManager {\n  mount: () => void;\n  activate: () => void;\n  update: (deltaTime: number) => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createCameraManager = ({\n  camera,\n  eventBusManager,\n  orbit,\n  scene,\n}: CameraProps): CameraManager => {\n  const points: Vector3[] = [\n    new Vector3(0, 2, 10),\n    new Vector3(0, 2, 5),\n    new Vector3(0, 2, 3),\n    new Vector3(0, 2, 2),\n    new Vector3(0, 2, 1),\n    new Vector3(0, 2, 0),\n    new Vector3(0, 2, -1),\n    new Vector3(0, 1, -1),\n    new Vector3(0, 1, -1.5),\n    new Vector3(0, 1, -2),\n  ];\n\n  const camPath = new CatmullRomCurve3(points);\n  let t = 0;\n  let isComplete: boolean = false;\n\n  const mount = () => {\n    t = 0;\n  };\n\n  const activate = () => {\n    orbit.enabled = false;\n    camera.position.set(0, 2.5, 10);\n    camera.near = 0.001;\n    camera.far = 1000;\n  };\n\n  const update = (deltaTime: number) => {\n    if (!isComplete && t > 1) {\n      isComplete = true;\n      orbit.enabled = true;\n      eventBusManager.viewBus.emit({\n        type: \"project-screen:show\",\n        elementId: \"project-screen\",\n      });\n      console.log(\"event emitted view event\");\n    }\n\n    if (!isComplete) {\n      t += deltaTime * 0.1;\n\n      if (t <= 0.9) {\n        const position = camPath.getPointAt(t);\n        const lookAt = camPath.getPointAt(t + 0.1);\n        lookAt.z -= 0.1;\n        camera.position.copy(position);\n        camera.lookAt(lookAt);\n      }\n    }\n  };\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    activate: activate,\n    update: update,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { Material, Mesh, MeshStandardMaterial } from \"three\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface GroundProps {\n  reference: ModelIdentifier;\n  logger: Logger;\n  storage: GlobalStorageManager;\n}\n\nexport interface Ground {\n  mount: () => void;\n  actiavte: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createGround = ({\n  reference,\n  logger,\n  storage,\n}: GroundProps): Ground => {\n  let ground: Nullable<Mesh> = null;\n\n  const mount = () => {\n    const groups = storage\n      .getStorage(\"model\")\n      .retrieve(reference.storageId)?.groups;\n    ground = groups?.getObjectByName(reference.id) as Mesh;\n\n    if (!ground) {\n      console.error(`Cant get ground mesh from the id : ${reference.id}`);\n      return;\n    }\n    ground.material = (ground.material as Material).clone();\n    ground.receiveShadow = true;\n\n    (ground.material as Material).needsUpdate = true;\n    (ground.material as MeshStandardMaterial).opacity = 1;\n    (ground.material as MeshStandardMaterial).transparent = true;\n    const excludeShadow = [\"sky\", \"ground\"];\n\n    groups?.traverse((child) => {\n      if (!excludeShadow.includes(child.name)) {\n        child.castShadow = true;\n      }\n    });\n\n    logger.onMount({ origin: \"about-ground\" });\n  };\n\n  const activate = () => {};\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    actiavte: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import {\n  AmbientLight,\n  DirectionalLight,\n  PCFShadowMap,\n  Scene,\n  WebGLRenderer,\n} from \"three\";\n\nexport interface LightingProps {\n  scene: Scene;\n  renderer: WebGLRenderer;\n}\n\nexport interface Lighting {\n  mount: () => void;\n  activate: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createLighting = ({\n  renderer,\n  scene,\n}: LightingProps): Lighting => {\n  let dirLight: Nullable<DirectionalLight>;\n  let ambientLight: Nullable<AmbientLight>;\n\n  const mount = () => {\n    dirLight = new DirectionalLight(0xffffff, 5);\n    dirLight.castShadow = true;\n    dirLight.position.set(0, 1, 0.5);\n    dirLight.target.position.set(0, 0, 0);\n\n    dirLight.shadow.mapSize.width = 1024;\n    dirLight.shadow.mapSize.height = 1024;\n    dirLight.shadow.camera.near = 0.1;\n    dirLight.shadow.camera.far = 50;\n    dirLight.shadow.camera.left = -10;\n    dirLight.shadow.camera.right = 10;\n    dirLight.shadow.camera.top = 10;\n    dirLight.shadow.camera.bottom = -10;\n\n    ambientLight = new AmbientLight(0xffffff);\n\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = PCFShadowMap;\n  };\n\n  const activate = () => {\n    if (dirLight) scene.add(dirLight);\n    if (ambientLight) scene.add(ambientLight);\n  };\n\n  const deactivate = () => {\n    if (dirLight) scene.remove(dirLight);\n    if (ambientLight) scene.remove(ambientLight);\n  };\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    activate: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n","import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { AnimationMixer, Object3D, Object3DEventMap, Scene } from \"three\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface PlayerProps {\n  reference: ModelIdentifier;\n  storage: GlobalStorageManager;\n  logger: Logger;\n}\n\nexport interface PlayerContext {\n  scene: Scene;\n}\n\nexport interface Player {\n  mount: () => void;\n  activate: () => void;\n  update: (deltaTime: number) => void;\n  deactiavte: () => void;\n  unmount: () => void;\n}\n\ninterface ObjectReferences {\n  playerRoot: Object3D;\n}\n\nexport const createPlayer = ({\n  logger,\n  reference,\n  storage,\n}: PlayerProps): Player => {\n  let objects: ObjectReferences;\n  let mixers: AnimationMixer[] = [];\n\n  const castShadow = (player: Object3D<Object3DEventMap>) => {\n    player.traverse((child) => {\n      child.castShadow = true;\n    });\n  };\n\n  const mount = () => {\n    try {\n      let playerRoot = storage\n        .getStorage(\"model\")\n        .retrieve(reference.storageId)?.groups;\n      let animations =\n        storage.getStorage(\"model\").retrieve(reference.storageId)?.animations ??\n        [];\n\n      if (!playerRoot) {\n        throw new Error(\n          `player doesn't exist for the id ${reference.storageId}`\n        );\n      }\n\n      //Local References\n      objects = {\n        playerRoot: playerRoot,\n      };\n\n      // console.log('armature',armature)\n      const mixer = new AnimationMixer(playerRoot);\n      mixer.clipAction(animations[2]).play();\n\n      mixers.push(mixer);\n      logger.onMount({ origin: \"Project-Room-Player\" });\n    } catch (err) {\n      console.error(`Player mesh cant be obtained :${err}`);\n    }\n  };\n\n  const activate = () => {\n    if (objects.playerRoot) {\n      objects.playerRoot.rotation.set(0, 0, 0, \"XYZ\");\n      objects.playerRoot.castShadow = true;\n      castShadow(objects.playerRoot);\n    }\n  };\n\n  const update = (deltaTime: number) => {\n    mixers.forEach((mixer) => {\n      mixer.update(deltaTime);\n    });\n  };\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    activate: activate,\n    update: update,\n    deactiavte: deactivate,\n    unmount: unmount,\n  };\n};\n","import { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { Group, Object3DEventMap } from \"three\";\nimport { ModelIdentifier, Room, RoomProps } from \"types/rooms.types\";\nimport { CameraManager, createCameraManager } from \"./camera\";\nimport { createGround, Ground } from \"./ground\";\nimport { createLighting, Lighting } from \"./lights\";\nimport { createPlayer, Player } from \"./player\";\n\nexport interface ProjectRoomProps extends RoomProps {\n  player: ModelIdentifier;\n  ground: ModelIdentifier;\n}\n\ninterface Components {\n  camera: CameraManager;\n  player: Player;\n  ground: Ground;\n  lighting: Lighting;\n}\n\nexport const createProjectRoom = ({\n  player,\n  ground,\n}: ProjectRoomProps): Room => {\n  //====References===\n  const serviceRegistry = getServiceRegistry();\n  const [storage, context, eventBusManager, logger] = [\n    serviceRegistry.get(\"GlobalStorageManager\"),\n    serviceRegistry.get(\"ThreeJSContextManager\"),\n    serviceRegistry.get(\"EventBusManager\"),\n    serviceRegistry.get(\"Logger\"),\n  ];\n\n  const { scene, camera, orbit, renderer } = {\n    scene: context.get(\"scene\")!,\n    camera: context.get(\"camera\")!,\n    orbit: context.get(\"orbit\")!,\n    renderer: context.get(\"renderer\")!,\n  };\n\n  //===Local===\n  const components: Components = {\n    camera: createCameraManager({\n      camera,\n      eventBusManager,\n      orbit,\n      scene,\n    }),\n    player: createPlayer({ logger, reference: player, storage }),\n    ground: createGround({ logger, reference: ground, storage }),\n    lighting: createLighting({ renderer, scene }),\n  };\n  let group: Nullable<Group<Object3DEventMap>> = null;\n\n  const mount = () => {\n    components.ground.mount();\n    components.player.mount();\n    components.camera.mount();\n    components.lighting.mount();\n\n    group =\n      storage.getStorage(\"model\").retrieve(ground.storageId)?.groups ?? null;\n\n    logger.onMount({ origin: \"Projects\" });\n  };\n\n  const activate = () => {\n    if (group) group.visible = true;\n\n    components.camera.activate();\n    components.ground.actiavte();\n    components.lighting.activate();\n    components.player.activate();\n  };\n\n  const update = (deltaTime: number) => {\n    components.player.update(deltaTime);\n    components.camera.update(deltaTime);\n  };\n\n  const deactivate = () => {\n    if (group) group.visible = false;\n\n    components.camera.deactivate();\n    components.ground.deactivate();\n    components.lighting.deactivate();\n    components.player.deactiavte();\n  };\n\n  const unmount = () => {\n    components.camera.unmount();\n    components.ground.unmount();\n    components.lighting.unmount();\n    components.player.unmount();\n  };\n\n  return {\n    mount: mount,\n    setActive: activate,\n    update: update,\n    setDeactive: deactivate,\n    unmount: unmount,\n    isLoaded: false,\n  };\n};\n","import {\n  ABOUT_ROOM_ASSETS,\n  NAVIGATION_ROOM_ASSETS,\n  PLAYER_ASSET,\n  PROJECTS_ROOM_ASSETS,\n} from \"config/asset_manifest\";\nimport {\n  ABOUT_ROOM_OPTIONS,\n  NAVIGATION_ROOM_OPTIONS,\n  PROJECTS_ROOM_OPTIONS,\n} from \"config/rooms\";\nimport { createLoader, Loader } from \"engine/core/LoadingManager\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { createAboutRoom } from \"gameplay/rooms/about/room\";\nimport { createNavigationRoom } from \"gameplay/rooms/navigation/room\";\nimport { createProjectRoom } from \"gameplay/rooms/projects/room\";\nimport { Room, RoomAsset } from \"types/rooms.types\";\n\nexport interface RoomController {\n  mount: () => Promise<void>;\n  switchRoom: Record<RoomKey | \"default\", () => void>;\n  update: (deltaTime: number) => void;\n  unmount: () => void;\n}\n\ntype RoomKey = \"navigation\" | \"about\" | \"projects\";\n\ntype RoomMap = {\n  [key in RoomKey]: Nullable<Room>;\n};\n\ntype RoomAssetsMap = {\n  [key in RoomKey]: RoomAsset;\n};\n\nexport const createRoomController = (): RoomController => {\n  const serviceRegistry = getServiceRegistry();\n  const [storage, logger, eventBusManager, contextManager, stateManager] = [\n    serviceRegistry.get(\"GlobalStorageManager\"),\n    serviceRegistry.get(\"Logger\"),\n    serviceRegistry.get(\"EventBusManager\"),\n    serviceRegistry.get(\"ThreeJSContextManager\"),\n    serviceRegistry.get(\"GlobalStateManager\"),\n  ];\n\n  let loader: Nullable<Loader> = null;\n  let rooms: RoomMap = { navigation: null, about: null, projects: null };\n  let roomAssets: RoomAssetsMap = {\n    navigation: NAVIGATION_ROOM_ASSETS,\n    about: ABOUT_ROOM_ASSETS,\n    projects: PROJECTS_ROOM_ASSETS,\n  };\n  let activeRoom: Nullable<Room> = null;\n  let activeRoomKey: Nullable<RoomKey> = null;\n\n  const initializeLoader = (): void => {\n    try {\n      loader = createLoader({\n        storageManager: storage,\n        stateManager: stateManager,\n        loaderEventBus: eventBusManager.loadingBus,\n        renderer: contextManager.get(\"renderer\")!,\n        scene: contextManager.get(\"scene\")!,\n      });\n      loader?.configure();\n    } catch (err) {\n      throw new Error(\n        `[Gameplay] Couldnt create and initailize the loader due to ${err}`\n      );\n    }\n  };\n\n  const instantiateRoom = (key: RoomKey): Room => {\n    switch (key) {\n      case \"navigation\":\n        rooms[key] = createNavigationRoom(NAVIGATION_ROOM_OPTIONS);\n        return rooms[key]!;\n      case \"about\":\n        rooms[key] = createAboutRoom(ABOUT_ROOM_OPTIONS);\n        return rooms[key]!;\n      case \"projects\":\n        rooms[key] = createProjectRoom(PROJECTS_ROOM_OPTIONS);\n        return rooms[key]!;\n      default:\n        throw new Error(`Unknown Room key ${key}`);\n    }\n  };\n\n  const loadRoom = async (key: RoomKey) => {\n    if (!loader) return;\n\n    const assets = roomAssets[key];\n    if (!assets)\n      throw new Error(\n        \"[Room Controller] sufficient asset meta data is not given.\"\n      );\n\n    if (!rooms[key]) {\n      const room: Room = instantiateRoom(key);\n\n      console.log(\"load room\", roomAssets[key]);\n\n      const loadItems = [...roomAssets[key].meshes];\n      if (roomAssets[key].hdr) loadItems.push(roomAssets[key].hdr);\n\n      //Load only once\n      await loader.load(loadItems);\n\n      if (room) {\n        room.mount();\n        room.isLoaded = true;\n        activeRoom = room;\n      }\n    }\n  };\n\n  const switchRoom = async (key: RoomKey): Promise<void> => {\n    if (activeRoomKey === key) return;\n\n    if (activeRoomKey != null) {\n      if (rooms[activeRoomKey] != null) rooms[activeRoomKey]!.setDeactive();\n    }\n\n    await loadRoom(key);\n\n    if (rooms[key]) rooms[key].setActive();\n    activeRoomKey = key;\n  };\n\n  const mount = async (): Promise<void> => {\n    logger.onMount({ origin: \"Room Controller\" });\n    initializeLoader();\n    await loader?.load([PLAYER_ASSET]);\n    await loadRoom(\"navigation\");\n    await switchRoom(\"navigation\");\n  };\n\n  const update = (deltaTime: number) => {\n    activeRoom?.update(deltaTime);\n  };\n\n  const unmount = (): void => {\n    loader?.dispose();\n\n    Object.values(rooms).forEach((room) => {\n      room?.unmount();\n    });\n\n    logger.onUnmount({ origin: \"room-controller\" });\n  };\n\n  const transitionRooms = (key: RoomKey) => {\n    eventBusManager.loadingBus.emit({\n      type: \"load:start\",\n      loaded: 0,\n      total: 0,\n      url: \"\",\n    });\n\n    Promise.allSettled([switchRoom(key)]).then(() => {\n      eventBusManager.loadingBus.emit({ type: \"load:complete\" });\n    });\n  };\n\n  const deactivateRoom = () => {\n    if (!activeRoomKey) return;\n\n    activeRoom?.setDeactive();\n  };\n\n  return {\n    mount: mount,\n    switchRoom: {\n      navigation: () => transitionRooms(\"navigation\"),\n      about: () => transitionRooms(\"about\"),\n      projects: () => transitionRooms(\"projects\"),\n      default: () => deactivateRoom(),\n    },\n    update: update,\n    unmount: unmount,\n  };\n};\n","import { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { Clock } from \"three\";\nimport { createRoomController, RoomController } from \"./RoomManager\";\n\nexport interface GameplayManager {\n  onMount: () => Promise<void>;\n  update: () => void;\n  onUnmount: () => void;\n}\n\ninterface State {\n  deltaTime: number;\n}\n\ninterface TempData {\n  deltaTime: number;\n}\n\nexport const createGameplayManager = (): GameplayManager => {\n  const serviceRegistry = getServiceRegistry();\n\n  //Global properties\n  const [eventBusManager, logger, input] = [\n    serviceRegistry.get(\"EventBusManager\"),\n    serviceRegistry.get(\"Logger\"),\n    serviceRegistry.get(\"InputManager\"),\n  ];\n  const clock: Clock = new Clock();\n\n  //Re usable state (no re-allocation)\n  let state: State = { deltaTime: 0 };\n  let tempData: TempData = { deltaTime: 0 };\n  let isMounted: boolean = false;\n\n  //Controllers\n  let roomController: RoomController = createRoomController();\n\n  const bind = () => {\n    eventBusManager.displayBus.on(\n      \"about:show\",\n      roomController.switchRoom[\"about\"]\n    );\n    eventBusManager.displayBus.on(\n      \"about:hide\",\n      roomController.switchRoom[\"default\"]\n    );\n\n    eventBusManager.displayBus.on(\n      \"projects:show\",\n      roomController.switchRoom[\"projects\"]\n    );\n    eventBusManager.displayBus.on(\n      \"projects:hide\",\n      roomController.switchRoom[\"default\"]\n    );\n\n    eventBusManager.displayBus.on(\n      \"home:show\",\n      roomController.switchRoom[\"navigation\"]\n    );\n    eventBusManager.displayBus.on(\n      \"home:hide\",\n      roomController.switchRoom[\"default\"]\n    );\n  };\n\n  const mount = async (): Promise<void> => {\n    if (isMounted) return;\n\n    await roomController.mount();\n    bind();\n    isMounted = true;\n\n    window.addEventListener(\"keyup\", (e) => {\n      console.log(e);\n    });\n  };\n\n  const updateDeltaTime = (): void => {\n    tempData.deltaTime = clock.getDelta();\n\n    if (!isNaN(tempData.deltaTime) && tempData.deltaTime !== undefined) {\n      state.deltaTime = tempData.deltaTime;\n    }\n  };\n\n  const update = () => {\n    updateDeltaTime();\n\n    roomController.update(state.deltaTime ?? 0);\n  };\n\n  const unbind = () => {\n    // eventBusManager.displayBus.off(\"about:show\", rooms.navigation.setActive);\n    // eventBusManager.displayBus.off(\"about:hide\", rooms.navigation.setDeactive);\n  };\n\n  const unmount = () => {\n    unbind();\n  };\n\n  return {\n    onMount: mount,\n    update: update,\n    onUnmount: unmount,\n  };\n};\n","import { queueStep } from \"@utils/dsl\";\nimport { DEFAULT_CAMERA_OPTIONS } from \"config/constants\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { PerspectiveCamera, Scene, WebGLRenderer } from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { Lifecycle } from \"types/lifecycle.types\";\n\nexport interface ThreeJSRenderOptions {\n  /** Dom element id where the render will be mounted */\n  domMountId: string;\n}\n\nexport interface ThreeJsRenderer\n  extends Lifecycle<[], [loop: () => void], [], [], []> {}\n\nexport const createThreeJsInstance = (\n  props: ThreeJSRenderOptions\n): ThreeJsRenderer => {\n  //Local references\n  const { fov, aspectRatio, near, far } = DEFAULT_CAMERA_OPTIONS;\n\n  //=====Core Elements======\n  let scene: Scene = new Scene();\n  let camera: PerspectiveCamera = new PerspectiveCamera(\n    fov,\n    aspectRatio,\n    near,\n    far\n  );\n  let renderer: WebGLRenderer = new WebGLRenderer({ antialias: true });\n  let orbit: OrbitControls;\n\n  // State\n  let animationCallback: Nullable<() => void> = null;\n  let animationFrameId: Nullable<number> = null;\n\n  //External Context Hook\n  const contextManager = getServiceRegistry().get(\"ThreeJSContextManager\");\n  const logger = getServiceRegistry().get(\"Logger\");\n\n  //Internal Methods\n  const mountRendererToDom = (elementId: string): void => {\n    const container = document.getElementById(elementId);\n\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    if (container) {\n      container.appendChild(renderer.domElement);\n      orbit = new OrbitControls(camera, renderer.domElement);\n    } else {\n      console.warn(`Could not find element with selector tag : ${elementId}`);\n    }\n  };\n\n  /**\n   * Mount the context_manager to allow reference to scene and other props externally\n   */\n  const exposeToContext = (): void => {\n    contextManager.set(\"scene\", scene);\n    contextManager.set(\"camera\", camera);\n    contextManager.set(\"orbit\", orbit);\n    contextManager.set(\"renderer\", renderer);\n  };\n\n  const onLoad = () => {\n    return [\n      queueStep(mountRendererToDom, props.domMountId),\n      queueStep(exposeToContext),\n      queueStep(logger.onLoad, { origin: \"ThreeJs-Manager\" }),\n    ];\n  };\n\n  const onMount = (callback: () => void) => {\n    return [\n      () => {\n        animationCallback = callback;\n      },\n      queueStep(logger.onMount, { origin: \"ThreeJs-Manager\" }),\n    ];\n  };\n\n  const render = () => {\n    if (animationFrameId !== null) return; //prevent multiple render loops\n\n    const loop = () => {\n      //Recursive callback function\n      animationFrameId = requestAnimationFrame(loop);\n      animationCallback?.();\n      renderer.render(scene, camera);\n    };\n\n    loop();\n  };\n\n  const onUnmount = () => {\n    const container = document.getElementById(props.domMountId);\n    if (animationFrameId !== null) {\n      cancelAnimationFrame(animationFrameId);\n      animationFrameId = 0;\n    }\n    if (container && renderer.domElement.parentElement === container) {\n      container.removeChild(renderer.domElement);\n    }\n\n    renderer.dispose();\n    logger.onUnmount({ origin: \"ThreeJs-Manager\" });\n  };\n\n  return {\n    onLoad: onLoad,\n    onMount: onMount,\n    onUpdate: render,\n    onUnmount: onUnmount,\n    onDestroy: () => {},\n  };\n};\n","import { EventBus } from \"@events/eventBus\";\nimport { flattenTask, queueStep } from \"@utils/dsl\";\nimport { CANVAS_ID } from \"config/constants\";\nimport { getServiceRegistry } from \"engine/core/ServiceRegistry\";\nimport { PerspectiveCamera, Scene, WebGLRenderer } from \"three\";\nimport { DebugEvents } from \"types/eventType\";\nimport { Lifecycle, Task } from \"types/lifecycle.types\";\n\nimport {\n  createGameplayManager,\n  GameplayManager,\n} from \"gameplay/GameplayManager\";\nimport { ThreeJsContextManager } from \"./ContextManager\";\nimport { createThreeJsInstance } from \"./ThreeJsManager\";\n\nexport interface RenderManager extends Lifecycle {\n  onInit: () => void;\n}\n\n/** Resises Camera and Renderer on window resise */\nconst handleResize = (camera: PerspectiveCamera, renderer: WebGLRenderer) => {\n  const { height, width } = {\n    height: window.innerHeight,\n    width: window.innerWidth,\n  };\n\n  camera.aspect = width / height;\n  camera.updateProjectionMatrix();\n  renderer.setSize(width, height);\n};\n\n/**Toggles the Object Tree when you press shift and u*/\nconst handleDebug = (\n  e: KeyboardEvent,\n  debugEventBus: EventBus<DebugEvents>,\n  scene: Scene\n) => {\n  if (!(e.key.toLowerCase() === \"u\" && e.shiftKey)) return;\n\n  e.preventDefault();\n  debugEventBus.emit({\n    type: \"debug:inspector\",\n    scene: scene,\n  });\n};\n\nexport const createRenderManager = (): RenderManager => {\n  const serviceRegistry = getServiceRegistry();\n  const logger = serviceRegistry.get(\"Logger\");\n  const threeJsManager = createThreeJsInstance({ domMountId: CANVAS_ID });\n  let threeJsContext: ThreeJsContextManager;\n  const gameplay: GameplayManager = createGameplayManager();\n\n  let _handleResize: (e: UIEvent) => void;\n  let _handleDebug: (e: KeyboardEvent) => void;\n\n  /** Adds required event listeners */\n  const addEventListeners = () => {\n    /**\n     * Primary initialization to ensure correct aspect ratios\n     */\n    handleResize(\n      threeJsContext.get(\"camera\")!,\n      threeJsContext.get(\"renderer\")!\n    );\n\n    window.addEventListener(\"resize\", _handleResize);\n    window.addEventListener(\"keydown\", _handleDebug);\n  };\n\n  /** Release all event listeners to prevent memory leaks */\n  const removeEventListeners = () => {\n    window.removeEventListener(\"resize\", _handleResize);\n    window.removeEventListener(\"keydown\", _handleDebug);\n  };\n\n  const onInit = () => {};\n\n  const onLoad = (): Task[] => {\n    const tasks: Task[] = [\n      ...flattenTask(threeJsManager.onLoad() as Task[]),\n      queueStep(logger.onLoad, { origin: \"Render-Manager\" }),\n    ];\n    return tasks;\n  };\n\n  const onMount = (): Task[] => {\n    const tasks: Task[] = [\n      () => {\n        threeJsContext = serviceRegistry.get(\"ThreeJSContextManager\");\n        //Handle Resize\n        _handleResize = (e: UIEvent) =>\n          handleResize(\n            threeJsContext.get(\"camera\")!,\n            threeJsContext.get(\"renderer\")!\n          );\n        //Handle Debug\n        _handleDebug = (e: KeyboardEvent) =>\n          handleDebug(\n            e,\n            serviceRegistry.get(\"EventBusManager\").debugBus,\n            threeJsContext.get(\"scene\")!\n          );\n      },\n      queueStep(addEventListeners),\n      queueStep(logger.onMount, { origin: \"Render-Manager\" }),\n    ];\n\n    return tasks;\n  };\n\n  const onUpdate = (): Task[] => {\n    return [\n      queueStep(async () => {\n        try {\n          await gameplay.onMount(); // gameplay logic added after obtaining all assets\n        } catch (error) {\n          throw new Error(\"[Game Manager] Loading failed :${error}\");\n        }\n      }),\n      ...flattenTask(threeJsManager.onMount(() => {}) as Task[]), // pass the gameplay loop as callback to the game engine\n      queueStep(threeJsManager.onMount, gameplay.update),\n      queueStep(threeJsManager.onUpdate),\n      queueStep(logger.onUpdate, 0, { origin: \"Render-Manager\" }),\n    ];\n  };\n\n  const onUnmount = () => {\n    const tasks: Task[] = [\n      queueStep(removeEventListeners),\n      queueStep(gameplay.onUnmount),\n      queueStep(threeJsManager.onUnmount),\n      queueStep(logger.onUnmount, { origin: \"Render-Manager\" }),\n    ];\n\n    return tasks;\n  };\n\n  const onDispose = () => {\n    logger.onDestroy({ origin: \"RenderManager\" });\n  };\n\n  return {\n    onInit,\n    onLoad,\n    onMount,\n    onUpdate,\n    onUnmount,\n    onDestroy: onDispose,\n  };\n};\n","import { queueStep } from \"@utils/dsl\";\nimport { createDomManager, DOMManager } from \"engine/managers/DOMManger\";\nimport {\n  createRenderManager,\n  RenderManager,\n} from \"engine/managers/RenderManager\";\nimport { ServiceRegistry } from \"types/service.types\";\nimport { getServiceRegistry } from \"./ServiceRegistry\";\n\ninterface Engine {\n  run: () => void;\n}\n/**\n * @description Orchestration Layer that acts as a link to native\n * browser events for performing updates\n * @returns {Engine}\n */\nconst createEngine = (): Engine => {\n  const serviceRegistry: ServiceRegistry = getServiceRegistry();\n  const [logger, lifecycleScheduler, storage, input] = [\n    serviceRegistry.get(\"Logger\"),\n    serviceRegistry.get(\"LifecycleScheduler\"),\n    serviceRegistry.get(\"GlobalStorageManager\"),\n    serviceRegistry.get(\"InputManager\"),\n  ];\n\n  let domManager: DOMManager;\n  let renderManager: RenderManager;\n\n  const onInit = () => {\n    console.log(\"Engine initialized\");\n    domManager = createDomManager();\n    renderManager = createRenderManager();\n\n    lifecycleScheduler.schedule(storage.inflate);\n    lifecycleScheduler.schedule(input.onInit);\n    lifecycleScheduler.schedule(domManager.onInit);\n    lifecycleScheduler.schedule(renderManager.onInit);\n  };\n\n  const onLoad = () => {\n    lifecycleScheduler.schedule(domManager.onLoad);\n    lifecycleScheduler.schedule(renderManager.onLoad);\n    lifecycleScheduler.schedule(queueStep(logger.onLoad, { origin: \"Engine\" }));\n  };\n\n  const onMount = () => {\n    logger.onMount({ origin: \"Engine\" });\n\n    lifecycleScheduler.schedule(domManager.onMount);\n    lifecycleScheduler.schedule(renderManager.onMount);\n  };\n\n  const onUpdate = () => {\n    domManager.onUpdate();\n    lifecycleScheduler.schedule(renderManager.onUpdate);\n  };\n\n  const onUnmount = () => {\n    logger.onUnmount({ origin: \"Engine\" });\n    lifecycleScheduler.schedule(domManager.onUnmount);\n    lifecycleScheduler.schedule(renderManager.onUnmount);\n    lifecycleScheduler.schedule(input.onUnmount);\n  };\n\n  const onDispose = () => {\n    logger.onDestroy({ origin: \"Engine\" });\n    lifecycleScheduler.schedule(domManager.onDestroy);\n    lifecycleScheduler.schedule(renderManager.onDestroy);\n  };\n\n  const run = () => {\n    //onLoad essentials before mounting\n    onInit();\n\n    //after dom loaded mount\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      onLoad();\n    });\n\n    //after resources are achieved\n    window.addEventListener(\"load\", () => {\n      onMount();\n      onUpdate();\n    });\n\n    //unmount and dispose\n    window.addEventListener(\"beforeunload\", () => {\n      onUnmount();\n    });\n\n    //Deprecated\n    // window.addEventListener(\"unload\", () => {\n    //   onDispose();\n    // });\n\n    lifecycleScheduler.run();\n  };\n\n  return {\n    run: run,\n  };\n};\n\nexport { createEngine };\nexport type { Engine };\n"]}