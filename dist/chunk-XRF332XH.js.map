{"version":3,"sources":["../src/gameplay/rooms/projects/ground.ts"],"names":["createGround","reference","logger","storage","ground","groups","excludeShadow","child"],"mappings":"AAkBO,IAAMA,CAAAA,CAAe,CAAC,CAC3B,SAAA,CAAAC,CAAAA,CACA,OAAAC,CAAAA,CACA,OAAA,CAAAC,CACF,CAAA,GAA2B,CACzB,IAAIC,EAAyB,IAAA,CAmC7B,OAAO,CACL,KAAA,CAlCY,IAAM,CAClB,IAAMC,CAAAA,CAASF,CAAAA,CACZ,UAAA,CAAW,OAAO,CAAA,CAClB,QAAA,CAASF,EAAU,SAAS,CAAA,EAAG,MAAA,CAGlC,GAFAG,CAAAA,CAASC,CAAAA,EAAQ,gBAAgBJ,CAAAA,CAAU,EAAE,CAAA,CAEzC,CAACG,CAAAA,CAAQ,CACX,QAAQ,KAAA,CAAM,CAAA,mCAAA,EAAsCH,CAAAA,CAAU,EAAE,CAAA,CAAE,CAAA,CAClE,MACF,CACAG,CAAAA,CAAO,QAAA,CAAYA,CAAAA,CAAO,QAAA,CAAsB,KAAA,EAAM,CACtDA,EAAO,aAAA,CAAgB,IAAA,CAEtBA,CAAAA,CAAO,QAAA,CAAsB,WAAA,CAAc,IAAA,CAC3CA,EAAO,QAAA,CAAkC,OAAA,CAAU,CAAA,CACnDA,CAAAA,CAAO,QAAA,CAAkC,WAAA,CAAc,KACxD,IAAME,CAAAA,CAAgB,CAAC,KAAA,CAAO,QAAQ,CAAA,CAEtCD,GAAQ,QAAA,CAAUE,CAAAA,EAAU,CACrBD,CAAAA,CAAc,QAAA,CAASC,CAAAA,CAAM,IAAI,CAAA,GACpCA,CAAAA,CAAM,UAAA,CAAa,IAAA,EAEvB,CAAC,CAAA,CAEDL,EAAO,OAAA,CAAQ,CAAE,MAAA,CAAQ,cAAe,CAAC,EAC3C,EAUE,QAAA,CARe,IAAM,CAAC,CAAA,CAStB,UAAA,CAPiB,IAAM,CAAC,CAAA,CAQxB,OAAA,CANc,IAAM,CAAC,CAOvB,CACF","file":"chunk-XRF332XH.js","sourcesContent":["import { Logger } from \"@utils/Logger\";\nimport { GlobalStorageManager } from \"engine/managers/storage/storageTypes\";\nimport { Material, Mesh, MeshStandardMaterial } from \"three\";\nimport { ModelIdentifier } from \"types/rooms.types\";\n\nexport interface GroundProps {\n  reference: ModelIdentifier;\n  logger: Logger;\n  storage: GlobalStorageManager;\n}\n\nexport interface Ground {\n  mount: () => void;\n  actiavte: () => void;\n  deactivate: () => void;\n  unmount: () => void;\n}\n\nexport const createGround = ({\n  reference,\n  logger,\n  storage,\n}: GroundProps): Ground => {\n  let ground: Nullable<Mesh> = null;\n\n  const mount = () => {\n    const groups = storage\n      .getStorage(\"model\")\n      .retrieve(reference.storageId)?.groups;\n    ground = groups?.getObjectByName(reference.id) as Mesh;\n\n    if (!ground) {\n      console.error(`Cant get ground mesh from the id : ${reference.id}`);\n      return;\n    }\n    ground.material = (ground.material as Material).clone();\n    ground.receiveShadow = true;\n\n    (ground.material as Material).needsUpdate = true;\n    (ground.material as MeshStandardMaterial).opacity = 1;\n    (ground.material as MeshStandardMaterial).transparent = true;\n    const excludeShadow = [\"sky\", \"ground\"];\n\n    groups?.traverse((child) => {\n      if (!excludeShadow.includes(child.name)) {\n        child.castShadow = true;\n      }\n    });\n\n    logger.onMount({ origin: \"about-ground\" });\n  };\n\n  const activate = () => {};\n\n  const deactivate = () => {};\n\n  const unmount = () => {};\n\n  return {\n    mount: mount,\n    actiavte: activate,\n    deactivate: deactivate,\n    unmount: unmount,\n  };\n};\n"]}